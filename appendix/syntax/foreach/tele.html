<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="The foreach Statement C# provides a foreach statement that is often useful for iterating through the elements of certain data structures. A foreach can be used when all of the following conditions hold:
The data structure is a subtype of either IEnumerable or IEnumerable<T> for some type T. You do not need to know the locations in the data structure of the individual elements. You do not need to modify the data structure with this loop."><meta name=author content="Rod Howell and Josh Weese"><meta name=twitter:card content="summary"><meta name=twitter:title content="The foreach Statement :: Data Structures in C#"><meta name=twitter:description content="The foreach Statement C# provides a foreach statement that is often useful for iterating through the elements of certain data structures. A foreach can be used when all of the following conditions hold:
The data structure is a subtype of either IEnumerable or IEnumerable<T> for some type T. You do not need to know the locations in the data structure of the individual elements. You do not need to modify the data structure with this loop."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis300/appendix/syntax/foreach/"><meta property="og:site_name" content="Data Structures in C#"><meta property="og:title" content="The foreach Statement :: Data Structures in C#"><meta property="og:description" content="The foreach Statement C# provides a foreach statement that is often useful for iterating through the elements of certain data structures. A foreach can be used when all of the following conditions hold:
The data structure is a subtype of either IEnumerable or IEnumerable<T> for some type T. You do not need to know the locations in the data structure of the individual elements. You do not need to modify the data structure with this loop."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Appendices"><meta property="article:modified_time" content="2023-05-29T14:01:30-05:00"><meta itemprop=name content="The foreach Statement :: Data Structures in C#"><meta itemprop=description content="The foreach Statement C# provides a foreach statement that is often useful for iterating through the elements of certain data structures. A foreach can be used when all of the following conditions hold:
The data structure is a subtype of either IEnumerable or IEnumerable<T> for some type T. You do not need to know the locations in the data structure of the individual elements. You do not need to modify the data structure with this loop."><meta itemprop=dateModified content="2023-05-29T14:01:30-05:00"><meta itemprop=wordCount content="911"><title>The foreach Statement :: Data Structures in C#</title>
<link href=/cis300/css/fontawesome-all.min.css?1723480305 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis300/css/fontawesome-all.min.css?1723480305 rel=stylesheet></noscript><link href=/cis300/css/nucleus.css?1723480305 rel=stylesheet><link href=/cis300/css/auto-complete.css?1723480305 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis300/css/auto-complete.css?1723480305 rel=stylesheet></noscript><link href=/cis300/css/perfect-scrollbar.min.css?1723480305 rel=stylesheet><link href=/cis300/css/fonts.css?1723480305 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis300/css/fonts.css?1723480305 rel=stylesheet></noscript><link href=/cis300/css/theme.css?1723480305 rel=stylesheet><link href=/cis300/css/theme-auto.css?1723480305 rel=stylesheet id=R-variant-style><link href=/cis300/css/chroma-auto.css?1723480305 rel=stylesheet id=R-variant-chroma-style><link href=/cis300/css/variant.css?1723480305 rel=stylesheet><link href=/cis300/css/print.css?1723480305 rel=stylesheet media=print><script src=/cis300/js/variant.js?1723480305></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis300",window.index_js_url="/cis300/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis300/css/custom.css?1723480305 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis300/appendix/syntax/foreach/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><div hidden><h1 id=the-foreach-statement>The foreach Statement</h1></div><h2 id=the-foreach-statement>The <strong>foreach</strong> Statement</h2><p>C# provides a <strong>foreach</strong> statement that is often useful for iterating through the elements of certain data structures. A <strong>foreach</strong> can be used when all of the following conditions hold:</p><ol><li>The data structure is a subtype of either <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-6.0" rel=external target=_blank><strong>IEnumerable</strong></a> or <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1?view=net-6.0" rel=external target=_blank><strong>IEnumerable&lt;T></strong></a> for some type <strong>T</strong>.</li><li>You do not need to know the locations in the data structure of the individual elements.</li><li>You do not need to modify the data structure with this loop.</li></ol><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>Many of the data structures provided to you in CIS 300, as well as
many that you are to write yourself for this class, are not subtypes
of either of the types mentioned in 1 above. Consequently, we cannot
use a <strong>foreach</strong> loop to iterate through any of these data
structures. However, most of the data structures provided in the .NET
Framework, as well as all arrays, are subtypes of one of these types.</p></div></div><p>For example, the <strong>string</strong> class is a subtype of both <strong>IEnumerable</strong>
and <strong>IEnumerable&lt;Char></strong>. To see that this is the case, look in
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string?view=net-6.0" rel=external target=_blank>the documentation for the <strong>string</strong>
class</a>. In
the &ldquo;Implements&rdquo; section, we see all of the
<a href=/cis300/trees/tries/multiple-impl/>interfaces</a> implemented by <strong>string</strong>.
Because <strong>string</strong> implements both of these interfaces, it is a
subtype of each. We can therefore iterate through the elements (i.e., the characters) of a <strong>string</strong> using a <strong>foreach</strong> statement, provided we don&rsquo;t need to know the location of each character in the <strong>string</strong> (because a <strong>string</strong> is immutable, we can&rsquo;t change its contents).</p><p>Suppose, for example, that we want to find out how many times the letter &lsquo;i&rsquo; occurs in a <strong>string</strong> <code>s</code>. Because we don&rsquo;t need to know the locations of these occurrences, we can iterate through the characters with a <strong>foreach</strong> loop, as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kt>int</span> <span class=n>count</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=kt>char</span> <span class=n>c</span> <span class=k>in</span> <span class=n>s</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>c</span> <span class=p>==</span> <span class=sc>&#39;i&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>count</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The <strong>foreach</strong> statement requires three pieces of information:</p><ul><li>The type of the elements in the data structure (<strong>char</strong> in the above example).</li><li>The name of a new variable (<code>c</code> in the above example). The type of this variable will be the type of the elements in the data structure (i.e., <strong>char</strong> in the above example). It will take on the values of the elements as the loop iterates.</li><li>Following the keyword <strong>in</strong>, the data structure being traversed (<code>s</code> in the above example).</li></ul><p>The loop then iterates once for each element in the data structure (unless a statement like <strong>return</strong> or <strong>break</strong> causes it to terminate prematurely). On each iteration, the variable defined in the <strong>foreach</strong> statement stores one of the elements in the data structure. Thus, in the above example, <code>c</code> takes the value of a different character in <code>s</code> on each iteration. Note, however, that we have no access to the location containing <code>c</code> on any particular iteration - this is why we don&rsquo;t use a <strong>foreach</strong> loop when we need to know the locations of the elements. Because <code>c</code> takes on the value of each character in <code>s</code>, we are able to count how many of them equal &lsquo;i&rsquo;.</p><p>Occasionally, it may not be obvious what type to use for the
<strong>foreach</strong> loop variable. In such cases, if the data structure is a
subtype of <strong>IEnumerable&lt;T></strong>, then the type should be whatever type
is used for <strong>T</strong>. Otherwise, it is safe to use <strong>object</strong>. Note,
however, that if the data structure is not a subtype of
<strong>IEnumerable&lt;T></strong>, but you know that the elements are some specific
subtype of <strong>object</strong>, you can use that type for the loop variable -
the type will not be checked until the code is executed. For example,
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.listbox?view=windowsdesktop-6.0" rel=external target=_blank><strong>ListBox</strong></a>
is a class that implements a GUI control displaying a list of
elements. The elements in the <strong>ListBox</strong> are accessed via its
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.listbox.items?view=windowsdesktop-6.0#system-windows-forms-listbox-items" rel=external target=_blank><strong>Items</strong></a>
property, which gets a data structure of type
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.listbox.objectcollection?view=windowsdesktop-6.0" rel=external target=_blank><strong>ListBox.ObjectCollection</strong></a>. Any
<strong>object</strong> can be added to this data structure, but we often just add <strong>string</strong>s. <strong>ListBox.ObjectCollection</strong> is a subtype of <strong>IEnumerable</strong>; however, it is permissible to set up a <strong>foreach</strong> loop as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=kt>string</span> <span class=n>s</span> <span class=k>in</span> <span class=n>uxList</span><span class=p>.</span><span class=n>Items</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>where <code>uxList</code> is a <strong>ListBox</strong> variable. As long as all of the elements in <strong>uxList.Items</strong> are <strong>string</strong>s, no exception will be thrown.</p><p>While the <strong>foreach</strong> statement provides a clean way to iterate through a data structure, it is important to keep in mind its limitations. First, it can&rsquo;t even be used on data structures that aren&rsquo;t subtypes of <strong>IEnumerable</strong> or <strong>IEnumerable&lt;T></strong>. Second, there are many cases, especially when iterating through arrays, where the processing we need to do on the elements depends on the locations of the elements. For example, consider the problem of determining whether two arrays contain the same elements in the same order. For each element of one array, we need to know if the element <em>at the same location</em> in the other array is the same. Because the locations are important, a <strong>foreach</strong> loop isn&rsquo;t appropriate - we should use a <strong>for</strong> loop instead. Finally, a <strong>foreach</strong> should never be used to modify a data structure, as this causes unpredictable results.</p><p>Even when a <strong>foreach</strong> would work, it is not always the best choice. For example, in order to determine whether a data structure contains a given element, we could iterate through the structure with a <strong>foreach</strong> loop and compare each element to the given element. While this would work, most data structures provide methods for determining whether they contain a given element. These methods are often far more efficient than using a <strong>foreach</strong> loop.</p><footer class=footline></footer></article></div></main></div></div><script src=/cis300/js/clipboard.min.js?1723480305 defer></script><script src=/cis300/js/perfect-scrollbar.min.js?1723480305 defer></script><script src=/cis300/js/theme.js?1723480305 defer></script><script src=/cis300/js/tele-scroll.js?1723480305 defer></script></body></html>