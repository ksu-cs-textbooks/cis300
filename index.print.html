




	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0">
    <meta name="generator" content="Relearn 5.2.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="K-State CIS 300: Data Structures">
    <meta name="author" content="Rod Howell and Josh Weese">
    <title>Data Structures in C#</title>
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/fontawesome-all.min.css?1685734617" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/fontawesome-all.min.css?1685734617" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/featherlight.min.css?1685734617" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/featherlight.min.css?1685734617" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/auto-complete.css?1685734617" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/auto-complete.css?1685734617" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/perfect-scrollbar.min.css?1685734617" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/nucleus.css?1685734617" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/fonts.css?1685734617" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/fonts.css?1685734617" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/theme.css?1685734617" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/theme-light-theme.css?1685734617" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/ie.css?1685734617" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/variant.css?1685734617" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/print.css?1685734617" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/format-print.css?1685734617" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/variant.js?1685734617"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="https://ksu-cs-textbooks.github.io/cis300/index.json";
      var root_url="https://ksu-cs-textbooks.github.io/cis300/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis300/';
      window.variants && variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/custom.css?1685734617" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/jquery.min.js?1685734617" defer></script>

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis300/">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div class="navigation">
             <a class="nav nav-next" href="https://ksu-cs-textbooks.github.io/cis300/io/" title="Input/Output (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a>
          </div>
          <div class="navigation">
             <span class="nav nav-prev"><i class="fa fa-chevron-left fa-fw"></i></span>
          </div>
          <div id="top-print-link">
            <a class="print-link" title='Print whole chapter (CTRL+ALT+p)' href="https://ksu-cs-textbooks.github.io/cis300/index.print.html">
              <i class="fas fa-print fa-fw"></i>
            </a>
          </div>
          <div id="top-github-link">
            <a class="github-link" title='Edit (CTRL+ALT+e)' href="https://gitlab.cs.ksu.edu/-/ide/project/cis300/cis300-book/edit/master/-/content//_index.md" target="blank">
              <i class="fas fa-pen fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" title='Menu (CTRL+ALT+m)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <meta itemprop="itemListOrder" content="Descending" />
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="1" /><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis300/" aria-disabled="true"><span itemprop="name">Data Structures in C#</span></a></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable home" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="home deprecated">

<h1 id="data-structures-in-c">Data Structures in C#</h1>
<p>

<a href="https://ksu-cs-textbooks.github.io/cis300/~rhowell/">Rod Howell</a><br>
Dept. of Computer Science<br>
Kansas State University<br>
Manhattan, KS 66506<br>
USA</p>
<p><strong>Email:</strong> 

<a href="mailto:rhowell@ksu.edu">rhowell@ksu.edu</a></p>
<p>This text is supplemental material for CIS 300 at Kansas State University. Its purpose is to provide a written summary of the material covered, with additional explanation and code examples beyond what are presented in class. A background of programming in Java is assumed, and an appendix summarizing some of the syntax of C# is provided. Because CIS 300 is a lab class, no attempt is made here to provide examples for all of the topics covered; instead, students are expected to provide many of their own examples through the lab exercises (in most cases, solutions to these exercises will be provided to enrolled students following the lab).</p>
<p>We assume the use of 

<a href="https://visualstudio.microsoft.com/" target="_blank" rel="noopener">Visual StudioÂ® Community 2022</a>. All examples, as well as all assignments in CIS 300, use 

<a href="https://learn.microsoft.com/en-us/dotnet/api/?view=net-6.0" target="_blank" rel="noopener">.NET 6</a> and version 10 of the C# language. All graphical applications use Windows Forms (

<a href="https://learn.microsoft.com/en-us/dotnet/api/?view=windowsdesktop-6.0" target="_blank" rel="noopener">Windows Desktop 6</a>).</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>This text is currently being updated. Some sections still use .NET Framework 4.7.2 and version 7.3 of the C# language.</p>
    </div>
</div>
<p>Please send to 

<a href="mailto:rhowell@ksu.edu">Rod
Howell</a> any corrections, including
typographical errors, missing images, and broken links.</p>

            <footer class="footline">
            </footer>
          </article>

              <section>
    
    
    
    
    
    
          <article class="default">
<div hidden><h1>Input/Output</h1></div>
<h2 id="inputoutput">Input/Output</h2>
<p>Input and output are central concepts to computing - in order to be able
to accomplish a computational task, a program must typically process
some input and produce some output. Input and output may be presented in
a variety of ways. For example, many programs communicate with users
through a graphical user interface, or GUI. In the simplest case, the
user performs some action, such as clicking the mouse on a button, thus
signaling an <em>event</em>. A method in the program then responds to that
event by reading information that the user has typed into various
controls on the GUI, and processes that information. It may then provide
output to the user by writing results to various controls on the GUI.</p>
<p>Such a simple presentation of input/output (or I/O) is far too limiting,
however. For example, other mechanisms such as <em>dialogs</em> - secondary
windows designed for exchanging specific information - may be used to
avoid cluttering the main window. In other cases, the amount of data
that needs to be exchanged is too large to be transferred through a GUI.
In such cases, the program may need to read and/or write a file. This
chapter addresses these more advanced I/O mechanisms.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Dialogs</h1></div>
<h2 id="dialogs">Dialogs</h2>
<p>Dialogs are windows displayed by a program for the purpose of exchanging specific information with the user. There are two kinds of dialogs:</p>
<ul>
<li><em>Modal</em> dialogs block all other interaction with the program until the dialog is closed.</li>
<li><em>Non-modal</em> dialogs allow the user to interact with the program in other ways while the dialog is open.</li>
</ul>
<p>We will examine three classes provided by MicrosoftÂ® .NET 6, each of which implements a modal dialog. .NET provides various other classes, such as 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.folderbrowserdialog?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>FolderBrowserDialog</strong></a>, 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.fontdialog?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>FontDialog</strong></a>, and 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.colordialog?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>ColorDialog</strong></a>, that also implement specific kinds of dialogs. We conclude by discussing how custom dialogs may be built using Visual StudioÂ®.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>MessageBoxes</h1></div>
<h2 id="message-boxes"><strong>Message Box</strong>es</h2>
<p>The 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>MessageBox</strong></a> class (found in the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>System.Windows.Forms</strong></a> namespace) provides a simple mechanism for displaying a message and obtaining one of a few simple responses from the user. The most common usage of a <strong>MessageBox</strong> is to call one of its various 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox.show?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>Show</strong></a> methods, each of which is 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/static-this"><strong>static</strong></a>. The simplest 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox.show?view=windowsdesktop-6.0#system-windows-forms-messagebox-show%28system-string%29" target="_blank" rel="noopener"><strong>Show</strong></a> method takes a <strong>string</strong> as its only parameter. The method then displays this <strong>string</strong> in a modal dialog containing an &ldquo;OK&rdquo; button. Thus, for example,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>MessageBox.Show(<span style="color:#e6db74">&#34;Hello world!&#34;</span>);
</span></span></code></pre></div><p>will display the following dialog:</p>
<img src="simple-message-box.png" alt="A MessageBox." style="zoom:67%;" />
<p>Because the dialog is modal, it will block all other interaction with the program until the user closes it by clicking either the &ldquo;OK&rdquo; button or the &ldquo;X&rdquo; in the upper right. Furthermore, the <strong>Show</strong> method will not return until that time.</p>
<p>Other <strong>Show</strong> methods allow greater customization of a <strong>MessageBox</strong>. For example, one 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox.show?view=windowsdesktop-6.0#system-windows-forms-messagebox-show%28system-string-system-string%29" target="_blank" rel="noopener"><strong>Show</strong></a> method takes as an additional parameter a second <strong>string</strong> giving a caption for the <strong>MessageBox</strong>. Thus, the statement,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>MessageBox.Show(<span style="color:#e6db74">&#34;Hello world!&#34;</span>, <span style="color:#e6db74">&#34;Hello&#34;</span>);
</span></span></code></pre></div><p>will display the following modal dialog:</p>
<img src="message-box-with-caption.png" alt="A MessageBox with a caption." style="zoom:67%;" />
<p>Other <strong>Show</strong> methods allow the buttons to be customized. For example, one 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox.show?view=windowsdesktop-6.0#system-windows-forms-messagebox-show%28system-string-system-string-system-windows-forms-messageboxbuttons%29" target="_blank" rel="noopener"><strong>Show</strong></a> method takes, as its third parameter, an element from the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messageboxbuttons?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>MessageBoxButtons</strong></a> 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerations">enumeration</a>. This 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerations">enumeration</a> contains the following values:</p>
<ul>
<li><strong>MessageBoxButtons.AbortRetryIgnore</strong>: Buttons labeled &ldquo;Abort&rdquo;, &ldquo;Retry&rdquo;, and &ldquo;Ignore&rdquo; are shown.</li>
<li><strong>MessageBoxButtons.CancelTryContinue</strong>: Buttons labeled &ldquo;Cancel&rdquo;, &ldquo;Try Again&rdquo;, and &ldquo;Continue&rdquo; are shown.</li>
<li><strong>MessageBoxButtons.OK</strong>: A single button labeled &ldquo;OK&rdquo; is shown.</li>
<li><strong>MessageBoxButtons.OKCancel</strong>: Buttons labeled &ldquo;OK&rdquo; and &ldquo;Cancel&rdquo; are shown.</li>
<li><strong>MessageBoxButtons.RetryCancel</strong>: Buttons labeled &ldquo;Retry&rdquo; and &ldquo;Cancel&rdquo; are shown.</li>
<li><strong>MessageBoxButtons.YesNo</strong>: Buttons labeled &ldquo;Yes&rdquo; and &ldquo;No&rdquo; are shown.</li>
<li><strong>MessageBoxButtons.YesNoCancel</strong>: Buttons labeled &ldquo;Yes&rdquo;, &ldquo;No&rdquo;, and &ldquo;Cancel&rdquo; are shown.</li>
</ul>
<p>The values above containing the word, &ldquo;Cancel&rdquo;, cause the &ldquo;X&rdquo; in the upper-right of the dialog to be enabled. Clicking this button in these cases is equivalent to clicking the &ldquo;Cancel&rdquo; button. The value, <strong>MessageBoxButtons.OK</strong>, also enables this &ldquo;X&rdquo; button, but in this case, clicking this button is equivalent to clicking the &ldquo;OK&rdquo; button. Using a <strong>Show</strong> without a <strong>MessageBoxButtons</strong> parameter also gives this behavior. For all other <strong>MessageBoxButtons</strong> values, this &ldquo;X&rdquo; button is disabled.</p>
<p>In order to provide appropriate functionality to each of the buttons, each <strong>Show</strong> method returns a value of type 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.dialogresult?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>DialogResult</strong></a>. This type is another enumeration containing the following values to indicate which button the user clicked:</p>
<ul>
<li><strong>DialogResult.Abort</strong></li>
<li><strong>DialogResult.Cancel</strong></li>
<li><strong>DialogResult.Continue</strong></li>
<li><strong>DialogResult.Ignore</strong></li>
<li><strong>DialogResult.No</strong></li>
<li><strong>DialogResult.None</strong> (this value won&rsquo;t be returned by any of the <strong>Show</strong> methods)</li>
<li><strong>DialogResult.OK</strong></li>
<li><strong>DialogResult.Retry</strong></li>
<li><strong>DialogResult.TryAgain</strong></li>
<li><strong>DialogResult.Yes</strong></li>
</ul>
<p>Suppose, for example, that we are writing a document formatter or some other application in which the user builds a document. If the user attempts to exit the program when the document is unsaved, we would like to give an opportunity to save the document. We can accomplish this with the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>DialogResult result = MessageBox.Show(<span style="color:#e6db74">&#34;The file is not saved. Really quit?&#34;</span>, <span style="color:#e6db74">&#34;Confirm Quit&#34;</span>, MessageBoxButtons.YesNo);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (result == DialogResult.Yes)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Application.Exit();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The first statement displays the following dialog:</p>
<img src="message-box-with-buttons.png" alt="A MessageBox with Yes and No buttons" style="zoom:67%;" />
<p>Again, because the dialog is modal, the <strong>Show</strong> method does not return until the user closes the dialog by clicking one of the two buttons (the &ldquo;X&rdquo; in the upper right is disabled). When the user does this, the dialog closes, and the <strong>Show</strong> method returns either <strong>DialogResult.Yes</strong> or <strong>DialogResult.No</strong> to indicate which button the user clicked. If the user clicked the &ldquo;Yes&rdquo; button, then the <strong>if</strong>-statement will cause the program to terminate. Otherwise, the program will continue with whatever code follows (probably nothing more, as the program will need to await further user action).</p>
<p>We can also decorate a <strong>MessageBox</strong> with an icon that indicates what type of message it is. This requires another 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox.show?view=windowsdesktop-6.0#system-windows-forms-messagebox-show%28system-string-system-string-system-windows-forms-messageboxbuttons-system-windows-forms-messageboxicon%29" target="_blank" rel="noopener"><strong>Show</strong></a> method having a fourth parameter of type 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messageboxicon?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>MessageBoxIcon</strong></a>. <strong>MessageBoxIcon</strong> is another enumeration. Some of its values are:</p>
<ul>
<li><strong>MessageBoxIcon.Error</strong>:   <img src="messagebox-error.png" alt="A picture of an error icon should appear here."></li>
<li><strong>MessageBoxIcon.Information</strong>:   <img src="messagebox-information.png" alt="A picture of an information icon should appear here."></li>
<li><strong>MessageBoxIcon.None</strong> (no icon)</li>
<li><strong>MessageBoxIcon.Warning</strong>: <img src="messagebox-exclamation.png" alt="A picture of a warning icon should appear here."></li>
</ul>
<p>This enumeration contains a few other values as well, but they currently are simply duplicate values for the above icons or values that Microsoft recommends against using. To add a warning icon to the above example, we could replace the first statement with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>DialogResult result = MessageBox.Show(<span style="color:#e6db74">&#34;The file is not saved. Really quit?&#34;</span>, <span style="color:#e6db74">&#34;Confirm Quit&#34;</span>, MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
</span></span></code></pre></div><p>This will display the following dialog:</p>
<img src="message-box-with-icon.png" alt="A MessageBox with an icon." style="zoom:67%;" />
<p>Notice that in the above example, the &ldquo;Yes&rdquo; button has the focus; i.e., pressing &ldquo;Enter&rdquo; has the same effect as clicking this button. It is usually desirable to have the safest response as the default - in this case, the &ldquo;No&rdquo; button. To achieve this, a 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox.show?view=windowsdesktop-6.0#system-windows-forms-messagebox-show%28system-string-system-string-system-windows-forms-messageboxbuttons-system-windows-forms-messageboxicon-system-windows-forms-messageboxdefaultbutton%29" target="_blank" rel="noopener"><strong>Show</strong></a> method having a fifth parameter, of type 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messageboxdefaultbutton?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>MessageBoxDefaultButton</strong></a>, is required. <strong>MessageBoxDefaultButton</strong> is another enumeration having the following values to select an appropriate button to be the default:</p>
<ul>
<li><strong>MessageBoxDefaultButton.Button1</strong></li>
<li><strong>MessageBoxDefaultButton.Button2</strong></li>
<li><strong>MessageBoxDefaultButton.Button3</strong></li>
<li><strong>MessageBoxDefaultButton.Button4</strong></li>
</ul>
<p>Thus, the following statement:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>DialogResult result = MessageBox.Show(<span style="color:#e6db74">&#34;The file is not saved. Really quit?&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Confirm Quit&#34;</span>, MessageBoxButtons.YesNo, MessageBoxIcon.Warning,
</span></span><span style="display:flex;"><span>    MessageBoxDefaultButton.Button2);
</span></span></code></pre></div><p>produces a dialog similar to the one above, but having the &ldquo;No&rdquo; button as its default.</p>
<p>There are other <strong>Show</strong> methods that allow additional fine-tuning; however, the ones described here cover most of the functionality. For details on other <strong>Show</strong> methods, see the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox?view=windowsdesktop-6.0" target="_blank" rel="noopener">documentation for the <strong>MessageBox</strong> class</a>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>File Dialogs</h1></div>
<h2 id="file-dialogs">File Dialogs</h2>
<p>The 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>System.Windows.Forms</strong></a> namespace contains two other classes that implement modal dialogs for obtaining file names from the user. These classes are 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.openfiledialog?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>OpenFileDialog</strong></a>, which is designed to obtain the name of a file to read, and 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.savefiledialog?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>SaveFileDialog</strong></a>, which is designed to obtain the name of a file to write. Because we often need to obtain the name of a file prior to doing file I/O, it is appropriate to consider these classes now.</p>
<p>Although these dialogs are visually separate from the window from which they are opened, it is possible (and usually desirable) to add instances of these classes to a form from 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/design-window">the Design window</a>. Both can be found in the &ldquo;Dialogs&rdquo; section of the Toolbox. They can be added to the form simply by double-clicking on their names. They will not appear on the form itself, but in a separate area of the Design window. Their properties can then be modified in the same way as any other control. We will discuss some of these properties a bit later in what follows.</p>
<p>Each of these classes has a method called <strong>ShowDialog</strong> that takes no parameters. For example, if we call the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.commondialog.showdialog?view=windowsdesktop-6.0#system-windows-forms-commondialog-showdialog" target="_blank" rel="noopener"><strong>ShowDialog</strong></a> method of an <strong>OpenFileDialog</strong>, a dialog resembling the following will be opened:</p>
<img src="open-file-dialog.png" alt="An OpenFileDialog." style="zoom:67%;" />
<p>Similarly, calling the <strong>ShowDialog</strong> method of a <strong>SaveFileDialog</strong> opens a dialog resembling the following:</p>
<img src="save-file-dialog.png" alt="A SaveFileDialog." style="zoom:67%;" />
<p>Because these dialogs are modal, the method call will not return until the user closes the dialog. It will then return a 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.dialogresult?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>DialogResult</strong></a> indicating how the user closed the form - either <strong>DialogResult.OK</strong> or <strong>DialogResult.Cancel</strong> (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/message-boxes">the previous section</a> for more information on the <strong>DialogResult</strong> type). Therefore, if <code>uxFileDialog</code> is a variable referring to a file dialog, we typically use the following code template to display it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (uxFileDialog.ShowDialog() == DialogResult.OK)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Process the file</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Thus, if the user selects a file, we process it; otherwise, we do nothing. In some cases, we might include an <strong>else</strong> containing code that needs to be executed if the user closes the dialog without selecting a file.</p>
<p>Processing a file will be discussed in the three sections that follow. However, one thing we will certainly want to do prior to processing the file is to obtain the file name that the user selected (after all, this is the reason we display a file dialog). We can obtain this file name via the dialog&rsquo;s 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.filedialog.filename?view=windowsdesktop-6.0#system-windows-forms-filedialog-filename" target="_blank" rel="noopener"><strong>FileName</strong></a> 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">property</a>; for example,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> fileName = uxFileDialog.FileName;
</span></span></code></pre></div><p>Note that this and other properties are accessible for initialization purposes through a file dialog&rsquo;s Properties window in the Designer. This is useful for an <strong>OpenFileDialog</strong>&rsquo;s <strong>FileName</strong> property, as the default supplied by Visual StudioÂ® is rather odd. Other properties that we might want to initialize here (in addition to <strong>(Name)</strong>, the name of the variable referring to the dialog) include:</p>
<ul>
<li>
<p>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.filedialog.title?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>Title</strong></a>, the title of the dialog (by default, &ldquo;Open&rdquo; for an <strong>OpenFileDialog</strong> or &ldquo;Save As&rdquo; for a <strong>SaveFileDialog</strong>).</p>
</li>
<li>
<p>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.filedialog.filter?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>Filter</strong></a>, a <em>filter string</em>, which controls what file types will be displayed. An example of a filter string is: <code>C# files|*.cs|All files|*.*</code>. A filter string consists of an even number of components separated by vertical bars (&quot;|&quot;). Thus, the above filter string consists of four components. These components are grouped into pairs. The first component of each pair gives the string that will be displayed in the dialog to describe what files are displayed. The second component of each pair describes a pattern of file names to be displayed when the first component of that pair is shown. Use an asterisk (&quot;*&quot;) in a pattern to denote any sequence of characters. The &ldquo;.&rdquo; in a pattern ending in &ldquo;.*&rdquo; does not need to be matched - a file without an extension will be listed if it matches the pattern to the left of the &ldquo;.&rdquo;. Multiple patterns, separated by semicolons (&quot;;&quot;), may be listed in one component. Thus, the above filter string describes two filters that the user may choose from. The first filter is labeled, &ldquo;C# files&rdquo;, and lists all files ending in &ldquo;.cs&rdquo;. The second filter is labeled &ldquo;All files&rdquo;, and lists all files.</p>
</li>
<li>
<p>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.filedialog.filterindex?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>FilterIndex</strong></a> indicates which pair in the filter string is currently being used. Note that the first pair has an index of 1, not 0.</p>
</li>
<li>
<p>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.filedialog.addextension?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>AddExtension</strong></a> and 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.filedialog.defaultext?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>DefaultExt</strong></a> control the dialog&rsquo;s behavior when the user types in a file name without an extension. When this happens, if a filter with a unique extension is chosen, that extension will be appended, regardless of the values of these two properties. Otherwise, if <strong>AddExtension</strong> is <strong>True</strong>, the value of <strong>DefaultExt</strong> will be appended, following a &ldquo;.&rdquo;.</p>
</li>
</ul>
<p>Other properties allow further customization of file dialogs. For more
details, see the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.openfiledialog?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>OpenFileDialog</strong></a> and 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.savefiledialog?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>SaveFileDialog</strong></a> documentation.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Custom Dialogs</h1></div>
<h2 id="custom-dialogs">Custom Dialogs</h2>
<p>While the dialogs provided by the .NET Framework are useful in a variety of applications, there are times when we need to be able to design our own special-purpose dialog to obtain specific information from the user. This section outlines how Visual StudioÂ® can be used to build such a dialog.</p>
<p>Let&rsquo;s begin by considering a simple example. Suppose we are building an application that needs a dialog to obtain from the user the following pieces of information:</p>
<ul>
<li>a name;</li>
<li>a phone number; and</li>
<li>a number of siblings.</li>
</ul>
<p>In order to keep the example simple, the program will simply display this information in its main window. Thus, the main window looks like this:</p>
<img src="custom-dialog-main.jpg" alt="A GUI displaying a person's information." style="zoom:67%;" />
<p>Clicking the &ldquo;Get New Information&rdquo; button will open our custom dialog, which will look like this:</p>
<img src="custom-dialog.jpg" alt="A custom dialog." style="zoom:67%;" />
<p>After the user enters the information, clicking &ldquo;OK&rdquo; will cause the information entered to be displayed in the main window. If the user clicks &ldquo;Cancel&rdquo;, the main window will be unchanged.</p>
<p>After building the main form in Visual Studio&rsquo;s Design Window, we can build the dialog by creating another form. To do this, in the Solution Explorer, right-click on the project name and select &ldquo;Add-&gt;Form (Windows Forms)&hellip;&rdquo;. This will open a dialog for adding a new item, where the type of item is pre-selected to be a Windows Form. You will need to supply a name for the form. This name will serve as both a file name for a source file and the name of a class defined within this file. For example, we could choose the name, &ldquo;InformationDialog.cs&rdquo;, and the class will be named <strong>InformationDialog</strong>. Clicking the &ldquo;Add&rdquo; button will then open a new Design Window containing a form.</p>
<p>We can then use the Design Window to build this form as we would build any other form. In addition, the <strong>Button</strong> class has a 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.button.dialogresult?view=windowsdesktop-6.0#system-windows-forms-button-dialogresult" target="_blank" rel="noopener"><strong>DialogResult</strong></a> property that governs certain behavior when buttons are used within a dialog. This property is of type 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.dialogresult?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>DialogResult</strong></a>. Setting it to a value other than <strong>None</strong> will cause the button to do the following when clicked, provided the form is displayed as a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs">modal dialog</a>:</p>
<ul>
<li>Close the form.</li>
<li>Return the value of the <strong>DialogResult</strong> property.</li>
</ul>
<p>Thus, we should set the &ldquo;OK&rdquo; button&rsquo;s <strong>DialogResult</strong> property to <strong>OK</strong> and the &ldquo;Cancel&rdquo; button&rsquo;s <strong>DialogResult</strong> property to <strong>Cancel</strong>. Once we have done this, there is no need to define any event handlers for these buttons.</p>
<p>Furthermore, the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.form?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>Form</strong></a> itself has two properties that can be set to provide shortcuts for these buttons. The 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.form.acceptbutton?view=windowsdesktop-6.0#system-windows-forms-form-acceptbutton" target="_blank" rel="noopener"><strong>AcceptButton</strong></a> property, of type <strong>IButtonControl</strong> (a super-type of <strong>Button</strong>), can be used to cause the &ldquo;Enter&rdquo; key to activate a button on the form, as if that button had been clicked. Thus, we could set this property to the &ldquo;OK&rdquo; button. Similarly, the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.form.cancelbutton?view=windowsdesktop-6.0#system-windows-forms-form-cancelbutton" target="_blank" rel="noopener"><strong>CancelButton</strong></a> property (also of type <strong>IButtonControl</strong>) can be used to cause the &ldquo;Esc&rdquo; key to activate a button on the form. We could therefore set this property to the &ldquo;Cancel&rdquo; button.</p>
<p>While we don&rsquo;t need any event handlers for this dialog, we still need to provide code to allow the class for the main window to access the values provided by the user. This can be accomplished with three <strong>public</strong> 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">properties</a>, one for each of the three pieces of information the user can provide:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the name.  (There is already a Name property inherited from</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// the Form class, so we will use FullName.)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName =&gt; uxName.Text;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the phone number.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> PhoneNumber =&gt; uxPhoneNumber.Text;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the number of siblings.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Siblings =&gt; (<span style="color:#66d9ef">int</span>)uxSiblings.Value;
</span></span></code></pre></div><p>In order for the main window to be able to display this dialog, it needs to construct an instance of it. We can add to its class definition a <strong>private</strong> field initialized to such an instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The dialog for obtaining information from the user.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> InformationDialog _information = <span style="color:#66d9ef">new</span>();
</span></span></code></pre></div><p>Finally, we need an event handler for the &ldquo;Get New Information&rdquo; button. This event handler needs to display the <strong>InformationDialog</strong> as a modal dialog, and if the user closes it with the &ldquo;OK&rdquo; button, to copy the information provided by the user to the main window. A <strong>Form</strong> provides two methods for displaying it as a dialog:</p>
<ul>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.control.show?view=windowsdesktop-6.0#system-windows-forms-control-show" target="_blank" rel="noopener"><strong>Show</strong></a> displays the <strong>Form</strong> as a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs">non-modal dialog</a>. It takes no parameters and returns nothing.</li>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.form.showdialog?view=windowsdesktop-6.0#system-windows-forms-form-showdialog" target="_blank" rel="noopener"><strong>ShowDialog</strong></a> displays the <strong>Form</strong> as a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs">modal dialog</a>. It takes no parameters and returns a <strong>DialogResult</strong> indicating how the user closed the dialog.</li>
</ul>
<p>Thus, the event handler can display the dialog and retrieve its information much like it would do with a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/file-dialogs">file dialog</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Handles a Click event on the &#34;Get New Information&#34; button.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object signaling the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;Information on the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> NewClick(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (_information.ShowDialog() == DialogResult.OK)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        uxName.Text = _information.FullName;
</span></span><span style="display:flex;"><span>        uxPhoneNumber.Text = _information.PhoneNumber;
</span></span><span style="display:flex;"><span>        uxSiblings.Text = _information.Siblings.ToString();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>

<a href="https://classroom.github.com/a/1a_tmRBS" target="_blank" rel="noopener">This git repository</a> contains the complete program described above.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Simple Text File I/O</h1></div>
<h2 id="simple-text-file-io">Simple Text File I/O</h2>
<p>Many of the I/O tools provided by .NET are found in the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>System.IO</strong></a>
namespace. One
class that provides several general-purpose


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/static-this"><strong>static</strong></a> methods
related to file I/O is the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file?view=net-6.0" target="_blank" rel="noopener"><strong>File</strong></a>
class. Two of the <strong>static</strong> methods provided by this class are:</p>
<ul>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.readalltext?view=net-6.0#system-io-file-readalltext%28system-string%29" target="_blank" rel="noopener"><strong>File.ReadAllText</strong></a>
and</li>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.writealltext?view=net-6.0#system-io-file-writealltext%28system-string-system-string%29" target="_blank" rel="noopener"><strong>File.WriteAllText</strong></a></li>
</ul>
<p>The <strong>File.ReadAllText</strong> method takes a <strong>string</strong> as its only
parameter. This <strong>string</strong> should give the path to a text file. It will
then attempt to read that entire file and return its contents as a
<strong>string</strong>. For example, if <code>fileName</code> refers to a <strong>string</strong> containing
the path to a text file, then</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> contents = File.ReadAllText(fileName);
</span></span></code></pre></div><p>will read that entire file and place its contents into the <strong>string</strong> to
which <code>contents</code> refers. We can then process the <strong>string</strong> <code>contents</code>
however we need to.</p>
<p>The <strong>File.WriteAllText</strong> method takes two parameters:</p>
<ul>
<li>a <strong>string</strong> giving the path to a file; and</li>
<li>a <strong>string?</strong> (i.e., a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value#nullable-types">nullable</a> <strong>string</strong> - a <strong>string</strong> that may be <strong>null</strong>) giving the text to be written.</li>
</ul>
<p>It will then attempt to write the given text as the entire contents of
the given file. If this text is <strong>null</strong>, an empty file will be written. Thus, if <code>fileName</code> refers to a <strong>string</strong> containing
the path to a file and <code>contents</code> refers to some <strong>string</strong>, then</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>File.WriteAllText(fileName, contents);
</span></span></code></pre></div><p>will write to that file the <strong>string</strong> to which <code>contents</code> refers.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>When calling either of these methods, there are a number things that can
go wrong. For example, the file might be accessed through a network, and
access to the network might be lost before the method can complete. When
such an issue prevents the successful completion of one of these
methods, an <em>exception</em> is thrown. In 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/exceptions">the next
section</a>, we will discuss
how to handle such exceptions.</p>
    </div>
</div>
<p>While these methods are quite easy to use, they are not always the best
ways of doing text file I/O. One drawback is that files can be quite
large - perhaps too large to fit in memory or within a single
<strong>string</strong>. Even when it is possible to read the entire file into a
single <strong>string</strong>, it may use enough memory that performance suffers. In
the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/advanced-text-file">&ldquo;Advanced Text File
I/O&rdquo;</a>, we will
present other techniques for reading and writing text files.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Exception Handling</h1></div>
<h2 id="exception-handling">Exception Handling</h2>
<p>As was mentioned in 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/simple-text-file">the previous
section</a>, various
problems can occur when doing file I/O. Some of these problems include:</p>
<ul>
<li>Trying to write to a read-only file.</li>
<li>Trying to access a file that is locked by another process.</li>
<li>Accessing an external drive that becomes disconnected.</li>
</ul>
<p>Note that some of these issues are beyond the programmer&rsquo;s control,
while others may be tedious for the programmer to check. When one of these problems
prevents an I/O operation from completing successfully, an exception is
thrown. This section discusses how to handle such exceptions gracefully,
without terminating the program.</p>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/file-dialogs">File dialogs</a>
can be quite helpful in avoiding some of these exceptions, as they
can reject improper selections by the user.</p>
    </div>
</div>
<p>The mechanism used to handle exceptions is the <strong>try</strong>-<strong>catch</strong>
construct. In its simplest form, it looks like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Block of code that might throw an exception</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">catch</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Code to handle the exception</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If we are concerned about exceptions thrown while doing I/O, we would
include the I/O and anything dependent on it within the <strong>try</strong>-block.
If at any point within this block an exception is thrown, control
immediately jumps to the <strong>catch</strong>-block. Here, we would place code to
handle the exception - for example, displaying a message to the user.</p>
<p>Suppose, for example, that we want to count the number of upper-case
letters in a file whose name is in the <strong>string</strong> referenced by
<code>fileName</code>. We could use the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> contents = File.ReadAllText(fileName);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> count = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">char</span> c <span style="color:#66d9ef">in</span> contents)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">char</span>.IsUpper(c))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            count++;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    MessageBox.Show(<span style="color:#e6db74">&#34;The file contains &#34;</span> + count + <span style="color:#e6db74">&#34; upper-case letters.&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">catch</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    MessageBox.Show(<span style="color:#e6db74">&#34;An exception occurred.&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>See the section, &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/foreach">The <strong>foreach</strong>
Statement</a>&rdquo; for an
explanation of <strong>foreach</strong> loops. The


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.char.isupper?view=net-6.0#system-char-isupper%28system-char%29" target="_blank" rel="noopener"><strong>char.IsUpper</strong></a>
method returns a <strong>bool</strong> indicating whether the given <strong>char</strong> is an
upper-case letter in some alphabet.</p>
    </div>
</div>
<p>We should always include within the <strong>try</strong>-block all of the code that
depends on what we want to read. Consider what would happen, for
example, if we tried to move the statement,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>MessageBox.Show(<span style="color:#e6db74">&#34;The file contains &#34;</span> + count + <span style="color:#e6db74">&#34; upper-case letters.&#34;</span>);
</span></span></code></pre></div><p>outside the <strong>try</strong>-<strong>catch</strong>. First, we would have a syntax error
because the variable <code>count</code> is declared within the <strong>try</strong>-block, and
hence cannot be used outside of it. We could fix this error by declaring
and initializing <code>count</code> prior to the <strong>try</strong> statement. The resulting
code would compile and run, but consider what happens if an exception is
thrown during the reading of the file. Control immediately jumps to the
<strong>catch</strong>-block, where the message, &ldquo;An exception occurred.&rdquo;, is
displayed. After that, assuming we have made these changes to the above
code, control continues on past the <strong>catch</strong>-block to the code to
display the results. Because the file was not successfully read, it
really doesn&rsquo;t make any sense to do this. The code given above, however,
displays a result only if the result is successfully computed;
otherwise, the exception message is displayed.</p>
<p>In the above example, the message, &ldquo;An exception occurred.&rdquo;, isn&rsquo;t very
helpful to the user. It gives no indication of what the problem is. In
order to be able to provide more information to the user, we need more
information regarding the nature of the exception. The way we do this is
to use some additional code on the <strong>catch</strong> statement:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">catch</span> (Exception ex)
</span></span></code></pre></div><p>The word <strong>Exception</strong> above is a type. Every exception in C# is a
subtype of the <strong>Exception</strong> class. In this form of the <strong>catch</strong>
statement, we can include any subtype of <strong>Exception</strong>, including
<strong>Exception</strong> itself, as the first word within the parentheses. The
second word is a new variable name. One effect of this parenthesized
part is to declare this variable to be of the given type; i.e., <code>ex</code> is
of type <strong>Exception</strong>, and may be used within the <strong>catch</strong> block.</p>
<p>This form of the <strong>catch</strong> statement will catch any exception that can
be treated as the given type. If we use the type, <strong>Exception</strong>, as
above, the <strong>catch</strong>-block will still catch any exception. In addition,
the variable defined within the parentheses will refer to that
exception. Thus, the parenthesized part of this statement behaves much
like a parameter list, giving us access to the exception that was
thrown. Having the exception available to examine, we can now give more
meaningful feedback to the user. One rather crude way of doing this is
to use the exception&rsquo;s


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.tostring?view=net-6.0#system-object-tostring" target="_blank" rel="noopener"><strong>ToString</strong></a>
method to convert it to a <strong>string</strong>
representation, which can then be displayed to the user; for example,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">catch</span> (Exception ex)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    MessageBox.Show(ex.ToString());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Replacing the <strong>catch</strong>-block in the earler example with this
<strong>catch</strong>-block might result in the following message:</p>
<img src="exception-in-messagebox.png" alt="A MessageBox displaying an exception." style="zoom:67%;" />
<p>While this message is not something we would want to show to an end
user, it does provide helpful debugging information, such as the
exception thrown and the line that threw the exception.</p>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>Every object in C# has a


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.tostring?view=net-6.0#system-object-tostring" target="_blank" rel="noopener"><strong>ToString</strong></a>
method. Hence, we can convert an instance of any type to <strong>string</strong> by
using its <strong>ToString</strong> method. This method will always return a
<strong>string</strong>, but depending on the original type, this <strong>string</strong> may or
may not be useful. For example, because there is no particularly meaningful way to
convert a <strong>Form</strong> to a <strong>string</strong>, its <strong>ToString</strong> method is not
especially useful.</p>
    </div>
</div>
<p>A single <strong>try</strong>-block can have more than one <strong>catch</strong>-block. In such a
case, whenever an exception occurs within the <strong>try</strong>-block, control is
transferred to the first <strong>catch</strong>-block that can catch that particular
exception. For example, we can set up the following construct:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Code that may throw an exception</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">catch</span> (DirectoryNotFoundException ex)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Code to handle a DirectoryNotFoundException</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">catch</span> (FileNotFoundException ex)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Code to handle a FileNotFoundException</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">catch</span> (Exception ex)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Code to handle any other exception</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If we don&rsquo;t need access to the exception itself in order to handle it,
but only need to know what kind of exception it is, we can leave off the
variable name in the <strong>catch</strong> statement. For example, if we are trying
to read from a file whose name is referenced by the <strong>string</strong>
<code>fileName</code>, we might handle a <strong>FileNotFoundException</strong> as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">catch</span> (FileNotFoundException)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    MessageBox.Show(<span style="color:#e6db74">&#34;Could not find the file &#34;</span> + fileName);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Don&rsquo;t use exception handling (i.e., <code>try</code>-<code>catch</code>) to handle cases that are expected to occur under normal conditions. In such cases, use an <code>if</code>-statement instead. Not only is this better style, but it is also more efficient.</p>
    </div>
</div>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Advanced Text File I/O</h1></div>
<h2 id="advanced-text-file-io">Advanced Text File I/O</h2>
<p>Though the <strong>File.ReadAllText</strong> and <strong>File.WriteAllText</strong> methods
provide simple mechanisms for reading and writing text files, they are
not always the best choices. For one reason, files can be very large &mdash;
too large to fit into memory, or possibly even larger than the maximum
length of a <strong>string</strong> in C# (2,147,483,647 characters). Even when it
is possible to store the entire contents of a file as a <strong>string</strong>, it
may not be desirable, as the high memory usage may degrade the overall
performance of the system.</p>
<p>For the purpose of handling a sequence of input or output data in more
flexible ways, .NET provides <em>streams</em>. These streams are
classes that provide uniform access to a wide variety of sequences of
input or output data, such as files, network connections, other
processes, or even blocks of memory. The


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader?view=net-6.0" target="_blank" rel="noopener"><strong>StreamReader</strong></a>
and


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamwriter?view=net-6.0" target="_blank" rel="noopener"><strong>StreamWriter</strong></a>
classes (in the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io?view=net-6.0" target="_blank" rel="noopener"><strong>System.IO</strong></a>
namespace) provide read and write, respectively, access to text streams,
including text files.</p>
<p>Some of the more useful <strong>public</strong> members of the <strong>StreamReader</strong> class
are:</p>
<ul>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.-ctor?view=net-6.0#system-io-streamreader-ctor%28system-string%29" target="_blank" rel="noopener">constructor</a>
that takes a <strong>string</strong> giving a file name as its only parameter and
constructs a <strong>StreamReader</strong> to read from that file.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.read?view=net-6.0#system-io-streamreader-read" target="_blank" rel="noopener"><strong>Read</strong></a>
method that takes no parameters. It reads the next character from
the stream and returns it as an <strong>int</strong>. If it cannot read a
character because it is already at the end of the stream, it returns
-1 (it returns an <strong>int</strong> because -1 is outside the range of
<strong>char</strong> values).</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.readline?view=net-6.0#system-io-streamreader-readline" target="_blank" rel="noopener"><strong>ReadLine</strong></a>
method that takes no parameters. It reads the next line from the
stream and returns it as a <strong>string?</strong>. If it cannot read a line
because it is already at the end of the stream, it returns <strong>null</strong>.</li>
<li>An


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.endofstream?view=net-6.0#system-io-streamreader-endofstream" target="_blank" rel="noopener"><strong>EndOfStream</strong></a>
property that gets a <strong>bool</strong> indicating whether the end of the
stream has been reached.</li>
</ul>
<p>With these members, we can read a text file either a character at a time
or a line at a time until we reach the end of the file. The
<strong>StreamWriter</strong> class has similar <strong>public</strong> members:</p>
<ul>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamwriter.-ctor?view=net-6.0#system-io-streamwriter-ctor%28system-string%29" target="_blank" rel="noopener">constructor</a>
that takes a <strong>string</strong> giving a file name as its only parameter and
constructs a <strong>StreamWriter</strong> to write to this file. If the file
already exists, it is replaced by what is written by the
<strong>StreamWriter</strong>; otherwise, a new file is created.</li>
<li>A 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamwriter.write?view=net-6.0#system-io-streamwriter-write%28system-char%29" target="_blank" rel="noopener"><strong>Write</strong></a>
method that takes a <strong>char</strong> as its only parameter. It writes this
<strong>char</strong> to the end of the stream.</li>
<li>Another


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamwriter.write?view=net-6.0#system-io-streamwriter-write%28system-string%29" target="_blank" rel="noopener"><strong>Write</strong></a>
method that takes a <strong>string?</strong> as its only parameter. It writes this
<strong>string?</strong> to the end of the stream. If the given <strong>string?</strong> is <strong>null</strong>, nothing is written.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.textwriter.writeline?view=net-6.0#system-io-textwriter-writeline" target="_blank" rel="noopener"><strong>WriteLine</strong></a>
method that takes no parameters. It writes a line terminator to the
end of the stream (i.e., it ends the current line of text).</li>
<li>Another


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.textwriter.writeline?view=net-6.0#system-io-textwriter-writeline%28system-char%29" target="_blank" rel="noopener"><strong>WriteLine</strong></a>
method that takes a <strong>char</strong> as its only parameter. It writes this
<strong>char</strong> to the end of the stream, then terminates the current line
of text.</li>
<li>Yet another


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamwriter.writeline?view=net-6.0#system-io-streamwriter-writeline%28system-string%29" target="_blank" rel="noopener"><strong>WriteLine</strong></a>
method that takes a <strong>string?</strong> as its only parameter. It writes this
<strong>string?</strong> to the end of the stream, then terminates the current
line of text. If the <strong>string?</strong> is <strong>null</strong>, only the line terminator is written.</li>
</ul>
<p>Thus, with a <strong>StreamWriter</strong>, we can build a text file a character at a
time, a line at a time, or an arbitrary <strong>string</strong> at a time. In fact, a
number of other <strong>Write</strong> and <strong>WriteLine</strong> methods exist, providing the
ability to write various other types, such as <strong>int</strong> or <strong>double</strong>. In
each case, the given value is first converted to a <strong>string</strong>, then
written to the stream.</p>
<p>Streams are different from other classes, such as <strong>string</strong>s or arrays,
in that they are <em>unmanaged</em> resources. When a managed resource, such as
a <strong>string</strong> or an array, is no longer being used by the program, the
garbage collector will reclaim the space that it occupies so that it can
be allocated to new objects that may need to be constructed. However,
after a stream is constructed, it remains under the control of the
program until the program explicitly releases it. This has several
practical ramifications. For example, the underlying file remains
<em>locked</em>, restricting how other programs may use it. In fact, if an
output stream is not properly <em>closed</em> by the program, some of the data
written to it may not actually reach the underlying file. This is
because output streams are typically <em>buffered</em> for efficiency &mdash; when
bytes are written to the stream, they are first accumulated in an
internal array, then written as a single block when the array is full.
When the program is finished writing, it needs to make sure that this
array is <em>flushed</em> to the underlying file.</p>
<p>Both the <strong>StreamReader</strong> and <strong>StreamWriter</strong> classes have


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.idisposable.dispose?view=net-6.0#system-idisposable-dispose" target="_blank" rel="noopener"><strong>Dispose</strong></a>
methods to release them properly; however, because I/O typically
requires exception handling, it can be tricky to ensure that this method
is always called when the I/O is finished. Specifically, the
<strong>try-catch</strong> may be located in a method that does not have access to
the stream. In such a case, the <strong>catch</strong>-block cannot call the stream&rsquo;s
<strong>Dispose</strong> method.</p>
<p><span id="using"></span> To handle this difficulty, C# provides a
<strong>using</strong> statement. A <strong>using</strong> statement is different from a <strong>using</strong>
directive, such as</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.IO;
</span></span></code></pre></div><p>A <strong>using</strong> statement occurs within a method definition, not at the top
of a code file. Its recommended form is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> ( <span style="color:#75715e">/* declaration and initialization of disposable variable(s) */</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* Code that uses the disposable variables(s) */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Thus, if we want to read and process a text file whose name is given by
the <strong>string</strong> variable <code>fileName</code>, we could use the following code
structure:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> (StreamReader input = <span style="color:#66d9ef">new</span> StreamReader(fileName))
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* Code that reads and process the file accessed by the
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * StreamReader input */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This declares the variable <code>input</code> to be of type <strong>StreamReader</strong> and
initializes it to a new <strong>StreamReader</strong> to read the given file. This
variable is only visible with the braces; furthermore, it is read-only &mdash;
its value cannot be changed to refer to a different <strong>StreamReader</strong>.
The <strong>using</strong> statement then ensures that whenever control exits the
code within the braces, <code>input</code>&rsquo;s <strong>Dispose</strong> method is called.</p>
<p>More than one variable of the same type may be declared and initialized
within the parentheses of a <strong>using</strong> statement; for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> (StreamReader input1 = <span style="color:#66d9ef">new</span> StreamReader(fileName1),
</span></span><span style="display:flex;"><span>    input2 = <span style="color:#66d9ef">new</span> StreamReader(fileName2))
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* Code that reads from input1 and input2 */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The type of variable(s) declared must be a subtype of


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.idisposable?view=net-6.0" target="_blank" rel="noopener"><strong>IDisposable</strong></a>.
This ensures that the variables each have a <strong>Dispose</strong> method.</p>
<p>As a complete example of the use of a <strong>StreamReader</strong> and a
<strong>StreamWriter</strong>, together with a <strong>using</strong> statement for each, suppose
we want to write a method that takes as its parameters two <strong>string</strong>s
giving the name of an input file and the name of an output file. The
method is to reproduce the input file as the output file, but with each
line prefixed by a line number and a tab. We will start numbering lines
with 1. The following method accomplishes this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Copies the file at inFileName to outFileName with each line</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// prefixed by its line number followed by a tab.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;inFileName&#34;&gt;The path name of the input file.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;outFileName&#34;&gt;The path name of the output file.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> AddLineNumbers(<span style="color:#66d9ef">string</span> inFileName, <span style="color:#66d9ef">string</span> outFileName)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">using</span> (StreamReader input = <span style="color:#66d9ef">new</span> StreamReader(inFileName))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">using</span> (StreamWriter output = <span style="color:#66d9ef">new</span> StreamWriter(outFileName))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> count = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (!input.EndOfStream)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Because input is not at the end of the stream, its ReadLine</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// method won&#39;t return null.</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">string</span> line = input.ReadLine()!;
</span></span><span style="display:flex;"><span>                count++;
</span></span><span style="display:flex;"><span>                output.Write(count);
</span></span><span style="display:flex;"><span>                output.Write(<span style="color:#e6db74">&#39;\t&#39;</span>);   <span style="color:#75715e">// The tab character</span>
</span></span><span style="display:flex;"><span>                output.WriteLine(line);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As noted above, a <strong>StreamReader</strong>&rsquo;s <strong>ReadLine</strong> method has a return type of <strong>string?</strong> because it will return <strong>null</strong> if the end of the stream has already been reached. Furthermore, the compiler is unable to determine that the loop condition will prevent the call to <strong>ReadLine</strong> from returning <strong>null</strong>. Thus, in order to suppress the compiler warning when the returned <strong>string?</strong> is assigned to a <strong>string</strong>, we include a <code>!</code> following the call to <strong>ReadLine</strong>, and document the reason with a comment above this line.</p>
<p>We can call the above method within a <strong>try</strong>-block to handle any
exceptions that may be thrown during the I/O. The <strong>catch</strong>-block will
not have access to either <code>input</code> or <code>output</code>, but it doesn&rsquo;t need it.
If an exception is thrown during the I/O, the two <strong>using</strong> statements
will ensure that the <strong>Dispose</strong> methods of both the <strong>StreamReader</strong>
and the <strong>StreamWriter</strong> are called.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Other File I/O</h1></div>
<h2 id="other-file-io">Other File I/O</h2>
<p>Not all files are plain text files &mdash; often we need to read and/or write
binary data. .NET provides the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream?view=net-6.0" target="_blank" rel="noopener"><strong>FileStream</strong></a>
class for this purpose.</p>
<p>The <strong>FileStream</strong> class provides constructors for creating a
<strong>FileStream</strong> for reading, writing, or both. These constructors can be
used to specify how the file is to be opened or created, the type of
access to be allowed (i.e., reading/writing), and how the file is to be
locked. In most cases, however, a simpler way to construct an
appropriate <strong>FileStream</strong> is to use one of the following <strong>static</strong>
methods provided by the the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file?view=net-6.0" target="_blank" rel="noopener"><strong>File</strong></a>
class:</p>
<ul>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.openread?view=net-6.0#system-io-file-openread%28system-string%29" target="_blank" rel="noopener"><strong>File.OpenRead(string
fn)</strong></a>:
returns a <strong>FileStream</strong> for reading the file with the given path
name. A <strong>FileNotFoundException</strong> is thrown if the file does not
exist.</li>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.openwrite?view=net-6.0#system-io-file-openwrite%28system-string%29" target="_blank" rel="noopener"><strong>File.OpenWrite(string
fn)</strong></a>:
returns a <strong>FileStream</strong> for writing to the file with the given path
name. If the file exists, it will be replaced; otherwise, it will be
created.</li>
</ul>
<p>Two of the most commonly-used methods of a <strong>FileStream</strong> are


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.writebyte?view=net-6.0#system-io-filestream-writebyte%28system-byte%29" target="_blank" rel="noopener"><strong>ReadByte</strong></a>
and


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.writebyte?view=net-6.0#system-io-filestream-writebyte%28system-byte%29" target="_blank" rel="noopener"><strong>WriteByte</strong></a>.
The <strong>ReadByte</strong> method takes no parameters and returns an <strong>int</strong>. If
there is at least one byte available to read, the next one is read and
its value (a nonnegative integer less than 256) is returned; otherwise,
the value returned is -1 (this is the only way to detect when the end of
the stream has been reached). The <strong>WriteByte</strong> method takes a <strong>byte</strong>
as its only parameter and writes it to the file. It returns nothing.</p>
<p>Because a <strong>FileStream</strong> has no <strong>EndOfStream</strong> property, we must code a
loop to read to the end of the stream somewhat differently from what we
have seen before. We can take advantage of the fact that in C#, an
assignment statement can be used within an expression. When this is
done, the value of the assignment statement is the value that it
assigns. Thus, if <code>input</code> is a <strong>FileStream</strong> opened for input, we can
set up a loop to read a byte at a time to the end of the stream as
follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> k;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> ((k = input.ReadByte()) != -<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">byte</span> b = (<span style="color:#66d9ef">byte</span>)k;
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In the above code, the <strong>ReadByte</strong> method reads a byte from the file as
long as there is one to read, and assigns it to the <strong>int</strong> variable
<code>k</code>. If there is no byte to read, it assigns -1 to <code>k</code>. In either case,
the value of the assignment statement is the value assigned to <code>k</code>.
Thus, if the <strong>ReadByte</strong> method is at the end of the stream, it returns
-1, which is assigned to <code>k</code>, and the loop terminates. Otherwise, the
loop iterates, assigning <code>k</code> to <code>b</code> as a <strong>byte</strong>. The remainder of the
iteration can then use the <strong>byte</strong> read, which is in <code>b</code>.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>strings and StringBuilders</h1></div>
<h2 id="strings-and-stringbuilders"><strong>string</strong>s and <strong>StringBuilder</strong>s</h2>
<p>C# and .NET provide two data structures for representing
sequences of characters - <strong>string</strong>s and <strong>StringBuilder</strong>s. Each of
these data structures has its own advantages and disadvantages. In this
chapter, we will examine how these two types are used and implemented.
In the process, we will note the tradeoffs involved in using one or the
other.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>strings</h1></div>
<h2 id="strings"><strong>string</strong>s</h2>
<p>Instances of the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string?view=net-6.0" target="_blank" rel="noopener"><strong>string</strong></a>
class are <em>immutable</em> sequences of characters. Because <strong>string</strong> is a
class, it is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference
type</a>. Because
instances are immutable, once they are constructed, their contents
cannot change. Note that this does <em>not</em> mean that <strong>string</strong> variables
cannot change - we can assign a <strong>string</strong> variable <code>s</code> the value &ldquo;abc&rdquo;
and later assign it the value &ldquo;xyz&rdquo;. These assignments simply assign to
<code>s</code> references to different instances of the <strong>string</strong> class. What
immutability does mean is that there is no way to change any of the
characters in either of these instances (i.e., in either &ldquo;abc&rdquo; or
&ldquo;xyz&rdquo;). As a result, it is safe to copy a <strong>string</strong> by simply assigning
the value of one <strong>string</strong> variable to another; for example, if <code>s</code> is
a <strong>string</strong> variable, we can write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> t = s;
</span></span></code></pre></div><p>Note that this is <em>not</em> safe when dealing with mutable reference types,
such as arrays. For example, let <code>a</code> be an <strong>int[Â ]</strong> with at least
one element, and consider the following code sequence:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span>[ ] b = a;
</span></span><span style="display:flex;"><span>b[<span style="color:#ae81ff">0</span>]++;
</span></span></code></pre></div><p>Because <code>a</code> and <code>b</code> refer to the same array, <code>a[0]</code> is incremented as
well. This danger is absent for <strong>string</strong>s because they are immutable.</p>
<p>We access individual characters in a <strong>string</strong> by indexing; i.e., if
<code>s</code> is a <strong>string</strong> variable, then <code>s[0]</code> retrieves its first character,
<code>s[1]</code> retrieves its second character, etc. For example, if <code>s</code> refers
to the string, &ldquo;abc&rdquo;, then after executing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">char</span> c = s[<span style="color:#ae81ff">1</span>];
</span></span></code></pre></div><p><code>c</code> will contain &lsquo;b&rsquo;. Note that a statement like</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>s[<span style="color:#ae81ff">0</span>] = <span style="color:#e6db74">&#39;x&#39;</span>;
</span></span></code></pre></div><p>is prohibited in order to enforce immutability.</p>
<p>We obtain the number of characters in a <strong>string</strong> using its


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.length?view=net-6.0#system-string-length" target="_blank" rel="noopener"><strong>Length</strong></a>
property; for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> len = s.Length;
</span></span></code></pre></div>
  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>A <strong>string</strong> may have a length of 0. This means that it is the <em>empty
string</em>, denoted by &ldquo;&rdquo;. Note that &quot;&quot; is different from a <strong>null</strong>
reference - for example, if <code>s</code> refers to &ldquo;&rdquo;, then <code>s.Length</code>
has a value of 0, but if <code>s</code> is <strong>null</strong>, then this expression will
throw a <strong>NullReferenceException</strong>.</p>
    </div>
</div>
<p>We can concatenate two <strong>string</strong>s using the <code>+</code> operator. For example, if
<code>s</code> refers to the <strong>string</strong> &ldquo;abc&rdquo; and <code>t</code> refers to the <strong>string</strong>
&ldquo;xyz&rdquo;, then</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> u = s + t;
</span></span></code></pre></div><p>will assign the <strong>string</strong> &ldquo;abcxyz&rdquo; to <code>u</code>.</p>
<p>Because <strong>string</strong>s are immutable, building long <strong>string</strong>s directly
from many small pieces is very inefficient. Suppose, for example, that
we want to convert all the lower-case characters in the <strong>string</strong>
<code>text</code> to upper-case, and to convert all upper-case letters in <code>text</code> to
lower-case. All other characters we will leave unchanged. We can do this
with the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> result = <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; text.Length; i++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> c = text[i];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">char</span>.IsLower(c))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        result += <span style="color:#66d9ef">char</span>.ToUpper(c);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">char</span>.IsUpper(c))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        result += <span style="color:#66d9ef">char</span>.ToLower(c);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        result += c;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now suppose that <code>text</code> contains 100,000 characters. Each iteration of
the loop executes one of the three branches of the <strong>if</strong>-statement,
each of which concatenates one character to the <strong>string</strong> accumulated
so far. Because <strong>string</strong>s are immutable, this concatenation must be
done by copying all the characters in <code>result</code>, along with the
concatenated character, to a new <strong>string</strong>. As a result, if we were to
add up the total number of characters copied over the course of the
entire loop, we would come up with 5,000,050,000 character copies done.
This may take a while. In general, we say that this code runs in
<em>O</em>(<em>n</em><sup>2</sup>) time, where <em>n</em> is the length of <code>text</code>. This means
that as <em>n</em> increases, the running time of the code is at worst
proportional to <em>n</em><sup>2</sup>. In 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilders">the next
section</a>, we will see
how we can do this much more efficiently using another data structure.</p>
<p><strong>string</strong>s have many other methods to allow various kinds of
manipulation - see 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string?view=net-6.0" target="_blank" rel="noopener">the documentation for the <strong>string</strong>
class</a>
for details.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>StringBuilders</h1></div>
<h2 id="stringbuilders"><strong>StringBuilder</strong>s</h2>
<p>In 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/strings">the previous
section</a>, we saw that
building large <strong>string</strong>s from small pieces by concatenating them
together is very inefficient. This inefficiency is due to the fact that
<strong>string</strong>s are immutable. In order to overcome the inefficiency of
concatenation, we need an alternative data structure that we can modify.
The


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder?view=net-6.0" target="_blank" rel="noopener"><strong>StringBuilder</strong></a>
class fills this need.</p>
<p>Like <strong>string</strong>s, <strong>StringBuilder</strong>s implement sequences of characters,
but the contents of <strong>StringBuilder</strong>s can be changed. The
<strong>StringBuilder</strong> class has six constructors. The 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder.-ctor?view=net-6.0#system-text-stringbuilder-ctor" target="_blank" rel="noopener">simplest
<strong>StringBuilder</strong>
constructor</a>
takes no parameters and constructs an empty <strong>StringBuilder</strong> &mdash; i.e., a
<strong>StringBuilder</strong> containing no characters:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>StringBuilder sb = <span style="color:#66d9ef">new</span>();
</span></span></code></pre></div><p>We can then modify a <strong>StringBuilder</strong> in various ways. First, we may
append a <strong>char</strong> to the end using its


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder.append?view=net-6.0#system-text-stringbuilder-append%28system-char%29" target="_blank" rel="noopener"><strong>Append</strong></a>
method. This method not only changes the contents of the
<strong>StringBuilder</strong>, but it also returns a reference to it. Thus if we
have <strong>char</strong> variables, <code>a</code>, <code>b</code>, and <code>c</code>, and a <strong>StringBuilder</strong>
variable <code>sb</code>, we can write code such as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>sb.Append(a).Append(b).Append(c);
</span></span></code></pre></div><p>The first call to <strong>Append</strong> appends the contents of <code>a</code> to <code>sb</code>, and
returns <code>sb</code>. Thus, the second call to <strong>Append</strong> also applies to <code>sb</code> -
it appends the contents of <code>b</code>. Likewise, the third call appends the
contents of <code>c</code>.</p>
<p>Because this method changes a <strong>StringBuilder</strong>, rather than
constructing a new one, its implementation is very efficient - in most
cases, only the appended character needs to be copied (see
&ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl">Implementation of
<strong>StringBuilder</strong>s</a>&rdquo;
for details). This class has other <strong>Append</strong> methods as well, including
one that 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder.append?view=net-6.0#system-text-stringbuilder-append%28system-string%29" target="_blank" rel="noopener">appends the contents of a given
<strong>string</strong></a>.
This method likewise only needs to copy the appended characters.</p>
<p>Let us now return to the problem of converting all lower-case letters in
a <strong>string</strong> to upper-case, converting all upper-case letters to
lower-case, and leaving all other characters unchanged. We can use a
<strong>StringBuilder</strong> as an intermediate data structure to do this much more
efficiently than the code presented in 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/strings">the previous
section</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>StringBuilder sb = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; text.Length; i++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> c = text[i];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">char</span>.IsLower(c))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        sb.Append(<span style="color:#66d9ef">char</span>.ToUpper(c));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">char</span>.IsUpper(c))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        sb.Append(<span style="color:#66d9ef">char</span>.ToLower(c));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        sb.Append(c);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">string</span> result = sb.ToString();
</span></span></code></pre></div><p>On most iterations, the above loop only copies one character. In
addition, the call to the <strong>StringBuilder</strong>&rsquo;s <strong>ToString</strong> method copies
each character in the result. If <code>text</code> is 100,000 characters long, this
is a total of 200,000 character copies. Using the <strong>StringBuilder</strong>
implementation described in 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl">the next
section</a>, there
are some iterations that copy more than one character, but even if we
account for this, it turns out that fewer than 400,000 characters are
copied, as opposed to over five billion character copies when
<strong>string</strong>s are used directly (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/strings">the previous
section</a>). The .NET
<strong>StringBuilder</strong> implementation performs even
better. In either case, the above code runs in <em>O</em>(<em>n</em>) time, where <em>n</em>
is the length of <code>text</code>; i.e., as <em>n</em> gets large, the running time is at
worst proportional to <em>n</em>. Thus, its performance degrades much less
rapidly than the <em>O</em>(<em>n</em><sup>2</sup>) code that uses <strong>string</strong>s
directly.</p>
<p>A program that runs the above code and the code given in 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/strings">the previous
section</a> on user-provided
text files can be obtained by creating a Git repository (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/repos">&ldquo;Git
Repositories&rdquo;</a>) using


<a href="https://classroom.github.com/a/PO7WgRNh" target="_blank" rel="noopener">this URL</a>. A noticeable
performance difference can be seen on text files larger than 100K - for
example, the full text of 

<a href="http://www.gutenberg.org/cache/epub/12/pg12.txt" target="_blank" rel="noopener">Lewis Carroll&rsquo;s <em>Through the Looking
Glass</em></a>.</p>
<p><strong>StringBuilder</strong>s have some features in common with <strong>string</strong>s. For
example, we access individual characters in a <strong>StringBuilder</strong> by
indexing; i.e., if <code>sb</code> is a <strong>StringBuilder</strong> variable, then <code>sb[0]</code>
accesses its first character, <code>sb[1]</code> accesses its second character,
etc. The main difference here is that with a <strong>StringBuilder</strong>, we may
use indexing to change characters; e.g., we may do the following,
provided <code>sb</code> contains at least 3 characters:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>sb[<span style="color:#ae81ff">2</span>] = <span style="color:#e6db74">&#39;x&#39;</span>;
</span></span></code></pre></div><p>A <strong>StringBuilder</strong> also has a


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder.length?view=net-6.0#system-text-stringbuilder-length" target="_blank" rel="noopener"><strong>Length</strong></a>
property, which gets the number of characters contained. However, we may
also set this property to any nonnegative value, provided there is
enough memory available to provide this length. For example, we may
write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>sb.Length = <span style="color:#ae81ff">10</span>;
</span></span></code></pre></div><p>If the new length is shorter than the old, characters are removed from
the end of the <strong>StringBuilder</strong>. If the new length is longer that the
old, <strong>char</strong>s containing the Unicode NULL value (0 in decimal) are
appended.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>The Unicode NULL value is different from a <strong>null</strong>
reference. Because <strong>char</strong> is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">value
type</a>, a <strong>char</strong>
cannot store a <strong>null</strong> reference.</p>
    </div>
</div>
<p><strong>StringBuilder</strong>s have many other methods to allow various kinds of
manipulation - see 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder?view=net-6.0" target="_blank" rel="noopener">the documentation for the <strong>StringBuilder</strong>
class</a>
for details. There is also a 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder.-ctor?view=net-6.0#system-text-stringbuilder-ctor%28system-string%29" target="_blank" rel="noopener"><strong>StringBuilder</strong>
constructor</a>
that takes a <strong>string</strong> as its only parameter and constructs a
<strong>StringBuilder</strong> containing the contents of that <strong>string</strong>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementation of StringBuilders</h1></div>
<h2 id="implementation-of-stringbuilders">Implementation of <strong>StringBuilder</strong>s</h2>
<p>In this section, we will examine some of the implementation details of
the <strong>StringBuilder</strong> class. There are several reasons for doing this.
First, by examining these details, we can begin to understand why a
<strong>StringBuilder</strong> is so much more efficient than a <strong>string</strong> when it
comes to building long <strong>string</strong>s a character at a time. Second, by
studying implementations of data structures, we can learn techniques
that might be useful to us if we need to build our own data structures.
Finally, a computing professional who better understands the underlying
software will be better equipped to use that software effectively.</p>
<p>In what follows, we will develop an implementation of a simplified
<strong>StringBuilder</strong> class. Specifically, we will only implement enough to
support the program that flips the case of all characters in a
<strong>string</strong> (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilders">the previous
section</a>). Most other
features of a <strong>StringBuilder</strong> have a rather straightforward
implementation once the basics are done (we will show how to implement
an indexer in 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/indexers">a later
section</a>).</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>The
implementation described here is much simpler than the .NET
implementation, which achieves
even better performance.</p>
    </div>
</div>
<p>In order to illustrate more clearly the techniques used to implement a
<strong>StringBuilder</strong>, we will present an implementation that uses only
those types provided by the C#
core language, rather than those found in a library such as .NET. One
of the more useful data
structures that the C# core language provides for building more
advanced data structures
is the array. We can represent the characters in a <strong>StringBuilder</strong>
using a <strong>char[Â ]</strong>. One difficulty in using an array, however, is
that we don&rsquo;t know how many characters our <strong>StringBuilder</strong> might need.
We will return to this issue shortly, but for now, let&rsquo;s just
arbitrarily pick a size for our array, and define:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The initial capacity of the underlying array.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> _initialCapacity = <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The character in this StringBuilder.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">char</span>[] _characters = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[_initialCapacity];
</span></span></code></pre></div><p>An array with 100 elements will give us room enough to store up to 100
characters. In fact, initializing the array in this way actually gives
us 100 characters, as each array element is initialized to a Unicode
NULL character (a <strong>char</strong> with a decimal value of 0). Because <strong>char</strong>
is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">value type</a>,
each array element is going to store a <strong>char</strong> - it&rsquo;s just a question
of which <strong>char</strong> it is going to store. Therefore, if we want to be able
to represent a sequence of <em>fewer</em> than 100 characters, we need an
additional field to keep track of how many characters of the array
actually represent characters in the <strong>StringBuilder</strong>. We therefore
define:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The number of characters in this StringBuilder.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> _length = <span style="color:#ae81ff">0</span>;
</span></span></code></pre></div><p>Thus, for example, if <code>_length</code> is 25, the first 25 characters in
<code>_characters</code> will be the characters in the <strong>StringBuilder</strong>.</p>
<p>Because both fields have initializers, the default constructor will
initialize them both; hence, we don&rsquo;t need to write a constructor. Let&rsquo;s
focus instead on the <strong>Append</strong> method. This method needs to take a
<strong>char</strong> as its only parameter and return a <strong>StringBuilder</strong> (itself).
Its effect needs to be to add the given <strong>char</strong> to the end of the
sequence of characters in the <strong>StringBuilder</strong>.</p>
<p>In order to see how this can be done, consider how our fields together
represent the sequence of characters:</p>
<p><img src="stringbuilder-impl.jpg" alt="The implementation of a StringBuilder"></p>
<p>Within the array referred to by <code>_characters</code>, the first <code>_length</code>
locations (i.e., locations 0 through <code>_length</code>Â -Â 1) store the
characters in the <strong>StringBuilder</strong>. This means that
<code>_characters[_length]</code> is the next available location, provided this is
a valid array location. In this case, we can simply place the <strong>char</strong>
to be appended in <code>_characters[_length]</code>, increment <code>_length</code> (because
the number of characters in the <strong>StringBuilder</strong> has increased by 1),
and return the <strong>StringBuilder</strong>.</p>
<p>However, what if we are already using all of the array locations for
characters in the <strong>StringBuilder</strong>? In this case, <code>_length</code> is the
length of the array, and therefore is not a valid array location. In
order to handle this case, we need to make more room. The only way to do
this to construct a new, larger array, and copy all of the characters
into it. We will then make <code>_characters</code> refer to the new array. (.NET actually provides a method to do all this, but in order
to show the details of what is happening, we will not use it.) Now that
there is enough room, we can append the new character as above. The code
is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Appends the given character to the end of this StringBuilder.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;c&#34;&gt;The character to append.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;This StringBuilder.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> StringBuilder Append(<span style="color:#66d9ef">char</span> c)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (_length == _characters.Length)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span>[] chars = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[<span style="color:#ae81ff">2</span> * _length];
</span></span><span style="display:flex;"><span>        _characters.CopyTo(chars, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>        _characters = chars;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    _characters[_length] = c;
</span></span><span style="display:flex;"><span>    _length++;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>A few comments on the above code are in order. First, when we need a new
array, we allocate one of twice the size as the original array. We do
this for a couple of reasons. First, notice that copying every character
from one array to another is expensive if there are a lot of characters.
For this reason, we don&rsquo;t want to do it very often. By doubling the size
of the array every time we run out of room, we increase the size by
enough that it will be a while before we need to do it again. On the
other hand, doubling the array doesn&rsquo;t waste too much space if we don&rsquo;t
need to fill it entirely.</p>
<p>The


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.array.copyto?view=net-6.0#system-array-copyto%28system-array-system-int32%29" target="_blank" rel="noopener"><strong>CopyTo</strong></a>
method used above copies all of the elements in the array to which this
method belongs (in this case, <code>_characters</code>) to the array given by the
first parameter (<code>chars</code> in this case), placing them beginning at the
location given by the second parameter (0 in this case). Thus, we are
copying all the elements of <code>_characters</code> to <code>chars</code>, placing them
beginning at location 0.</p>
<p>The last statement within the <strong>if</strong> block assigns the reference stored
in <code>chars</code> to <code>_characters</code>; i.e., it makes <code>_characters</code> refer to the
same array as does <code>chars</code>. The last statement in the method returns the
<strong>StringBuilder</strong> whose <strong>Append</strong> method was called.</p>
<p><span id="overriding"></span> To complete this simple implementation, we
need to provide a <strong>ToString</strong> method. This method is already defined
for every <strong>object</strong>; hence, <strong>StringBuilder</strong> <em>inherits</em> this
definition by default. However, the <strong>ToString</strong> method defined for
<strong>object</strong>s doesn&rsquo;t give us the <strong>string</strong> we want. Fortunately, though,
this method is a <strong>virtual</strong> method, meaning that we can re-define by
<em>overriding</em> it. We do this by using the keyword, <strong>override</strong>, in its
definition. Visual StudioÂ®&rsquo;s auto-complete feature is helpful here,
as when we type the word <strong>override</strong>, it presents us with a list of the
methods that can be overridden. Selecting <strong>ToString</strong> from this list
will fill in a template for the method with a correct parameter list and
return type.</p>
<p>We want this method to return the <strong>string</strong> formed from the first
<code>_length</code> characters in <code>_characters</code>. We can form such a string using
one of the 

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.string.-ctor?view=netframework-4.7.2#System_String__ctor_System_Char___System_Int32_System_Int32_" target="_blank" rel="noopener"><strong>string</strong>
constructor</a>s.
This constructor takes three parameters:</p>
<ul>
<li>a <strong>char[Â ]</strong> containing the characters to form the <strong>string</strong>;</li>
<li>an <strong>int</strong> giving the index in this array of the first character to
use; and</li>
<li>an <strong>int</strong> giving the number of characters to use.</li>
</ul>
<p>We can therefore define the <strong>ToString</strong> method as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Converts this StringBuilder to a string.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The string equivalent of this StringBuilder.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">string</span> ToString()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">string</span>(_characters, <span style="color:#ae81ff">0</span>, _length);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You can obtain a program containing the complete <strong>class</strong> definition by
creating a Git repository (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/repos">&ldquo;Git
Repositories&rdquo;</a>) using


<a href="https://classroom.github.com/a/Nxy4T-la" target="_blank" rel="noopener">this URL</a>. This program is a
modification of the program used in 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilders">the previous
section</a> to compare the performance
differences between using
<strong>string</strong>s or <strong>StringBuilder</strong>s when building <strong>string</strong>s a
character at a time. Its only modification is to use this
<strong>StringBuilder</strong> class, defined within a class
library, instead of
the class defined in .NET. By running the program on long
<strong>string</strong>s, you can verify that the performance of this
<strong>StringBuilder</strong> class is comparable to that of the <strong>StringBuilder</strong>
in .NET.</p>
<p>Now that we have the details of a <strong>StringBuilder</strong> implementation, we
can begin to see why it is so much more efficient to build a <strong>string</strong>
a character at a time using a <strong>StringBuilder</strong>, as opposed to using a
<strong>string</strong>. As we have noted, allocating a new array and copying all
characters to it is expensive; however, we have tried to reduce the
number of times this is done. To see how this is accomplished, suppose
we are building a <strong>string</strong> of 100,000 characters. The first time we
need a larger array, we will copy 100 characters to a 200-element array.
The next time, we will copy 200 characters to a 400-element array. This
will continue until we copy 51,200 characters to a 102,400-element
array, which is large enough to hold all of the characters. If we add up
all of the character copies we have done when allocating new arrays, we
find that there are a total of 102,300 copies. In addition, each time we
call <strong>Append</strong>, we copy the <strong>char</strong> parameter to the array. This is
another 100,000 copies. Finally, the <strong>ToString</strong> method must copy all
of the characters to the <strong>string</strong> it is constructing. This is another
100,000 character copies, for a total of 302,300 copies. In general, the
number of character copies will always be less than 4<em>n</em>, where <em>n</em> is
the length of the <strong>string</strong> being built.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Stacks and Queues</h1></div>
<h2 id="stacks-and-queues">Stacks and Queues</h2>
<p>Often in solving problems, we need to access data items in a particular
order. Consider, for example, the action of an &ldquo;Undo&rdquo; operation in a
text editor, spreadsheet, or similar application. If we want to be able
to undo a sequence of these operations, we need to record each operation
as it is done. When we want to undo an operation, we need to retrieve
the operation to undo from the recorded sequence of operations. However,
we don&rsquo;t want to undo just any operation in this sequence - we need to
undo the most recent one that hasn&rsquo;t yet been undone. We therefore need
to access the operations in <em>last-in-first-out</em>, or <em>LIFO</em>, order. Other
applications might need to access data items in <em>first-in-first-out</em>, or
<em>FIFO</em>, order. In this chapter, we will examine data structures that
support these kinds of access.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Introduction to Stacks</h1></div>
<h2 id="introduction-to-stacks">Introduction to Stacks</h2>
<p>A <em>stack</em> provides last-in-first-out (LIFO) access to data items. We
usually think of a stack as arranging data items vertically, like a
stack of trays in a cafeteria. Access is normally provided only at the
top of the stack; hence, if we want to add an item, we <em>push</em> it onto
the top, and if we want to remove an item, we <em>pop</em> it from the top.
Because we only access the top of the stack, the item that we pop is
always the remaining item that we had pushed the most recently.</p>
<p>.NET provides two kinds of stacks. One is the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.stack?view=net-6.0" target="_blank" rel="noopener"><strong>Stack</strong></a>
class found in the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections?view=net-6.0" target="_blank" rel="noopener"><strong>System.Collections</strong></a>
namespace. Because this namespace isn&rsquo;t typically included in the list of namespaces searched by the compiler, but the namespace containing the other <strong>Stack</strong> definition (discussed a bit later below) is included, we need to refer to it in code as <strong>System.Collections.Stack</strong>. This class provides a stack of <strong>object?</strong>s. Because every
type in C# is a subtype of <strong>object</strong>, we can push any data items we
want onto a <strong>Stack</strong>. Because <strong>object?</strong> is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value#nullable-types">nullable</a> type, we can even push <strong>null</strong>. The most commonly-used <strong>public</strong> members of this
class are:</p>
<ul>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.stack.-ctor?view=net-6.0#system-collections-stack-ctor" target="_blank" rel="noopener">constructor</a>
that takes no parameters and constructs an empty stack.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.stack.count?view=net-6.0#system-collections-stack-count" target="_blank" rel="noopener"><strong>Count</strong></a>
property, which gets the number of elements on the <strong>Stack</strong> as an
<strong>int</strong>.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.stack.push?view=net-6.0#system-collections-stack-push%28system-object%29" target="_blank" rel="noopener"><strong>Push</strong></a>
method, which takes a single parameter of type <strong>object?</strong>, and
pushes it onto the top of the <strong>Stack</strong>.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.stack.peek?view=net-6.0#system-collections-stack-peek" target="_blank" rel="noopener"><strong>Peek</strong></a>
method, which takes no parameters and returns the element at the top
of the <strong>Stack</strong> (as an <strong>object?</strong>) without changing the <strong>Stack</strong>&rsquo;s
contents. If the <strong>Stack</strong> is empty, this method throws an
<strong>InvalidOperationException</strong>.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.stack.pop?view=net-6.0#system-collections-stack-pop" target="_blank" rel="noopener"><strong>Pop</strong></a>
method, which takes no parameters, and removes and returns the
element at the top of the <strong>Stack</strong> (as an <strong>object?</strong>). If the
<strong>Stack</strong> is empty, this method throws an
<strong>InvalidOperationException</strong>.</li>
</ul>
<p>As we mentioned above, because the <strong>Push</strong> method takes an <strong>object?</strong>
as its parameter, we can push any data elements we want, including <strong>null</strong>, onto a
<strong>Stack</strong>. What this means, however, is that the compiler can&rsquo;t
determine the type of these elements when we retrieve them; i.e., both
the <strong>Peek</strong> and <strong>Pop</strong> methods return <strong>object?</strong>s. Thus, for example,
the following code will not compile:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>System.Collections.Stack s = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span>s.Push(<span style="color:#ae81ff">7</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> n = s.Pop() + <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><p>The problem is that the <strong>Pop</strong> method returns an <strong>object?</strong>, and we
can&rsquo;t add an <strong>int</strong> to an <strong>object?</strong>. Although it&rsquo;s pretty easy to see
from this code that <strong>Pop</strong> will return 7, in many cases it&rsquo;s impossible
to know at compile time the exact type of the element returned (for
example, the <strong>Stack</strong> may be a parameter to a <strong>public</strong> method, and that method
may be called by code that has not yet been written). Consequently, the
compiler simply uses the return type of <strong>Pop</strong> - it doesn&rsquo;t even try to
figure out the type any more precisely.</p>
<p><span id="cast"></span> If you want to use the value returned by <strong>Pop</strong>
or <strong>Peek</strong> as something other than an <strong>object?</strong>, you need to tell the
compiler what its type actually is. You do this with a <em>cast</em>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> n = (<span style="color:#66d9ef">int</span>)s.Pop() + <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><p>This tells the compiler to assume that the value returned by <strong>Pop</strong> is
an <strong>int</strong>. The type is still checked, but now it is checked at run
time, rather than at compile time. If the runtime environment detects
that the value is not, in fact, an <strong>int</strong>, it will throw an
<strong>InvalidCastException</strong>.</p>
<p>While the above line of code will now compile, it generates a warning because <strong>Pop</strong> might return <strong>null</strong>, which cannot be cast to <strong>int</strong>. In order to avoid this warning, once we have determined that the call won&rsquo;t return a <strong>null</strong> value, we need to use the <code>!</code> operator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">// The element on the top of the stack is the int 7</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> n = (<span style="color:#66d9ef">int</span>)s.Pop()! + <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><p>Note that we include a comment explaining why <strong>Pop</strong> won&rsquo;t return <strong>null</strong> here.</p>
<p><span id="generic"></span> Often when we need a stack, the data items
that we wish to store are all of the same type. In such a case, it is
rather awkward to include a cast whenever we retrieve an item from the
stack. In order to avoid this casting, .NET provides a
<em>generic</em> stack,


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.stack-1?view=net-6.0" target="_blank" rel="noopener"><strong>Stack&lt;T&gt;</strong></a>,
found in the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic?view=net-6.0" target="_blank" rel="noopener"><strong>System.Collections.Generic</strong></a>
namespace. The <strong>T</strong> within angle brackets is a <em>type parameter</em> - we
may replace it with any type we want. This type tells what type of
elements may be placed in this stack. For example, if we want a stack
that will only contain <strong>int</strong>s, we can write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>Stack&lt;<span style="color:#66d9ef">int</span>&gt; s = <span style="color:#66d9ef">new</span>();
</span></span></code></pre></div><p>This class has members similar to those listed above for the non-generic
<strong>Stack</strong> class, except that the <strong>Push</strong> method takes a parameter of
type <strong>T</strong> (i.e., whatever type we placed within the angle brackets in
the type declaration and constructor call), and the <strong>Peek</strong> and <strong>Pop</strong>
methods each return a value of type <strong>T</strong>. As a result, the following is
now legal code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>Stack&lt;<span style="color:#66d9ef">int</span>&gt; s = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span>s.Push(<span style="color:#ae81ff">7</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> n = s.Pop() + <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><p>We will show how you can define your own generic types in &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl">Implementing
a Stack</a>&rdquo;. First, however,
we want to work through two example applications of stacks. We will do
that in the next two sections.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementing Undo and Redo for a TextBox</h1></div>
<h2 id="implementing-undo-and-redo-for-a-textbox">Implementing Undo and Redo for a <strong>TextBox</strong></h2>
<p>A <strong>TextBox</strong> has a rather crude Undo/Redo feature. By right-clicking on
a <strong>TextBox</strong>, a popup menu containing an Undo entry is presented. This
Undo will undo only one action, which may include several edits. An
immediate subsequent Undo will undo the Undo - in essence, a Redo. The
same behavior can be achieved using <code>Ctrl</code>+<code>Z</code>. A more powerful Undo/Redo
feature would allow an arbitrary sequence of edits to be undone, with
the option of redoing any of these Undo operations. This section
outlines various ways of implementing such a feature.</p>
<p>We first observe that when we perform an Undo, we want to undo the most
recent edit that has not been undone; i.e., we need LIFO access to the
edits. Likewise, when we perform a Redo, we want to redo the most recent
Undo that has not been redone. Again, we need LIFO access to the Undo
operations. We will therefore use two stacks, one to keep the edit
history, and one to keep the Undo history (i.e., the history of Undo
operations that can be redone).</p>
<p>Before we can define these stacks, we need to determine what we will be
storing in them; i.e., we need to determine how we will represent an
edit. We will consider several ways of doing this, but the simplest way
is to store the entire contents of the <strong>TextBox</strong> after each edit.
Proceeding in this way, we really aren&rsquo;t representing edits at all, but
we certainly would have the information we need to undo the edits.
Likewise, the Undo history would store the entire contents of the
<strong>TextBox</strong> prior to each Undo. Because the contents of the <strong>TextBox</strong>
form a <strong>string</strong>, we need two <strong>private</strong> fields, each referring to a
stack of <strong>string</strong>s:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The history of the contents of the TextBox.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> Stack&lt;<span style="color:#66d9ef">string</span>&gt; _editingHistory = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The history of TextBox contents that have been undone and can be redone.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> Stack&lt;<span style="color:#66d9ef">string</span>&gt; _undoHistory = <span style="color:#66d9ef">new</span>();
</span></span></code></pre></div><p>Before we can proceed to implementing the Undo and Redo operations, we
need to do a bit more initialization. Note that by the way we have
defined <code>_editingHistory</code>, this stack needs to contain the initial
contents of the <strong>TextBox</strong>. Therefore, assuming the <strong>TextBox</strong> field
is named <code>uxEditBuffer</code>, we need to add the following line to the end of
the constructor of our user interface:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>_editingHistory.Push(uxEditBuffer.Text);
</span></span></code></pre></div><p>In order to support Undo and Redo, we need to be able to record the
content of <code>uxEditBuffer</code> each time it is modified. We can do this via an
event handler for the <strong>TextChanged</strong> event on the <strong>TextBox</strong>. Because
this event is the default event for a <strong>TextBox</strong>, we can add such an
event handler by double-clicking on the <strong>TextBox</strong> within the Visual
StudioÂ® Design window. This event handler will then be called every
time the contents of the <strong>TextBox</strong> are changed.</p>
<p>We need to deal with one important issue before we can write the code
for this event handler. Whenever we perform an Undo or Redo operation,
we will change the contents of the <strong>TextBox</strong>. This will cause the
<strong>TextChanged</strong> event handler to be called. However, we don&rsquo;t want to
treat an Undo or a Redo in the same way as an edit by the user. For
example, if the user does an Undo, we don&rsquo;t want that Undo to be
considered an edit, or a subsequent Undo would just undo the Undo; i.e.,
it would perform a Redo rather than an Undo.</p>
<p>Fortunately, there is an easy way to distinguish between an edit made by
the user and a change made by the program code. A <strong>TextBox</strong> has a


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.textboxbase.modified?view=windowsdesktop-6.0#system-windows-forms-textboxbase-modified" target="_blank" rel="noopener"><strong>Modified</strong></a>
property, which is set to <strong>true</strong> when the user modifies the
<strong>TextBox</strong> contents, and is set to <strong>false</strong> when the program modifies
the contents. Thus, we only want to record the <strong>TextBox</strong> contents when
this property is <strong>true</strong>. Assuming the <strong>TextBox</strong> is named
<code>uxEditBuffer</code>, we can then set up the event handler as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Handles a TextChanged event on the edit buffer.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object signaling the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;Information about the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> EditBufferTextChanged(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (uxEditBuffer.Modified)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        RecordEdit();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now let&rsquo;s consider how to write the <code>RecordEdit</code> method. Suppose there
are two GUI controls (e.g., menu items or buttons) called <code>uxUndo</code> and
<code>uxRedo</code>, which invoke the Undo and Redo operations, respectively. These
controls should be enabled only when there are operations to undo or
redo. Thus, initially these controls will be disabled. Whenever the user
modifies the contents of the <strong>TextBox</strong>, we need to do the following:</p>
<ul>
<li>Push the resulting text onto <code>_editingHistory</code>.</li>
<li>Enable <code>uxUndo</code>, as there is now an edit that can be undone.</li>
<li>Clear the contents of <code>_undoHistory</code>, as the last change to the
<strong>TextBox</strong> contents was not an Undo. (A <strong>Stack&lt;T&gt;</strong> has a


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.stack-1.clear?view=net-6.0#system-collections-generic-stack-1-clear" target="_blank" rel="noopener"><strong>Clear</strong></a>
method for this purpose.)</li>
<li>Disable <code>uxRedo</code>.</li>
</ul>
<p>We therefore have the following method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Records an edit made by the user.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> RecordEdit()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    _editingHistory.Push(uxEditBuffer.Text);
</span></span><span style="display:flex;"><span>    uxUndo.Enabled = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    _undoHistory.Clear();
</span></span><span style="display:flex;"><span>    uxRedo.Enabled = <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now that we have a mechanism for recording the user&rsquo;s edits, we can
implement the Undo operation. The contents of the <strong>TextBox</strong> following
the last edit (i.e, the current contents of the <strong>TextBox</strong>) should
always be at the top of <code>_editingHistory</code>. An Undo should change the
current contents to the previous contents - i.e., to the <em>next</em>
<strong>string</strong> on <code>_editingHistory</code>. However, we don&rsquo;t want to lose the top
<strong>string</strong>, as this is the <strong>string</strong> that would need to be restored by
a subsequent Redo. Instead, we need to push this <strong>string</strong> onto
<code>_undoHistory</code>. We then need to enable <code>uxRedo</code>. In order to determine
whether <code>uxUndo</code> should be enabled, we need to know how many elements
remain in <code>_editingHistory</code>. We know there is at least one <strong>string</strong> on
this stack - the <strong>string</strong> that we placed in the <strong>TextBox</strong>. There is
an edit to undo if there is at least one more element on this stack -
i.e., if its <strong>Count</strong> is greater than 1. We therefore have the
following event handler for a Click event on <code>uxUndo</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Handles a Click event on Undo.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object signaling the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;Information about the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> UndoClick(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    _undoHistory.Push(_editingHistory.Pop());
</span></span><span style="display:flex;"><span>    uxRedo.Enabled = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    uxEditBuffer.Text = _editingHistory.Peek();
</span></span><span style="display:flex;"><span>    uxUndo.Enabled = _editingHistory.Count &gt; <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The implementation of Redo is similar, but now we need to transfer a
<strong>string</strong> between the stacks in the opposite direction - we move the
top <strong>string</strong> from <code>_undoHistory</code> to <code>_editingHistory</code>. Then <code>uxRedo</code>
should be enabled if any more <strong>string</strong>s remain in <code>_undoHistory</code>. The
<strong>string</strong> we removed from <code>_undoHistory</code> should be placed in the
<strong>TextBox</strong>. Finally, <code>uxUndo</code> should be enabled. We therefore have the
following event handler for a Click event on <code>uxRedo</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Handles a Click event on Redo.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object signaling the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;Information about the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> RedoClick(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    _editingHistory.Push(_undoHistory.Pop());
</span></span><span style="display:flex;"><span>    uxRedo.Enabled = _undoHistory.Count &gt; <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    uxEditBuffer.Text = _editingHistory.Peek();
</span></span><span style="display:flex;"><span>    uxUndo.Enabled = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This solution will work, except that an Undo or Redo always brings the
text caret to the beginning of the <strong>TextBox</strong> contents. Furthermore, if
the <strong>TextBox</strong> contains a long <strong>string</strong>, each edit causes a long
<strong>string</strong> to be placed onto <code>_editingHistory</code>. This can quickly eat up
a lot of memory, and may eventually fill up all available storage. In
what follows, we will outline two better approaches.</p>
<p>The idea for both of these approaches is that instead of recording the
entire contents of the <strong>TextBox</strong> for each edit, we only record a
description of each edit. A single edit will either be an insertion or a
deletion of some text. The number of characters inserted/deleted may
vary, as the edit may be a cut or a paste (if we select a block of text
and do a paste, the <strong>TextChanged</strong> event handler is actually called
twice - once for the deletion of the selected text, and once for the
insertion of the pasted text). We can therefore describe the edit with
the following three values:</p>
<ul>
<li>A <strong>bool</strong> indicating whether the edit was an insertion or a
deletion.</li>
<li>An <strong>int</strong> giving the index of the beginning of the edit.</li>
<li>The <strong>string</strong> inserted or deleted.</li>
</ul>
<p>We can maintain this information in stacks in one of two ways. One way
is to use non-generic stacks and to push three items onto a stack for
each edit. If we do this, we need to realize that when we pop elements
from the stack, they will come out in reverse order from the way they
were pushed onto it. Alternatively, we can define a class or a


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/structs">structure</a> to represent an
edit using the three values above as <strong>private</strong> fields. We can then use
generic stacks storing instances of this type.</p>
<p>Whichever way we choose to represent the edits, we need to be able to
compute each of the three pieces of information describing the edit. In
order to compute this information, we need to compare the current
contents of the <strong>TextBox</strong> with its prior contents in order to see how
it changed. This means that, in addition to the two <strong>private</strong> fields
we defined for the stacks, we will also need a <strong>private</strong> field to
store the last <strong>string</strong> we saw in the <strong>TextBox</strong>. Rather than
initializing <code>_editingHistory</code> within the constructor, we should now
initialize this <strong>string</strong> in its place (because there will have been no
edits initially, both stacks should initially be empty). If we keep this
<strong>string</strong> field up to date, we will always have a &ldquo;before&rdquo; picture (the
contents of this field) and an &ldquo;after&rdquo; picture (the current contents of
the <strong>TextBox</strong>) for the edit we need to record.</p>
<p>To determine whether the edit was an insertion or a deletion, we can
compare the lengths of the current <strong>TextBox</strong> contents and its previous
contents. If the current content is longer, then the edit was an
insertion; otherwise, the edit was a deletion. We therefore have the
following method for this purpose:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Returns whether text was deleted from the given string in order to</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// obtain the contents of the given TextBox.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;editor&#34;&gt;The TextBox containing the result of the edit.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;lastContent&#34;&gt;The string representing the text prior</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// to the edit.&lt;/param&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;Whether the edit was a deletion.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">bool</span> IsDeletion(TextBox editor, <span style="color:#66d9ef">string</span> lastContent)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> editor.TextLength &lt; lastContent.Length;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Note that the above code uses the <strong>TextBox</strong>&rsquo;s


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.textboxbase.textlength?view=windowsdesktop-6.0#system-windows-forms-textboxbase-textlength" target="_blank" rel="noopener"><strong>TextLength</strong></a>
property. This is more efficient than finding the length of its <strong>Text</strong>
property because evaluating the <strong>Text</strong> property requires all the
characters to be copied to a new <strong>string</strong>.</p>
<p>Before getting either the location of the edit or the edit string
itself, it is useful to compute the length of the edit string. This
length is simply the absolute value of the difference in the lengths of
the <strong>string</strong> currently in the <strong>TextBox</strong> and the last <strong>string</strong> we
saw there. The


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.math?view=net-6.0" target="_blank" rel="noopener"><strong>Math</strong></a>
class (in the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system?view=net-6.0" target="_blank" rel="noopener"><strong>System</strong></a>
namespace) contains a


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/static-this"><strong>static</strong></a> method


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.math.abs?view=net-6.0#system-math-abs%28system-int32%29" target="_blank" rel="noopener"><strong>Abs</strong></a>,
which computes the absolute value of an <strong>int</strong>. We therefore have the
following method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the length of the text inserted or deleted.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;editor&#34;&gt;The TextBox containing the result of the edit.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;lastContent&#34;&gt;The string representing the text prior</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// to the edit.&lt;/param&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The length of the edit.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> GetEditLength(TextBox editor, <span style="color:#66d9ef">string</span> lastContent)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Math.Abs(editor.TextLength - lastContent.Length);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now that we can determine whether an edit is a deletion or an insertion,
and we can find the length of the edit string, it isn&rsquo;t hard to find the
beginning of the edit. First, suppose the edit is a deletion. The point
at which the deletion occurred is the point at which the text caret now
resides. We can find this point using the <strong>TextBox</strong>&rsquo;s


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.textboxbase.selectionstart?view=windowsdesktop-6.0#system-windows-forms-textboxbase-selectionstart" target="_blank" rel="noopener"><strong>SelectionStart</strong></a>
property. When there is no current selection - and there never will be
immediately following an edit - this property gives the location of the
text caret in the <strong>TextBox</strong>. Now consider the case in which the edit
was an insertion. When text is inserted into a <strong>TextBox</strong>, the text
caret ends up at the <em>end</em> of the inserted text. We need to find its
beginning. We can do this by subtracting the length of the edit string
from the text caret position. We therefore have the following method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the location of the beginning of the edit.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;editor&#34;&gt;The TextBox containing the result of the edit.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;isDeletion&#34;&gt;Indicates whether the edit was a deletion.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;len&#34;&gt;The length of the edit string.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The location of the beginning of the edit.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> GetEditLocation(TextBox editor, <span style="color:#66d9ef">bool</span> isDeletion, <span style="color:#66d9ef">int</span> len)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (isDeletion)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> editor.SelectionStart;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> editor.SelectionStart - len;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The last piece of information we need is the <strong>string</strong> that was deleted
or inserted. If the edit was a deletion, this <strong>string</strong> can be found in
the previous <strong>TextBox</strong> contents. Its beginning is the point at which
the edit occurred. We can therefore extract the deleted <strong>string</strong> from
the previous contents using its


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.substring?view=net-6.0#system-string-substring%28system-int32-system-int32%29" target="_blank" rel="noopener"><strong>Substring</strong></a>
method. We pass this method the beginning index of the substring and its
length, and it returns the substring, which is the deleted <strong>string</strong>.
On the other hand, if the edit was an insertion, we can find the
inserted <strong>string</strong> in the current <strong>TextBox</strong> contents by using its
<strong>Substring</strong> in a similar way. We therefore have the following method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the edit string.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;content&#34;&gt;The current content of the TextBox.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;lastContent&#34;&gt;The string representing the text prior</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// to the edit.&lt;/param&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;isDeletion&#34;&gt;Indicates whether the edit was a deletion.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;editLocation&#34;&gt;The location of the beginning of the edit.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;len&#34;&gt;The length of the edit.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The edit string.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> GetEditString(<span style="color:#66d9ef">string</span> content, <span style="color:#66d9ef">string</span> lastContent, <span style="color:#66d9ef">bool</span> isDeletion, <span style="color:#66d9ef">int</span> editLocation, <span style="color:#66d9ef">int</span> len)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (isDeletion)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> lastContent.Substring(editLocation, len);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> content.Substring(editLocation, len);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Using the methods above, we can modify the <strong>RecordEdit</strong> method to
obtain the three values listed above to describe an edit. Once we have
placed these three values onto the stack of editing history, we also
need to update the <strong>string</strong> giving the previous <strong>TextBox</strong> contents.
This should now be the current <strong>TextBox</strong> contents. We can then finish
the method as shown above.</p>
<p>In order to implement Undo and Redo, we need to be able to insert and
delete text in the <strong>TextBox</strong>. A <strong>string</strong> has two methods we can use
to accomplish this:</p>
<ul>
<li>The


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.remove?view=net-6.0#system-string-remove%28system-int32-system-int32%29" target="_blank" rel="noopener"><strong>Remove</strong></a>
method takes as its parameters the beginning index and length of the
portion to remove, and returns the result.</li>
<li>The


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.insert?view=net-6.0#system-string-insert%28system-int32-system-string%29" target="_blank" rel="noopener"><strong>Insert</strong></a>
method takes as its parameters the index at which the <strong>string</strong>
should be inserted, and the <strong>string</strong> to insert. It returns the
result.</li>
</ul>
<p>Given the location of the edit along with the edit string itself, we can
easily provide the parameters to the appropriate method above.
Furthermore, it is not hard to set the location of the text caret using
the <strong>TextBox</strong>&rsquo;s <strong>SelectionStart</strong> property - we just need to be sure
to add the length of the edit string if we are inserting text. The
following method therefore performs a given edit, updating the
<strong>string</strong> containing the last contents of the <strong>TextBox</strong> as well (we
assume this <strong>string</strong> is called <code>_lastText</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Performs the given edit on the contents of the given TextBox.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;editor&#34;&gt;The TextBox to edit.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;isDeletion&#34;&gt;Indicates whether the edit is a deletion.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;loc&#34;&gt;The location of the beginning of the edit.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;text&#34;&gt;The text to insert or delete.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> DoEdit(TextBox editor, <span style="color:#66d9ef">bool</span> isDeletion, <span style="color:#66d9ef">int</span> loc, <span style="color:#66d9ef">string</span> text)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (isDeletion)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _lastText = editor.Text.Remove(loc, text.Length);
</span></span><span style="display:flex;"><span>        editor.Text = _lastText;
</span></span><span style="display:flex;"><span>        editor.SelectionStart = loc;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _lastText = editor.Text.Insert(loc, text);
</span></span><span style="display:flex;"><span>        editor.Text = _lastText;
</span></span><span style="display:flex;"><span>        editor.SelectionStart = loc + text.Length;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We can now implement event handlers for Undo and Redo. We can obtain the
description of the edit from the stack of editing history for an Undo,
or from the stack of undo history for a Redo. This description gives us
the type of edit (i.e., either insertion or deletion), the beginning
position of the edit, and the inserted or deleted <strong>string</strong>. To
implement a Redo, we simply do this edit, but to implement an Undo, we
must do the opposite.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Parenthesis Matching</h1></div>
<h2 id="parenthesis-matching">Parenthesis Matching</h2>
<p>The problem of finding matching parentheses must be solved in many
computing applications. For example, consider a C# compiler. Matching
parentheses (<code>(</code> and <code>)</code>), brackets (<code>[</code> and <code>]</code>), and braces (<code>{</code> and
<code>}</code>) delimit various parts of the source code. In order for these parts
to be interpreted correctly, the compiler must be able to determine how
these different kinds of parentheses match up with each other. Another
example is processing structured data stored in XML format. Different
parts of such a data set are delimited by nested begin tags like
<code>&lt;summary&gt;</code> and end tags like <code>&lt;/summary&gt;</code> (documentation comments
in C# code are in XML format). These tags are essentially different
kinds of parentheses that need to be matched.</p>
<p>We will restrict our attention to parentheses, brackets, and braces. We
will call all six of these characters &ldquo;parentheses&rdquo;, but will divide
them into three types. Each type then has an opening parenthesis and a
closing parenthesis. We will define a <strong>string</strong> restricted to these six
characters to be <em>matched</em> (or <em>balanced</em>) if we can repeatedly remove
an opening parenthesis and a closing parenthesis of the same type to its
immediate right until there are no more parentheses.</p>
<p>For example, suppose we have the <strong>string</strong>, &ldquo;<code>([]{()[]})[{}]</code>&rdquo;. We can
apply the matching-pair removal process described above as follows
(blank space is inserted to make it easier to see which parentheses are
removed):</p>
<pre>
    ([]{()[]})[{}]
    (  {()[]})[{}]
    (  {  []})[{}]
    (  {    })[{}]
    (        )[{}]
              [{}]
              [  ]
</pre>
<p>Hence, this <strong>string</strong> is matched. On the other hand, consider the
<strong>string</strong>, &ldquo;<code>([]{()[])}[{}]</code>&rdquo;. When we apply the above process to this
<strong>string</strong>, we obtain:</p>
<pre>
    ([]{()[])}[{}]
    (  {()[])}[{}]
    (  {  [])}[{}]
    (  {    )}[{}]
    (  {    )}[  ]
    (  {    )}
</pre>
<p>and we can go no further. Hence, this <strong>string</strong> is not matched.</p>
<p>We can extend the definition of a matched <strong>string</strong> to include other
characters if we first remove all other characters before we begin the
matching-pair removal process. In what follows, we will focus on the
problem of determining whether a given <strong>string</strong> is matched.</p>
<p>The matching-pair removal process shown above gives us an algorithm for
determining whether a <strong>string</strong> is matched. However, if implemented
directly, it isn&rsquo;t very efficient. Changes to a <strong>string</strong> are
inefficient because the entire <strong>string</strong> must be reconstructed. We
could use a <strong>StringBuilder</strong>, but even then, removing characters is
inefficient, as all characters to the right of the removed character
must be moved to take its place. Even if we simply change parentheses to
blanks, as we did in the above example, searching for matching pairs is
still rather expensive.</p>
<p>What we would like to do instead is to find a way to apply the
matching-pair removal process while scanning the <strong>string</strong> once. As we
are scanning the <strong>string</strong>, we don&rsquo;t want to spend time searching for a
matching pair. We can do this if, while scanning the <strong>string</strong>, we keep
all unmatched opening parentheses in a stack. Then the parenthesis at
the top of the stack will always be the rightmost unmatched opening
parenthesis. Thus, starting with an empty stack, we do the following for
each character in the <strong>string</strong>:</p>
<ul>
<li>If the character is a opening parenthesis, push it onto the stack.</li>
<li>If the character is a closing parenthesis:
<ul>
<li>If the stack is nonempty, and the current character matches the
character on top of the stack, remove the character from the top
of the stack.</li>
<li>Otherwise, the <strong>string</strong> is not matched.</li>
</ul>
</li>
<li>Ignore all other characters.</li>
</ul>
<p>If the stack is empty when the entire <strong>string</strong> has been processed,
then the <strong>string</strong> is matched; otherwise, it is not.</p>
<p>For example, consider the <strong>string</strong>, &ldquo;<code>{a[b]([c]){de}}f[(g)]</code>&rdquo;. In what
follows, we will simulate the above algorithm, showing the result of
processing each character on a separate line. The portion of the line
with an orange background will be the stack contents, with the top element
shown at the right. We will insert blank space in the orange area for
clarity, but the stack will only contain opening parentheses. The first
character with a gray background is the character currently being
processed.</p>
<pre>
{a[b]([c]){de}}f[(g)]    --- an opening parenthesis - push it onto the stack
<span style="background-color:#ff7f00">{</span>a[b]([c]){de}}f[(g)]    --- ignore
<span style="background-color:#ff7f00">{ </span>[b]([c]){de}}f[(g)]    --- push onto stack
<span style="background-color:#ff7f00">{ [</span>b]([c]){de}}f[(g)]    --- ignore
<span style="background-color:#ff7f00">{ [ </span>]([c]){de}}f[(g)]    --- closing parenthesis that matches the top - remove top
<span style="background-color:#ff7f00">{    </span>([c]){de}}f[(g)]    --- push onto stack
<span style="background-color:#ff7f00">{    (</span>[c]){de}}f[(g)]    --- push onto stack
<span style="background-color:#ff7f00">{    ([</span>c]){de}}f[(g)]    --- ignore
<span style="background-color:#ff7f00">{    ([ </span>]){de}}f[(g)]    --- a match - remove top
<span style="background-color:#ff7f00">{    (   </span>){de}}f[(g)]    --- a match - remove top
<span style="background-color:#ff7f00">{         </span>{de}}f[(g)]    --- push onto stack
<span style="background-color:#ff7f00">{         {</span>de}}f[(g)]    --- ignore
<span style="background-color:#ff7f00">{         { </span>e}}f[(g)]    --- ignore
<span style="background-color:#ff7f00">{         {  </span>}}f[(g)]    --- a match - remove top
<span style="background-color:#ff7f00">{             </span>}f[(g)]    --- a match - remove top
<span style="background-color:#ff7f00">               </span>f[(g)]    --- ignore
<span style="background-color:#ff7f00">                </span>[(g)]    --- push onto stack
<span style="background-color:#ff7f00">                [</span>(g)]    --- push onto stack
<span style="background-color:#ff7f00">                [(</span>g)]    --- ignore
<span style="background-color:#ff7f00">                [( </span>)]    --- a match - remove top
<span style="background-color:#ff7f00">                [   </span>]    --- a match - remove top
<span style="background-color:#ff7f00">                     </span>    --- end of string and stack empty - matched string
</pre>
<p>If at any time during the above process we had encountered a closing
parenthesis while the stack was empty, this would have indicated that
this closing parenthesis has no matching opening parenthesis. In this
case, we would have stopped immediately, determining that the <strong>string</strong>
is not matched. Likewise, if we had encountered a closing parenthesis
that did not match the parenthesis at the top of the stack, this would
have indicated a mismatched pair. Again, we would have stopped
immediately. Finally, if we had reached the end of the <strong>string</strong> with a
nonempty stack, this would have indicated that we had at least one
opening parenthesis that was never matched. We would have again
determined that the <strong>string</strong> is not matched.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementing a Stack</h1></div>
<h2 id="implementing-a-stack">Implementing a Stack</h2>
<p>This section gives an overview of perhaps the most common way to
implement a stack. For example, the implementations of both
<strong>System.Collections.Stack</strong> and
<strong>System.Collections.Generic.Stack&lt;T&gt;</strong> use this technique. This
implementation uses an array to store the elements of the stack, and is
quite similar to the 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl"><strong>StringBuilder</strong>
implementation</a> we
described in the last chapter. We have discussed two kinds of stacks in
this chapter - stacks of <strong>object?</strong>s and generic stacks. We will focus
on implementing a generic stack in this section, as it is easy to modify
such an implementation to be non-generic.</p>
<p><span id="generic"></span> We first need to consider how to define a
generic class. In the simplest case, we simply add a type parameter to
the <strong>class</strong> statement, as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Stack</span>&lt;T&gt;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Within this <strong>class</strong> definition, <strong>T</strong> is treated like any other type,
except that the compiler knows nothing about it. We can declare fields,
parameters, and local variables to be of type <strong>T</strong>. Even though the
compiler knows nothing about <strong>T</strong>, it will still do type checking - you
cannot assign an expression of any other type to a variable of type
<strong>T</strong>, and you can only assign an expression of type <strong>T</strong> to variables
of either type <strong>T</strong> or type <strong>object?</strong> (because any type is a subtype
of <strong>object?</strong>). Assigning an expression of type <strong>T</strong> to an <strong>object</strong> variable may generate a compiler warning, but is permitted as well. In general, we can define generic data types with any
number of type parameters if more that one generic type is needed by the
data structure. To do this, we would list the type parameters, separated
by commas, between the <code>&lt;</code> and <code>&gt;</code> symbols of the generic <strong>class</strong>
definition. Each of the type parameters is then treated as a type within
the <strong>class</strong> definition. We will show how the types passed as type
parameters can be restricted in 

<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/linked-list-impl/#where">a later
section</a>.</p>
<p>For the class <strong>Stack&lt;T&gt;</strong>, only one type parameter is needed. The
type parameter <strong>T</strong> denotes the type of the values that are stored in
the stack. Therefore, the array in which we will store the elements will
be of type <strong>T?[Â ]</strong>. The <code>?</code> is needed because if a reference type is used for <strong>T</strong>, when the array is constructed, all locations will initially store <strong>null</strong>, and will continue to store <strong>null</strong> until stack elements are placed into them.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>In the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value/#nullable-types">&ldquo;Reference Types and Value Types&rdquo;</a>, we explained how the <code>?</code> operator behaves differently depending on whether the underlying type is a reference type or a value type. Because a type parameter might represent either a reference type or a value type, we need to address how this operator behaves for a type parameter. Similar to its behavior for a reference type, when this operator is used with a type parameter, the code produced is unchanged. Instead, it is simply an annotation indicating that <strong>null</strong> values may be present. Note that this can happen only if the underlying type happens to be a reference type.</p>
    </div>
</div>
<p>As in the 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl"><strong>StringBuilder</strong>
implementation</a>,
we will need a <strong>private</strong> field for this array. This field can be
initialized in a manner similar to the <strong>StringBuilder</strong> implementation;
hence, we don&rsquo;t need to write a constructor.</p>
<p>A stack has a <strong>public</strong> read-only property, <strong>Count</strong>, which gets the
number of elements in the stack (as an <strong>int</strong>). We can define this
property to use the default implementation with a <strong>private</strong> set
accessor, as outlined in the section,
&ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">Properties</a>&rdquo;.</p>
<p>Before we can delve any further into the implementation, we need to
decide how we are going to arrange the elements in the array. Because
all of our accesses will be to the top of the stack, it makes sense to
keep the bottom element of the stack at location 0, and as we go up the
stack, keep each successive element in the next location:</p>
<p><img src="stack-impl.jpg" alt="The arrangement of stack elements in the array."></p>
<p>This arrangement makes sense because unless all of the array locations
are being used, there is room to push a new element on top of the stack
without having to move any pre-existing elements out of its way.</p>
<p>Note the similarity of this arrangement to the 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl">implementation of a
<strong>StringBuilder</strong></a>.
Given this similarity, we can implement the <strong>Push</strong> method in a similar
way to how we implemented the <strong>Append</strong> method for a <strong>StringBuilder</strong>.
Instead of taking a <strong>char</strong> parameter, the <strong>Push</strong> method takes a
<strong>T</strong> parameter, but this is the type that we can store in the array.
The biggest difference in these two methods is that while <strong>Append</strong>
returns a <strong>StringBuilder</strong>, <strong>Push</strong> returns nothing.</p>
<p>We now need to implement the <strong>public</strong> methods that retrieve elements
from the stack. We will start with the <strong>Peek</strong> method, which takes no
parameters and returns a <strong>T</strong>. This method needs to begin with some
error checking: if there are no elements in the stack, it needs to throw
an <strong>InvalidOperationException</strong>. We can do this by constructing such an
exception and throwing it with the <strong>throw</strong> keyword:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> InvalidOperationException();
</span></span></code></pre></div><p>If there are elements in the stack, we need to return the one at the
top. Note from the figure above that the top element is at the location
preceding the location indexed by <strong>Count</strong>. However, note that this element is of type <strong>T?</strong>, whereas the return type of <strong>Peek</strong> is <strong>T</strong>. Thus, returning this element will generate a warning unless we use the <code>!</code> operator. This operator is safe to use here because the location we are returning stores an element that was passed to <strong>Push</strong> as type <strong>T</strong>.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>Note that because <strong>T</strong> can represent any type, it is possible that it represents a nullable type; for example, it is permissible to define a <strong>Stack&lt;string?&gt;</strong>. Therefore, it is possible that the element being returned is <strong>null</strong>. However, we don&rsquo;t need to concern ourselves with this case, as it will be handled by the calling code. The point is that we are returning something of type <strong>T</strong>, even if <strong>T</strong> represents a non-nullable reference type.</p>
    </div>
</div>
<p>The other <strong>public</strong> method to retrieve an element is the <strong>Pop</strong>
method. This method also takes no parameters and returns a <strong>T</strong>. Part
of what it does we have already implemented in the <strong>Peek</strong> method. In
order to avoid duplicating code, we can retrieve the top element using
the <strong>Peek</strong> method, and save it in a local variable so that we can
return it when we are finished with this method (avoiding code
duplication improves maintainability, as there are fewer places that
might need to be modified later). Note that by using the <strong>Peek</strong>
method, we are taking advantage of the fact that it checks whether the
stack is empty; hence, there is no need to do that here. Before we can
return the value we retrieved, we need to update <strong>Count</strong> to reflect
the fact that we are removing one element.</p>
<p>While what we have described in the preceding paragraph is sufficient
for correct functioning, there is one issue we need to address. Note
that we have done nothing to the array location that stored the value we
popped - it still stores that value. This fact does not impact
correctness, however, because after we update the number of elements, we
are no longer considering that location to be storing a stack element -
its contents are irrelevant. Nevertheless, there is a performance issue here.
If <strong>T</strong> is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference
type</a>, then the
reference stored in this location may refer to a large data structure
that is no longer needed by the program. Because this array location
still stores a reference to it, the garbage collector cannot tell that
it is no longer in use, and consequently, it cannot reclaim the storage.</p>
<p><span id="default-value"></span>It therefore makes sense to remove what is stored in this array
location. However, we run into a difficulty when we try to do this. We
can&rsquo;t simply assign <strong>null</strong> to this location because <strong>T</strong> might be a
value type; hence, the compiler will not allow such an assignment. In
order to address this problem, C# has the keyword, <strong>default</strong>, which
can be used to get the default value for a given type. Thus, if <strong>T</strong> is
a reference type, <strong>default(T)</strong> will give us <strong>null</strong>, but if <strong>T</strong> is
a value type, it will give us the value whose binary representation is
all 0s. In order to free up any memory we might no longer need, it
therefore makes sense to assign <strong>default(T)</strong> to an array location
after we are no longer using it.</p>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>Often the parameter to <strong>default</strong> (including the parentheses) can be
omitted because the compiler
can detect what type is needed. This is the case in the current
context. If using <strong>default</strong> without the
parameter gives a syntax error, supply the parameter.</p>
    </div>
</div>
<p>Finally, we can implement a <strong>public Clear</strong> method. This method takes
no parameters and returns nothing. One way to implement it would be to
pop all of the elements, one by one, from the stack. However, this could
be very inefficient if the stack contains a lot of elements. A better
way is simply to change <strong>Count</strong> to 0; however, this way prevents the
garbage collector from reclaiming storage we no longer need. In order to
allow this storage to be reclaimed, we should also replace our array
with a new array of the size we used when we initialized this field
(note that this is more efficient than replacing every element with the
default element of the appropriate type). Because we are no longer using
the old array, the garbage collector can reclaim it, along with any
otherwise unused data it might refer to.</p>
<p>Due to the similarities between this implementation and the


<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl"><strong>StringBuilder</strong>
implementation</a>,
the two data structures have similar performance characteristics. In
fact, it is possible to show that any sequence of <em>n</em> operations on an
initially empty <strong>Stack&lt;T&gt;</strong> is done in <em>O</em>(<em>n</em>) time - i.e., in time
proportional to <em>n</em>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Introduction to Queues</h1></div>
<h2 id="introduction-to-queues">Introduction to Queues</h2>
<p>Stacks provide LIFO access to data, but sometimes we need
first-in-first-out, or <em>FIFO</em>, access.
Consider, for example, the computation of capital gains from stock
sales. Typically an investor will buy shares of a stock commodity at
various times and for different prices. When shares are sold, the amount
of money received doesn&rsquo;t depend on <em>which</em> shares of a given commodity
are sold, as each share is worth the same amount at that time. Likewise,
the unsold shares of that commodity each have the same value. However,
for accounting purposes, it does matter. Specifically, the <em>capital
gain</em> for that sale is defined to be the amount received from the sale
minus the amount originally paid for those shares, assuming the shares
sold are the oldest shares of that commodity owned by the investor.</p>
<p>Suppose now that we want to compute the capital gains from sales of
stock. As shares are purchased, we need to record the purchase price of
each share, along with the order in which the shares were purchased. As
shares are sold, we need to retrieve the original purchase price of the
oldest shares of each commodity sold. We therefore need
first-in-first-out access to the purchase prices of the shares of each
commodity owned. To keep this relatively simple, in what follows we will
assume that we only need to keep track of one stock commodity.</p>
<p>A <em>queue</em> provides FIFO access to data items. Like a stack, a queue is a
sequence of data items. However, a queue behaves more like a line of
people at a ticket counter. Each person who enters the queue enters at
the <em>back</em>, and the next person who is served is the person at the
<em>front</em>. Thus, the people in the queue are served in FIFO order.
Likewise, new data items are added to the back of a queue, and data
items are retrieved from the front.</p>
<p>.NET provides both a non-generic queue of <strong>object?</strong>s
(

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.queue?view=net-6.0" target="_blank" rel="noopener"><strong>System.Collections.Queue</strong></a>)
and a generic queue
(

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.queue-1?view=net-6.0" target="_blank" rel="noopener"><strong>System.Collections.Generic.Queue&lt;T&gt;</strong></a>).
For simplicity, we will focus on the generic version. The non-generic
version is the same, except that wherever the type parameter <strong>T</strong> is
used in the generic version, <strong>object?</strong> is used in the non-generic
version.</p>
<p>Like <strong>Stack&lt;T&gt;</strong>, <strong>Queue&lt;T&gt;</strong> has a <strong>public</strong>


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.queue-1.-ctor?view=net-6.0#system-collections-generic-queue-1-ctor" target="_blank" rel="noopener">constructor</a>
that takes no parameters and constructs an empty queue, along with a
<strong>public</strong>


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.queue-1.count?view=net-6.0#system-collections-generic-queue-1-count" target="_blank" rel="noopener"><strong>Count</strong></a>
property that gets the number of elements in the queue (as an <strong>int</strong>).
It also has the following <strong>public</strong> methods:</p>
<ul>
<li>An


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.queue-1.enqueue?view=net-6.0#system-collections-generic-queue-1-enqueue%28-0%29" target="_blank" rel="noopener"><strong>Enqueue</strong></a>
method that takes a single parameter of type <strong>T</strong> and places it at
the back of the queue.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.queue-1.peek?view=net-6.0#system-collections-generic-queue-1-peek" target="_blank" rel="noopener"><strong>Peek</strong></a>
method that takes no parameters and returns the element (of type
<strong>T</strong>) at the front of the queue without changing the queue&rsquo;s
contents. If the queue is empty, this method throws an
<strong>InvalidOperationException</strong>.</li>
<li>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.queue-1.dequeue?view=net-6.0#system-collections-generic-queue-1-dequeue" target="_blank" rel="noopener"><strong>Dequeue</strong></a>
method, which takes no parameters and removes and returns the
element at the front of the queue. If the queue is empty, this
method throws an <strong>InvalidOperationException</strong>.</li>
</ul>
<p>To implement a capital gain calculator using a <strong>Queue&lt;T&gt;</strong>, we first
need to determine what type to make the elements. We will need to store
the purchase price of each share we buy in the queue. An appropriate
type for storing monetary amounts is the


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/decimals"><strong>decimal</strong></a> type.
Therefore, we will use an initially empty <strong>Queue&lt;decimal&gt;</strong>. Each
time we buy shares, we enqueue the purchase price of each share onto the
queue. When we sell shares, we need to compute the sum of the capital
gains for all of the shares we sold. To get the capital gain for a
single share, we dequeue its original purchase price from the queue, and
subtract that purchase price from the selling price. Using the queue in
this way ensures that we sell the shares in FIFO order.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementing a Queue</h1></div>
<h2 id="implementing-a-queue">Implementing a Queue</h2>
<p>We will approach the implementation of a queue much like we did the


<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl">implementation of a
stack</a> - we will use part
of an array to store the elements, and create a larger array as needed.
However, efficiently implementing a stack is easier because we only need
to access one end of a stack, but we need to access both ends of a
queue. Suppose, for example, that we were to use the initial part of the
array, as we did for a stack; i.e.:</p>
<p><img src="bad-queue-impl.jpg" alt="A queue implementation using the initial part of anarray"></p>
<p>This implementation works well as long as we are only enqueuing elements
&mdash; each element is placed at the back, much like pushing an element onto
a stack. However, consider what happens when we dequeue an element. The
element is easy to locate, as it must be at index 0, but in order to
maintain the above picture, we would need to move all of the remaining
elements one location to the left. This becomes less efficient as the
number of elements in the queue increases.</p>
<p>One alternative is to modify the picture somewhat:</p>
<p><img src="nowrap-queue.jpg" alt="A more general queue implementation"></p>
<p>We can maintain this picture more efficiently, as there is now no need
to move the elements when we dequeue an element. It does mean that we
need to keep track of a bit more information, namely, the location of
either the front or the back, in addition to the <strong>Count</strong> (note that we
can compute the other end from these two values). But a more serious
problem remains. Notice that as we enqueue and dequeue elements, the
portion of the array that we are using works its way to the right.
Eventually, the back element will be the last element in the array.
However, this doesn&rsquo;t mean that we are using the entire array, as the
front can be anywhere in the array.</p>
<p>To solve this problem, when we need to enqueue an element but the back
element is in the last array location, we place the next element at
index 0. It is as if we are imagining the array as being circular, as
the next location after the last is back at the beginning. The following
picture gives two views of such a &ldquo;circular array&rdquo; implementation:</p>
<p><img src="wrapped-queue.jpg" alt="A circular array implementation of a queue"></p>
<p>With this implementation, we only need to construct a larger array if we
completely fill the current array, and unless we need to do this, we
don&rsquo;t need to move elements around. We need the following class members
in order to keep track of everything:</p>
<ul>
<li>a <strong>private T?[Â ]</strong> field in which to store the elements;</li>
<li>a <strong>public int Count</strong> property; and</li>
<li>a <strong>private int</strong> field giving the index of the element at the front
of the queue (if the queue is empty, this can be any valid index).</li>
</ul>
<p>Let us now consider how we would implement <strong>Enqueue</strong>. We first need to
determine whether the array is full by comparing the <strong>Count</strong> with the
size of the array. If it is full, we need to construct a new array of
twice the size, as we did for both the 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl"><strong>StringBuilder</strong>
implementation</a>
and the 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl">stack
implementation</a>. However,
we can&rsquo;t simply copy the entire array to the beginning of the new array,
as we did for these other two implementations. To do so would leave a
gap in the middle of the queue, as shown in the following illustration:</p>
<p><img src="bad-circular-array-copy.jpg" alt="Why a simple copy will not work for a circulararray"></p>
<p>While there are several ways of copying the elements correctly, it may
be helpful to copy in such a way that the index of the front of the
queue remains unchanged; i.e., we copy as follows:</p>
<p><img src="circular-array-copy.jpg" alt="A correct copy for a circular array"></p>
<p>In order to copy the elements like this, we can use the <strong>static</strong>
method,


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.array.copy?view=net-6.0#system-array-copy%28system-array-system-int32-system-array-system-int32-system-int32%29" target="_blank" rel="noopener"><strong>Array.Copy</strong></a>.
This method takes the following parameters:</p>
<ul>
<li>The array to copy from.</li>
<li>An <strong>int</strong> giving the index of the first element to copy.</li>
<li>The array to copy to.</li>
<li>An <strong>int</strong> giving the index in which to place the first element.</li>
<li>An <strong>int</strong> giving the number of elements to copy.</li>
</ul>
<p>Just figuring out how to fill in these parameters takes some work. Let&rsquo;s
first consider the part that begins with the front of the queue. The
index of the first element to copy is the index of the front of the
queue, which we have in a <strong>private</strong> field. We want to place this
element at the same index in the new array. In order to compute the
number of elements to copy, first observe that we know the number of
elements in the original array (we can use either the <strong>Count</strong> property
or the length of this array, as these values are equal whenever we need
a larger array). To get the number of elements we want to copy, we can
subtract from this value the number of elements we are <em>not</em> copying &mdash;
i.e., the number of elements preceding the index of the front of the
queue. The number of elements preceding any index <em>i</em> is always <em>i</em>;
hence, by subtracting the index of the front of the queue from the
<strong>Count</strong>, we get the number of elements we are copying by this call.</p>
<p>Now let&rsquo;s see if we can figure out the parameters for the other call.
The first element we want to copy is at index 0. We want to place it
immediately following the elements we have already copied. Because the
last of these elements occupies the last index of the original array,
whose size is currently the same as the <strong>Count</strong>, the next index is
just the <strong>Count</strong>. The number of elements we want to copy, as we have
already argued, is the index of the front of the queue.</p>
<p>Once we have the elements copied to the new array, the hardest part is
done. After we do this, we just need to copy the reference to the new
array into the array field.</p>
<p>Once we have ensured that there is room in the array to add a new
element, we can complete the <strong>Enqueue</strong> method. We need to place the
element at the back of the queue. We can obtain the proper location by
adding the <strong>Count</strong> to the index of the front of the queue, provided
this value is not beyond the end of the array. If it is, then we need to
wrap it around by subtracting the length of the array. We can then
increment the number of elements, and we are (finally) done.</p>
<p>The <strong>Peek</strong> method is straightforward &mdash; after verifying that the queue
is nonempty, we simply return the element at the front. The <strong>Dequeue</strong>
method isn&rsquo;t much more difficult. We can obtain the element we want to
return using the <strong>Peek</strong> method. We then need to place the default
element of type <strong>T</strong> at the front, and update both the index of the
front of the queue and the <strong>Count</strong> before returning the element we
obtained ealier from <strong>Peek</strong>. The only slightly tricky part is making
sure that when we update the index of the front of the queue, we don&rsquo;t
go outside of the array. If we do, we need to wrap it back around to 0.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Linked Lists</h1></div>
<h2 id="linked-lists">Linked Lists</h2>
<p>Using arrays to implement data structures has performance advantages in
some cases, but this technique has its limitations. With this chapter,
we begin a study of data structures that use 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference
types</a> in a powerful
way. Rather than forming sequences by placing data items in adjacent
cells of an array, we instead use references to chain data elements
together in a sequence. For some applications, this ends up being more
efficient than using an array. As we will see in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees">a later
chapter</a>, this chaining
technique can be further exploited to link data items in a hierarchical
way, providing even more flexible and efficient access.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Introduction to Linked Lists</h1></div>
<h2 id="introduction-to-linked-lists">Introduction to Linked Lists</h2>
<p>To build a linked list, we first need to define a simple <strong>class</strong>,
which we will call <strong>LinkedListCell&lt;T&gt;</strong>. Instances of this class will
be the individual building blocks that we will chain together to form
linked lists. <strong>T</strong> will be the type of the data item we will store in
each cell - i.e., the type of the data items that we will store in the
linked list.</p>
<p>A <strong>LinkedListCell&lt;T&gt;</strong> will contain two <strong>public</strong>
properties, which can each be implemented using the default
implementation:</p>
<ul>
<li>The <strong>Data</strong> property gets or sets the data item (of type <strong>T</strong>)
stored in the cell.</li>
<li>The <strong>Next</strong> property gets or sets the next <strong>LinkedListCell&lt;T&gt;?</strong>
in the linked list. If there is no next cell, it gets <strong>null</strong>.</li>
</ul>
<p>Because this is a <strong>class</strong>, it is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference
type</a>; hence, the
<strong>Next</strong> property will store a reference to another
<strong>LinkedListCell&lt;T&gt;</strong>.</p>
<p>The only other member of this class is a <strong>public</strong> constructor. Because we don&rsquo;t want to make <strong>Data</strong> nullable unless the user code specifies a nullable type for <strong>T</strong>, we need to make sure it is initialized to an appropriate value. For this purpose, we use a <strong>public</strong> constructor that takes the following parameters:</p>
<ul>
<li>The initial <strong>Data</strong> value (of type <strong>T</strong>).</li>
<li>The next cell in the list (of type <strong>LinkedListCell&lt;T&gt;?</strong>).</li>
</ul>
<p>It simply sets the values of the two properties to the given parameters.</p>
<p>Although the <strong>LinkedListCell&lt;T&gt;</strong> class is simple, we can use its
<strong>Next</strong> property to chain together long sequences of its instances:</p>
<p><img src="linked-list-example.jpg" alt="A linked list"></p>
<p>In the above figure, <code>p</code> is a <strong>LinkedListCell&lt;string&gt;</strong> variable.
Each box in the figure represents an instance of
<strong>LinkedListCell&lt;string&gt;</strong>. The boxes are each divided into two
regions to indicate the two <strong>public</strong> properties for each cell. Because
<strong>string</strong> is a reference type, we have shown each <strong>Data</strong> property as
a reference to a <strong>string</strong>. The rightmost arrow that is bent downward
is used to represent <strong>null</strong>. The entire sequence of
<strong>LinkedListCell&lt;string&gt;</strong>s is called a <em>linked list</em>. Given this
linked list:</p>
<ul>
<li><code>p.Data</code> is &ldquo;Now&rdquo;;</li>
<li><code>p.Next.Data</code> is &ldquo;is&rdquo;;</li>
<li><code>p.Next.Next.Data</code> is &ldquo;the&rdquo;;</li>
<li><code>p.Next.Next.Next.Data</code> is &ldquo;time&rdquo;; and</li>
<li><code>p.Next.Next.Next.Next</code> is <strong>null</strong> (if we try to get its <strong>Data</strong>
property, we will get a <strong>NullReferenceException</strong>).</li>
</ul>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>When writing code for using and manipulating linked lists, it is helpful to draw pictures of the lists, as we do throughout this chapter.</p>
    </div>
</div>
<p>Suppose we want to insert the <strong>string</strong> &ldquo;Notice:&rdquo; at the beginning of
this linked list. We use the <strong>LinkedListCell&lt;T&gt;</strong> constructor to initialize a new cell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>LinkedListCell&lt;<span style="color:#66d9ef">string</span>&gt; cell = <span style="color:#66d9ef">new</span>(<span style="color:#e6db74">&#34;Notice&#34;</span>, p);
</span></span></code></pre></div><p>This yields the following:</p>
<p><img src="linked-list-insert-2.jpg" alt="Linking in the cell"></p>
<p>This is what we want, unless we want <code>p</code> to refer to the beginning of
the linked list. We can take care of this by copying the value of <code>cell</code>
to <code>p</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>p = cell;
</span></span></code></pre></div><p>This yields the following (we are not showing <code>cell</code> because we are no
longer interested in it, but it still refers to the same cell):</p>
<p><img src="linked-list-insert-3.jpg" alt="Completing the insertion"></p>
<p>We can also undo the above statement by copying into <code>p</code> the reference
in the <strong>Next</strong> property of the cell to which <code>p</code> refers:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>p = p.Next;
</span></span></code></pre></div><p>(If this statement occurs in a context in which the compiler cannot determine that <code>p</code> is not <strong>null</strong>, an <code>!</code> will need to be inserted prior to <code>.Next</code>.) This yields the following:</p>
<p><img src="linked-list-remove-first.jpg" alt="Removing the first cell"></p>
<p>This has the effect of removing &ldquo;Notice:&rdquo; from the linked list to which
<code>p</code> refers. Though we haven&rsquo;t shown it, <code>cell</code> still refers to the cell
containing &ldquo;Notice:&rdquo;; hence, we still have access to the linked list
beginning with this cell. However, if the program had no references
remaining to this cell, we would have no way to retrieve it, and it
would be available for garbage collection. This illustrates how we must
take care not to lose a part of a linked list (unless we are finished
with it) when we are manipulating it.</p>
<p>With a little more work, cells can be inserted into or removed from
arbitrary locations in a linked list. We will discuss how to do this in
subsequent sections. For now let us simply observe that linked lists do
not always continue until they reach a <strong>null</strong> - they can contain
cycles, as follows:</p>
<p><img src="linked-list-cycle.jpg" alt="A linked list with a cycle"></p>
<p>This is occasionally what we want, but more often, this is a programming
error that leads to an infinite loop.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementing Stacks and Queues with Linked Lists</h1></div>
<h2 id="implementing-stacks-and-queues-with-linked-lists">Implementing Stacks and Queues with Linked Lists</h2>
<p>Because linked lists store data elements in linear sequences, they can
be used to give alternative implementations of stacks and queues. One
advantage to using linked lists is that we don&rsquo;t have to worry about
filling up something like an array - we can just keep allocating cells
as long as we need to (unless we run out of memory).</p>
<p>Implementing a stack using a linked list is particularly easy because
all accesses to a stack are at the top. One end of a linked list, the
beginning, is always directly accessible. We should therefore arrange
the elements so that the top element of the stack is at the beginning of
the linked list, and the bottom element of the stack is at the end of
the linked list. We can represent an empty stack with <strong>null</strong>.</p>
<p>We therefore need a <strong>private LinkedListCell&lt;T&gt;?</strong> field to implement a
generic stack <strong>Stack&lt;T&gt;</strong> using a linked list. This field will refer
to the cell containing the data item at the top of the stack. If the stack is empty, this field will be <strong>null</strong>; hence, this field should be <strong>null</strong> initially. A <strong>public
Count</strong> property will be used to keep track of the number of elements in
the stack.</p>
<p>The <strong>public</strong> methods <strong>Push</strong>, <strong>Peek</strong>, and <strong>Pop</strong> are then fairly
straightforward to implement. For <strong>Push</strong> we need to add the given
element to a new cell at the beginning of the linked list, as shown in


<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/intro">the previous
section</a>, and
update the <strong>Count</strong>. To implement <strong>Peek</strong>, if the stack is nonempty,
we simply return the <strong>Data</strong> property of the cell at the beginning of
the linked list; otherwise, we throw an <strong>InvalidOperationException</strong>. Note that we can determine whether the stack is empty by examining either the <strong>LinkedListCell&lt;T&gt;?</strong> field or the <strong>Count</strong> property; however, examining the <strong>LinkedListCell&lt;T&gt;?</strong> field allows the compiler to determine that the <strong>Data</strong> property of the first cell can be accessed without throwing a <strong>NullReferenceException</strong>.</p>
<p>To implement <strong>Pop</strong>:</p>
<ol>
<li>Using <strong>Peek</strong>, obtain the element to be returned.</li>
<li>Remove the first element from the linked list as shown in 

<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/intro">the
previous
section</a>.</li>
<li>Update the <strong>Count</strong>.</li>
<li>Return the retrieved value.</li>
</ol>
<p>Note that the call to <strong>Peek</strong> in step 1 ensures that the stack is nonempty before we remove the first element; however, the compiler won&rsquo;t be able to determine this.</p>
<p>Implementing a queue is a little more involved because we need to
operate at both ends of the linked list. For efficiency, we should keep
a reference to the last cell in the linked list, as this will allow us
to access both ends of the linked list directly. We will therefore have
the following:</p>
<p><img src="linked-list-queue.jpg" alt="Implementing a queue with a linked list"></p>
<p>We now need to decide which end to make the front of the queue. As we
saw in 

<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/intro">the previous
section</a>, both
inserting and removing can be done efficiently at the beginning of a
linked list. Likewise, it is easy to insert an element at the end if we
have a reference to the last cell. Suppose, for example, that <code>last</code>
refers to the last cell in a linked list, and that <code>cell</code> refers to a
<strong>LinkedListCell&lt;T&gt;</strong> that we want to insert at the end. Suppose
further that the linked list is not empty (that will be a special case
that we&rsquo;ll need to handle). Thus, we have the following:</p>
<p><img src="linked-list-insert-end-1.jpg" alt="A cell to insert at the end of a linkedlist"></p>
<p>To insert this cell at the end of the linked list, we just need to copy
the reference in <code>cell</code> to the <strong>Next</strong> property of the cell to which
<code>last</code> refers:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>last.Next = cell;
</span></span></code></pre></div><p>On the other hand, removing the last cell is problematic, even if we
have a reference to it. The problem is that in order to remove it from
the linked list, we need to change the <strong>Next</strong> property of the
preceding cell. Unfortunately, the only way to obtain that cell is to
start at the beginning of the list and work our way through it. If the
linked list is long, this could be quite inefficient.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>It doesn&rsquo;t help any to keep a reference to the next-to-last cell, as
we encounter the same problem when we need to update this reference
after removing the last cell &mdash; we don&rsquo;t have a reference to its
preceding cell.</p>
    </div>
</div>
<p>Because we need to
remove elements from the front of a queue, but not from the back, we
conclude that it will work best to make the beginning of the linked list
the front of the queue. We therefore need the following <strong>private</strong>
fields to implement a generic queue <strong>Queue&lt;T&gt;</strong>:</p>
<ul>
<li>A <strong>LinkedListCell&lt;T&gt;?</strong> giving the element at the front of the
queue. This will be the beginning of the linked list of queue
elements.</li>
<li>A <strong>LinkedListCell&lt;T&gt;?</strong> giving the element at the back of the
queue. This will be the last cell in the linked list of queue
elements.</li>
</ul>
<p>As we mentioned earlier, adding an element to an empty queue is a
special case that we will need to handle separately. For this reason, it
doesn&rsquo;t matter what values the two <strong>LinkedListCell&lt;T&gt;?</strong> fields
contain when the queue is empty - we can always detect when the queue is
empty by checking the <strong>Count</strong>. The initialization of the two
<strong>LinkedListCell&lt;T&gt;?</strong> fields is therefore unimportant. It is easiest
to just leave them <strong>null</strong>.</p>
<p>Let us now consider the implementation of the <strong>Enqueue</strong> method. We
need to consider two cases. We&rsquo;ll first consider the case in which the
queue is empty. In this case, we need to build the following linked
list:</p>
<p><img src="one-cell-queue.jpg" alt="A queue containing a single linked list cell"></p>
<p>We therefore need to:</p>
<ol>
<li>Construct a new <strong>LinkedListCell&lt;T&gt;</strong> containing the element we want to enqueue and no next cell.</li>
<li>Assign it to the field denoting the front of the queue.</li>
<li>Assign it to the field denoting the back of the queue.</li>
<li>Update the <strong>Count</strong>.</li>
</ol>
<p>If the queue is nonempty, the only step that changes is Step 2. Because
the queue is nonempty, we don&rsquo;t want to make the new cell the front of
the queue; instead, we need to insert it at the end of the linked list,
as outlined above.</p>
<p>The implementations of the <strong>Peek</strong> and <strong>Dequeue</strong> methods are
essentially the same as the implementations of the <strong>Peek</strong> and <strong>Pop</strong>
methods, respectively, for a stack.</p>
<p>The implementations described in this section are simpler than the
implementations using arrays, mainly due to the fact that we don&rsquo;t need
to rebuild the structure when we fill up the space available. While
these implementations are also pretty efficient, it turns out that the
array-based implementations tend to out-perform the linked-list-based
implementations. This might be counterintuitive at first because
rebuilding the structures when the array is filled is expensive.
However, due to the fact that we double the size of the array each time
we need a new one, this rebuilding is done so rarely in practice that it
ends up having minimal impact on performance. Due to hardware and
low-level software issues, the overhead involved in using arrays usually
ends up being less.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Finding Prime Numbers</h1></div>
<h2 id="finding-prime-numbers">Finding Prime Numbers</h2>
<p>An integer greater than 
<span class="math align-center">$ 1 $</span> is said to be <em>prime</em> if it is not divisible
by any positive integers other than itself and <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span> Thus, <span style="white-space:nowrap">
<span class="math align-center">$ 2 $</span>,</span> <span style="white-space:nowrap">
<span class="math align-center">$ 3 $</span>,</span> and 
<span class="math align-center">$ 5 $</span> are
prime, but not 
<span class="math align-center">$ 1 $</span> (it is not greater than <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>)</span> or 
<span class="math align-center">$ 4 $</span> (it is divisible by <span style="white-space:nowrap">
<span class="math align-center">$ 2 $</span>).</span>
Because every integer is divisible by itself and <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>,</span> we will call any
other positive factors <em>nontrivial factors</em>; thus, a prime number is an
integer greater than 
<span class="math align-center">$ 1 $</span> that has no nontrivial factors. The study of
prime numbers dates back to at least the third century BC. One of the
earliest known algorithms finds all prime numbers less than a given
integer <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>.</span> This algorithm is known as the <em>Sieve of Eratosthenes</em>, and
is attributed to the Greek mathematician Eratosthenes of Cyrene (c. 276
BC - c. 194 BC).</p>
<p>The most basic version of this algorithm operates as follows:</p>
<ol>
<li>Place all integers greater than 
<span class="math align-center">$ 1 $</span> and less than 
<span class="math align-center">$ n $</span> in order in a
list.</li>
<li>For each element 
<span class="math align-center">$ k $</span> in the list, remove all subsequent elements
that are divisible by <span style="white-space:nowrap">
<span class="math align-center">$ k $</span>.</span></li>
<li>The remaining values are the prime numbers less than <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>.</span></li>
</ol>
<p>For example, suppose <span style="white-space:nowrap">
<span class="math align-center">$ n = 20 $</span>.</span> We then place the integers from 
<span class="math align-center">$ 2 $</span>
to 
<span class="math align-center">$ 19 $</span> in a list:

<span class="math align-left">
$$
2\ 3\ 4\ 5\ 6\ 7\ 8\ 9\ 10\ 11\ 12\ 13\ 14\ 15\ 16\ 17\ 18\ 19
$$
</span>
We then remove all numbers following 
<span class="math align-center">$ 2 $</span> that are divisible by <span style="white-space:nowrap">
<span class="math align-center">$ 2 $</span>:</span>

<span class="math align-left">
$$
\require{cancel}
2\ 3\ \cancel{4}\ 5\ \cancel{6}\ 7\ \cancel{8}\ 9\ \cancel{10}\ 11\
\cancel{12}\ 13\ \cancel{14}\ 15\ \cancel{16}\ 17\ \cancel{18}\ 19
$$
</span>
We then remove all numbers following 
<span class="math align-center">$ 3 $</span> that are divisible by <span style="white-space:nowrap">
<span class="math align-center">$ 3 $</span>:</span>

<span class="math align-left">
$$
2\ 3\ \cancel{4}\ 5\ \cancel{6}\ 7\ \cancel{8}\ \cancel{9}\ \cancel{10}\ 11\
\cancel{12}\ 13\ \cancel{14}\ \cancel{15}\ \cancel{16}\ 17\ \cancel{18}\ 19
$$
</span>
The algorithm continues, but none of the succeeding iterations finds any
values to remove. Therefore, <span style="white-space:nowrap">
<span class="math align-center">$ 2, 3, 5, 7, 11, 13, 17 $</span>,</span> and 
<span class="math align-center">$ 19 $</span> are the
prime numbers less than <span style="white-space:nowrap">
<span class="math align-center">$ 20 $</span>.</span></p>
<p>To see why this algorithm gives us exactly the prime numbers less than
<span style="white-space:nowrap">
<span class="math align-center">$ n $</span>,</span> first note that because we only remove a number when we find a
nontrivial factor, we only remove non-primes from the list. What may be
a little less obvious is that we remove <em>all</em> non-primes from the list.
To see this, suppose 
<span class="math align-center">$ m $</span> is a non-prime less than <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>,</span> and let 
<span class="math align-center">$ a $</span> be
its smallest nontrivial factor. Then 
<span class="math align-center">$ a $</span> must be prime because any
nontrivial factor of 
<span class="math align-center">$ a $</span> would be less than 
<span class="math align-center">$ a $</span> and would also divide
<span style="white-space:nowrap">
<span class="math align-center">$ m $</span>.</span> 
<span class="math align-center">$ a $</span> therefore will not be removed from the list. When

<span class="math align-center">$ k = a $</span> in Step 2, 
<span class="math align-center">$ m $</span> will be removed.</p>
<p>There is actually a good reason why the first two iterations in the
above example removed all of the non-primes &mdash; once the algorithm reaches
a divisor 
<span class="math align-center">$ k $</span> such that 
<span class="math align-center">$ k^2 \geq n $</span> (in this
example, <span style="white-space:nowrap">
<span class="math align-center">$ 5^2 = 25 \geq 20 $</span>),</span> all of the
non-primes will have been removed. To see why this is true, let 
<span class="math align-center">$ m $</span> and

<span class="math align-center">$ a $</span> be as above. We can then write

<span class="math align-left">
$$
    m = ab
$$
</span>
where <span style="white-space:nowrap">
<span class="math align-center">$ a \leq b $</span>,</span> and 
<span class="math align-center">$ m $</span> is removed from the list when
<span style="white-space:nowrap">
<span class="math align-center">$ k = a $</span>.</span> We can then multiply both sides of the above
equation by <span style="white-space:nowrap">
<span class="math align-center">$ a/b $</span>,</span> yielding:

<span class="math align-left">
$$
\frac{am}{b} = a^2.
$$
</span>
Finally, because <span style="white-space:nowrap">
<span class="math align-center">$ a \leq b $</span>,</span> <span style="white-space:nowrap">
<span class="math align-center">$ a/b \leq 1 $</span>.</span>
Therefore,

<span class="math align-left">
$$
m \geq a^2.
$$
</span>
We conclude that if 
<span class="math align-center">$ m $</span> is a non-prime greater than <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>,</span> it is removed
when the algorithm reaches some value 
<span class="math align-center">$ k $</span> with
<span style="white-space:nowrap">
<span class="math align-center">$ k^2 < n $</span>.</span> We can therefore optimize the
algorithm by stopping when <span style="white-space:nowrap">
<span class="math align-center">$ k^2 \geq n $</span>.</span></p>
<p>We can implement this algorithm using a linked list. A linked list is an
appropriate data structure for this algorithm because once the list is
built, all of the processing involves iterating through it from
beginning to end &mdash; the same direction the links go.</p>
<p>To implement Step 1, it is easier to build the list from back to front,
as we don&rsquo;t need to maintain a separate reference to the end of the
list. This step then consists of a loop that iterates from

<span class="math align-center">$ n - 1 $</span> down to <span style="white-space:nowrap">
<span class="math align-center">$ 2 $</span>,</span> with each iteration adding
to the front of the list a cell containing the loop index.</p>
<p>In order to be able to implement Step 2, we will need to know how to
remove a cell from a linked list. Suppose, for example, that we want to
remove the cell referring to &ldquo;the&rdquo; from the following linked list:</p>
<p><img src="linked-list-remove1.jpg" alt="A linked list from which we want to remove x"></p>
<p>To remove it, we need the cell that precedes it to be followed by the
cell that follows it:</p>
<p><img src="linked-list-remove2.jpg" alt="What we need to change in order to remove thecell"></p>
<p>In order to change that reference, we need a reference to the cell that
precedes the cell we want to remove:</p>
<p><img src="linked-list-remove3.jpg" alt="The additional reference we need"></p>
<p>We can then remove the cell following the cell referenced by <code>q</code> as
follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>q.Next = q.Next.Next;
</span></span></code></pre></div><p>Now that we know how to remove a cell from a linked list, let&rsquo;s consider
Step 2 of the algorithm. For one value of <span style="white-space:nowrap">
<span class="math align-center">$ k $</span>,</span> we need to remove all
subsequent values that are divisible by <span style="white-space:nowrap">
<span class="math align-center">$ k $</span>.</span> In terms of the linked
list, we need to start this process with the cell containing <span style="white-space:nowrap">
<span class="math align-center">$ k $</span>.</span> For
example, consider the second iteration from the example above &mdash; i.e.,
when <span style="white-space:nowrap">
<span class="math align-center">$ k = 3 $</span>:</span></p>
<p><img src="sieve-example1.jpg" alt="The beginning of an iteration with k = 3"></p>
<p>We need to iterate <code>p</code> through the linked list, checking the <em>next</em> cell
on each iteration to see whether its contents are divisible by <span style="white-space:nowrap">
<span class="math align-center">$ k $</span>.</span> We
can check for divisibility by 
<span class="math align-center">$ k $</span> using the 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/remainder">remainder
operator</a> &mdash; i.e., 
<span class="math align-center">$ k $</span> divides

<span class="math align-center">$ m $</span> if 
<span class="math align-center">$ m \mathbin{\texttt{%}} k $</span> is 0. Thus, the first iteration
would see if 
<span class="math align-center">$ 3 $</span>
divides <span style="white-space:nowrap">
<span class="math align-center">$ 5 $</span>.</span> It doesn&rsquo;t, so we advance <code>p</code> to the next cell (containing
<span style="white-space:nowrap">
<span class="math align-center">$ 5 $</span>).</span> We then see if 
<span class="math align-center">$ 3 $</span> divides <span style="white-space:nowrap">
<span class="math align-center">$ 7 $</span>.</span> Again it doesn&rsquo;t, so we advance <code>p</code> to
the next cell (containing <span style="white-space:nowrap">
<span class="math align-center">$ 7 $</span>).</span> At this point, 
<span class="math align-center">$ 3 $</span> divides <span style="white-space:nowrap">
<span class="math align-center">$ 9 $</span>,</span> so we remove
the cell containing 
<span class="math align-center">$ 9 $</span> as shown above. This gives us the following linked
list:</p>
<p><img src="sieve-example2.jpg" alt="After 9 has been removed"></p>
<p>Note that we have not yet advanced <code>p</code>, and indeed we don&rsquo;t want to, as

<span class="math align-center">$ 11 $</span> is the next value we want to check. Thus, on each iteration, if 
<span class="math align-center">$ k $</span>
divides the value in the cell following <code>p</code>, we remove that cell;
otherwise, we advance <code>p</code> to that cell. We iterate this loop as long as
there is a cell following <code>p</code>.</p>
<p>The loop described above represents a single iteration of the loop
described for Step 2. Thus, for Step 2, we need to iterate a variable
through the list, performing the above on each iteration. We stop when
we either have run off the end of the list or have reached a value of

<span class="math align-center">$ k $</span> such that <span style="white-space:nowrap">
<span class="math align-center">$ k^2 \geq n $</span>.</span> Note that at the end of
each iteration, we want to advance to the next cell.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Make sure when iterating through a linked list that you keep a
reference to the beginning of the list. Otherwise, you will lose all
of your list.</p>
    </div>
</div>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Dictionaries</h1></div>
<h2 id="dictionaries">Dictionaries</h2>
<p>A common problem in computing is that of keyed storage and retrieval. Specifically, we have a number of data items, each having a unique <em>key</em>. This key may be any type, and is used to find the associated data item; i.e., given a key we need to find the data item associated with that key. A data structure that provides this kind of access is called a dictionary. In this chapter, we will examine a dictionary class provided by .NET. We will then consider two ways of implementing dictionaries. Later chapters will examine improvements over these implementations.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>The Dictionary&lt;TKey, TValue&gt; Class</h1></div>
<h2 id="the-dictionarytkeytvalue-class">The <strong>Dictionary&lt;TKey,Â TValue&gt;</strong> Class</h2>
<p>In this section, we will discuss the use of the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=net-6.0" target="_blank" rel="noopener"><strong>Dictionary&lt;TKey, TValue&gt;</strong></a>
class, which implements a dictionary. In 

<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/linked-list-impl">the next
section</a>, we
will discuss how this data structure can be implemented using a linked
list. In subsequent sections, we will consider alternative
implementations.</p>
<p>Note that the <strong>Dictionary&lt;TKey,Â TValue&gt;</strong> type has two type parameters,
<strong>TKey</strong> and <strong>TValue</strong>. <strong>TKey</strong> is the type of the keys, and
<strong>TValue</strong> is the type of the values (i.e., the data elements associated
with the keys). Keys must always be non-<strong>null</strong> &mdash; any attempt to use a
<strong>null</strong> key will result in an <strong>ArgumentNullException</strong>. A
<strong>Dictionary&lt;TKey,Â TValue&gt;</strong>&rsquo;s most basic <strong>public</strong> methods are:</p>
<ul>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.add?view=net-6.0#system-collections-generic-dictionary-2-add%28-0-1%29" target="_blank" rel="noopener"><strong>void Add(TKey key, TValue
value)</strong></a>:
Associates the given value with the given key. If there is already a
value associated with the given key, it throws an
<strong>ArgumentException</strong>.</li>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.remove?view=net-6.0#system-collections-generic-dictionary-2-remove%28-0-1@%29" target="_blank" rel="noopener"><strong>bool Remove(TKey
key)</strong></a>:
Removes the given key and its associated value from the dictionary,
and returns whether the key was found.</li>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.trygetvalue?view=net-6.0#system-collections-generic-dictionary-2-trygetvalue%28-0-1@%29" target="_blank" rel="noopener"><strong>bool TryGetValue(TKey key, out TValue?
value)</strong></a>:
Returns whether the given key is in the dictionary. If so, the


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/out-ref"><strong>out</strong>
parameter</a>
<code>value</code> is assigned the value associated with <code>key</code>; otherwise,
<code>value</code> is assigned the 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl/#default-value">default
value</a> for its
type.</li>
</ul>
<p>The above methods can be used for building and updating a
<strong>Dictionary</strong>, as well as for looking up values by their keys. It is
also possible to do updates and lookups using indexing. Specifically, a
key may be used as an index in a <strong>Dictionary</strong>, as if the
<strong>Dictionary</strong> were an array. For example, suppose that <code>dictionary</code> is
a <strong>Dictionary&lt;TKey,Â TValue&gt;</strong>, <code>k</code> is a <strong>TKey</strong>, and <code>v</code> is a
<strong>TValue</strong>. We can then do the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>dictionary[k] = v;
</span></span></code></pre></div><p>This will associate the value <code>v</code> with the key <code>k</code>, as the <strong>Add</strong>
method does; however, its behavior is slightly different if <code>k</code> already
has a value associated with it. Whereas the <strong>Add</strong> method would throw
an exception in this case, using the indexer will simply replace the
value previously associated with <code>k</code> by the new value <code>v</code>. Thus, we use
the <strong>Add</strong> method when we expect the key to be a new key for the
dictionary, but we use the indexer when we want to associate the value
with the key, regardless of whether the key is already in the
dictionary.</p>
<p>Likewise, we can use the indexer to look up a key:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>v = dictionary[k];
</span></span></code></pre></div><p>Again, the behavior is similar to the <strong>TryGetValue</strong> method, but
slightly different, as there is no <strong>bool</strong> in the above statement. When
using the indexer, if the key is not in the dictionary, it will throw a
<strong>KeyNotFoundException</strong>. Thus, we use the indexer when we expect the
key to be in the dictionary, but we use the <strong>TryGetValue</strong> method when
we don&rsquo;t know if the key is in the dictionary.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementing a Dictionary with a Linked List</h1></div>
<h2 id="implementing-a-dictionary-with-a-linked-list">Implementing a Dictionary with a Linked List</h2>
<p>One way of implementing a dictionary is to store all the keys and values
in a linked list. We want to do this in such a way that a key is stored
together with its associated value. To facilitate this, .NET
provides a structure


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.keyvaluepair-2?view=net-6.0" target="_blank" rel="noopener"><strong>KeyValuePair&lt;TKey,Â TValue&gt;</strong></a>
in the <strong>System.Collections.Generic</strong> namespace. This structure is used
simply for storing a key and a value. The type parameter <strong>TKey</strong> is
used to define the type of the keys, and the other type parameter
<strong>TValue</strong> is used to define the type of the values. It has two
<strong>public</strong> properties:</p>
<ul>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.keyvaluepair-2.key?view=net-6.0#system-collections-generic-keyvaluepair-2-key" target="_blank" rel="noopener"><strong>Key</strong></a>,
which gets the key stored; and</li>
<li>

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.keyvaluepair-2.value?view=net-6.0#system-collections-generic-keyvaluepair-2-value" target="_blank" rel="noopener"><strong>Value</strong></a>,
which gets the value stored.</li>
</ul>
<p>Note that neither of these properties can be set; i.e., the structure is
immutable. In order to set the key and value, we need to construct a new
instance using its 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.keyvaluepair-2.-ctor?view=net-6.0#system-collections-generic-keyvaluepair-2-ctor%28-0-1%29" target="_blank" rel="noopener">2-parameter
constructor</a>.
The first parameter to this constructor is the key, and the second is
the value.</p>
<p>Now that we have a way of storing keys and values together, we can
implement a <strong>Dictionary&lt;TKey,Â TValue&gt;</strong> with a linked list
comprised of instances of
<strong>LinkedListCell&lt;KeyValuePair&lt;TKey,Â TValue&gt;&gt;</strong>. Thus, each
cell of the list stores as its <strong>Data</strong> a
<strong>KeyValuePair&lt;TKey,Â TValue&gt;</strong> containing a key and its
associated value. To add a key and a value, we first need to search the
list for a cell containing that key. If we find such a cell, we either
replace the <strong>KeyValuePair</strong> in that cell with a new <strong>KeyValuePair</strong>
containing the given key and value, or we throw an exception, depending
on the specific behavior required. If we don&rsquo;t find such a cell, we
insert a new cell containing the given key and value. Because it doesn&rsquo;t
matter where we insert it, we might as well insert it at the beginning
of the list, as that is the easiest way. We can remove a key using
techniques described in &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/sieve-eratosthenes">Finding Prime
Numbers&rdquo;</a>.</p>
<p>The main disadvantage to this approach is that searching for a key is
expensive. For example, to search for a key that is not in the
dictionary, we need to examine every key in the dictionary. We would
like to improve on this performance.</p>
<p>One way of improving the performance of searching is to store the keys
in increasing order. Then as we search, if we see a key that is larger
than the key we are looking for, we can stop. However, recall that keys
can be of any type. For some types of keys, &ldquo;increasing order&rdquo; and
&ldquo;larger than&rdquo; make no sense.</p>
<p><span id="where"></span> C# does provide a way to restrict the types
that can be passed as type parameters to generic types. Specifically, we
can restrict the type <strong>TKey</strong> by writing the <strong>class</strong> statement as
follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dictionary</span>&lt;TKey, TValue&gt; <span style="color:#66d9ef">where</span> TKey : notnull, IComparable&lt;TKey&gt;
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></div><p>The <strong>where</strong> clause in this statement constrains <strong>TKey</strong> in two ways:</p>
<ul>
<li>
<p><code>notnull</code> constrains it to be a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value#nullable-types">non-nullable</a> type. The compiler doesn&rsquo;t actually enforce this constraint, but will give a warning if a nullable type is used for <strong>TKey</strong>.</p>
</li>
<li>
<p><code>IComparable&lt;TKey&gt;</code> constrains it to be a
subtype of


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.icomparable-1?view=net-6.0" target="_blank" rel="noopener"><strong>IComparable&lt;TKey&gt;</strong></a>.
Each subtype of <strong>IComparable&lt;TKey&gt;</strong> contains a method 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.icomparable-1.compareto?view=net-6.0#system-icomparable-1-compareto%28-0%29" target="_blank" rel="noopener"><strong>public int
CompareTo(TKey?
x)</strong></a>. If <code>a</code>
and <code>b</code> are of type <strong>TKey</strong>, then <code>a.CompareTo(b)</code> returns:</p>
<ul>
<li>A negative number if <code>a</code> is considered to be less than <code>b</code>;</li>
<li>0 if <code>a</code> is considered to be equal to <code>b</code>; or</li>
<li>A positive number if <code>a</code> is considered to be greater than <code>b</code> or if <code>b</code> is <strong>null</strong>.</li>
</ul>
</li>
</ul>
<p>We can therefore use this <strong>CompareTo</strong> method to keep the list in
increasing order.</p>
<p>Note that by constraining the key type in this way, we are making the
<strong>Dictionary&lt;TKey,Â TValue&gt;</strong> less general, as we may sometimes want
to use a key type that can&rsquo;t be ordered. On the other hand, there are
times when not only do we have a key type that can be ordered, but also
we need to access the keys in increasing order (for example, to print an
ordered list of keys with their values). In such cases, what we actually
need is an <em>ordered dictionary</em>, which both restricts the keys in this
way and provides a means of accessing them in increasing order. While we
won&rsquo;t consider the full implementation of an ordered dictionary here, it
is worth considering how we can improve performance by keeping the keys
in increasing order.</p>
<p>Let&rsquo;s now consider how to add a key and value to a linked list storing
keys in increasing order. We first need to find where the key belongs in
the ordering. Specifically, the cell whose <strong>Next</strong> property needs to be
changed (assuming the key is not already in the list) is the one that
must precede the new cell. We therefore need to find the last cell whose
key is less than the key we need to add. Note also that when we are
removing a key, the cell whose <strong>Next</strong> property needs to be changed is
the last cell whose key is less than the key we are removing.
Furthermore, if we are looking up a key, we need to look in the cell
that follows the last cell whose key is less than the key we are looking
for. This suggests that we should provide a <strong>private</strong> method to find
the last cell whose key is less than a given key, provided such a cell exists.</p>
<p>Before we can write such a method, however, we first need to address a
problem that occurs if we are trying to add, remove, or look up a key
that is smaller than all other keys in the list. In this case, there are
no cells containing keys smaller than the given key.</p>
<p>We can avoid needing a special case to deal with this problem if we
include a special <em>header cell</em> at the beginning of our linked list.
This cell will not contain any meaningful data, but it will always be
present. If we consider that its key is less than any other key (though
we will never actually examine its key), then there will always be at
least one key less than any given key. We can obtain this
header cell by initializing the linked list to contain a new cell containing the 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl#default-value">default</a> key-value pair,
rather than to <strong>null</strong>. Note that because the linked list will always contain at least the header cell, the reference to it should <em>not</em> be nullable.</p>
<p>A method to find the last cell containing a key less than a given key is
now straightforward. We initialize a variable to the first cell (i.e.,
the header cell), and set up a loop that iterates as long as the <em>next</em>
cell is non-<strong>null</strong> and contains a key less than the given key. Each
iteration advances to the next cell. When the loop terminates, we return
the cell we have reached.</p>
<p>To look up a key, we use the above method to find the last cell
containing a key less than the key we are looking for. If the next cell
is non-<strong>null</strong> and contains the key we are looking for, then we have
found it; otherwise, it cannot be in the list. To add a key and value,
we first need to look up the key in the same way. If we don&rsquo;t find it,
we insert a new cell containing this key and value following the last
cell containing a key less than this key. To remove a key, we proceed in
a similar way, but if we find the key, we remove this cell from the
list.</p>
<p>While keeping the keys in increasing order improves the performance of
many searches, the overall performance is still unsatisfactory for even
data sets of moderate size. In subsequent sections, we will explore ways
of improving this performance using various data structures.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementing a Dictionary with an Array-Like Structure</h1></div>
<h2 id="implementing-a-dictionary-with-an-array-like-structure">Implementing a Dictionary with an Array-Like Structure</h2>
<p>In 

<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/linked-list-impl/">the previous
section</a>,
we discussed how linked lists could be used to implement a dictionary.
An alternative to a linked list would be an array. A couple of other
alternatives are the non-generic


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.arraylist?view=net-6.0" target="_blank" rel="noopener"><strong>System.Collections.ArrayList</strong></a>
or the generic


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1?view=net-6.0" target="_blank" rel="noopener"><strong>System.Collections.Generic.List&lt;T&gt;</strong></a>.
These classes are similar to singly-dimensioned arrays, but they can
grow as needed. In this respect, they are like a


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.stringbuilder?view=net-6.0" target="_blank" rel="noopener"><strong>StringBuilder</strong></a>,
but instead of storing <strong>char</strong>s, an <strong>ArrayList</strong> stores <strong>object?</strong>s
and a <strong>List&lt;T&gt;</strong> stores instances of the type parameter <strong>T</strong>.
Elements can be retrieved from instances of these classes using
indexing, just like retrieving an element from an array.</p>
<p>Assuming we restrict the keys to be non-nullable sub-types of
<strong>IComparable&lt;TKey&gt;</strong>, where <strong>TKey</strong> is the key type, we can store
the keys in order in any of these data structures. We can then search
for a key in the same way as we described for a linked list. However,
such a search can be expensive - to search for a key that is larger than
any key in the dictionary, we need to examine all of the keys. We say
that the performance of this sequential search is in 
<span class="math align-center">$ O(n) $</span>, where 
<span class="math align-center">$ n $</span>
is the number of keys in the dictionary. This means that as 
<span class="math align-center">$ n $</span> grows,
the time required for the search is at worst proportional to 
<span class="math align-center">$ n $</span>.</p>
<p>We can improve this performance dramatically for an array or array-like
structure such as an <strong>ArrayList</strong> or a <strong>List&lt;T&gt;</strong> using a technique
called <em>binary search</em> (there isn&rsquo;t much we can do to improve the
performance of searching a linked list, as its structure restricts us to
traversing it sequentially). The idea is similar to what humans do when
looking for something in an ordered list such as a dictionary or an
index of a book. Rather than looking sequentially through the sequence,
we first look in the middle and narrow our search space depending on how
what we are looking for compares with what we are looking at. For
example, if we are looking for &ldquo;Les Miserables&rdquo;, we first look in the
middle of the sequence, where we might see &ldquo;Othello&rdquo;. Because &ldquo;Les
Miserables&rdquo; is alphabetically less than &ldquo;Othello&rdquo;, we can narrow the
search space to those titles less than &ldquo;Othello&rdquo;. In the middle of this
search space, we might find the title, &ldquo;Great Expectations&rdquo;. Because
&ldquo;Les Miserables&rdquo; is alphabetically greater than &ldquo;Great Expectations&rdquo;, we
narrow the search space to those titles greater than &ldquo;Great
Expectations&rdquo; and less than &ldquo;Othello&rdquo;. We continue narrowing in this way
until either we find &ldquo;Les Miserables&rdquo; or the search space becomes empty,
implying that the data set does not contain this title.</p>
<p>In a binary search, each lookup is as nearly as possible in the center
of the search space. This means that each time we look at an entry, we
either find what we are looking for, or we decrease the size of the
search space to at most half its previous size. For large data sets the
search space therefore shrinks rapidly. For example, if we start with
1,000,000 elements and repeatedly reduce the search space to at most
half its previous size, after 20 such reductions, we are left with
nothing. Likewise, if we start with 1,000,000,000 elements, 30 such
reductions in size lead to an empty search space.</p>
<p>To implement this algorithm, we need to keep track of the search space.
We will use two <strong>int</strong> variables, <code>start</code> and <code>end</code>. <code>start</code> will keep
track of the first index in the search space, while <code>end</code> will keep
track of the first index <em>past</em> the search space, as follows:</p>
<p><img src="binary-search-space.jpg" alt="The search space for binary search"></p>
<p>The way we have defined <code>end</code> may seem unnatural at first, but because
it simplifies various calculations, it is a common way of describing a
search space. For example, the number of elements in such a search space
is simply the difference between <code>end</code> and <code>start</code>, and to describe an
entire array, we can initialize <code>start</code> to 0 and <code>end</code> to the array&rsquo;s
length.</p>
<p>We then need a loop to iterate as long as this search space is nonempty
(we can return from inside this loop if we find what we are looking
for). On each iteration, we need to find the midpoint of the search
space. This midpoint is simply the average of <code>start</code> and <code>end</code> - i.e.,
their sum divided by 2. We need to be a bit careful here because we are
doing integer division, which may involve truncation. As a result, we may
not get exactly the average. In any case, we need to ensure that the
index we compute is within the search space - otherwise, we may not
reduce the search space, and an infinite loop will result. Because the
search space is nonempty, <code>start</code>Â &lt;Â <code>end</code>; hence, the true
average is strictly between <code>start</code> and <code>end</code>. If this average is not an
integer, the result will be rounded down to the next smaller integer.
Because <code>start</code> is an integer, this result will be no less than <code>start</code>,
but less than <code>end</code>; hence it will be in the search space.</p>
<p>Once we have computed this midpoint, we need to compare the key of the
element at that location with the key we are looking for. Recall that we
use the <strong>CompareTo</strong> method to do this comparison. Note that for large
key types, the <strong>CompareTo</strong> method can be expensive. For this reason,
it is best to call the <strong>CompareTo</strong> method only once for a given pair
of keys, and if necessary, save the result it returns in order to make
more than one comparison between this result and 0.</p>
<p>Thus, once we have obtained the result of the <strong>CompareTo</strong> method, we
need to determine which of the three cases we have. If the keys are
equal, we should be able to return. If the key we are looking for is
less than the key at the midpoint, we need to adjust <code>end</code>. Otherwise,
we need to adjust <code>start</code>. We are then ready for the next iteration of
the loop.</p>
<p>If the loop finishes without returning, then the search space is empty;
hence, the key we are looking for is not in the data set. However,
<code>start</code> will end up at the point at which this key could be inserted;
hence, the binary search can be used for both lookups and insertions.</p>
<p>Binary search is a very efficient way to search an ordered array-like
structure. In particular, it always makes no more than 
<span class="math align-center">$ O(\log n) $</span>
comparisons, where 
<span class="math align-center">$ n $</span> is the number of elements in the data set. The

<span class="math align-center">$ \log $</span> function grows very slowly - much more slowly than 
<span class="math align-center">$ n $</span>.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Trees</h1></div>
<h2 id="trees">Trees</h2>
<p>

<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/binary-search">Binary search</a> provides an efficient way to find elements in a sorted array-like structure. However, inserting or removing from an array-like structure can be expensive because all subsequent data elements must be moved to accommodate the change. On the other hand, linked lists can be modified efficiently, provided we have a reference to the cell preceding the insertion or deletion point. However, finding a cell can be expensive because the only way to search a linked list is to start at the front and work through it a cell at a time. We would like a data structure that provides both efficient lookups and efficient insertions and deletions.</p>
<p>To meet this challenge, we want a linked structure so that changes can be made cheaply by changing a few references. However, we want the individual cells in the structure to be arranged in a way that supports something like a binary search. The specific structure that we want is called a binary search tree, which is a particular kind of tree.
In this chapter, we will examine various kinds of trees. We will start by defining trees and developing a strategy for processing them. We will then present binary search trees, which will provide a partial solution to our challenge of finding a data structure to support efficient lookups, insertions, and deletions. However, there will be cases in which binary search trees have poor performance. We will therefore give a refinement known as AVL trees, which give good performance in all cases. We will then examine two other uses of trees - tries and priority queues.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Introduction to Trees</h1></div>
<h2 id="introduction-to-trees">Introduction to Trees</h2>
<p>A <em>tree</em> is a mathematical structure having a hierarchical nature. A
tree may be <em>empty</em>, or it may consist of:</p>
<ul>
<li>a <em>root</em>, and</li>
<li>zero or more <em>children</em>, each of which is also a tree.</li>
</ul>
<p>Consider, for example, a folder (or directory) in a Windows file system.
This folder and all its sub-folders form a tree &mdash; the root of the tree
is the folder itself, and its children are the folders directly
contained within it. Because a folder (with its
sub-folders) forms a tree, each of the sub-folders directly contained
within the folder are also trees. In this example, there are no empty
trees &mdash; an empty folder is a nonempty tree containing a root but no
children.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>We are only considering actual folders,
not shortcuts, symbolic links, etc.</p>
    </div>
</div>
<p>We have at least a couple of ways of presenting a tree graphically. One
way is as done within Windows Explorer:</p>
<p><img src="windows-tree.jpg" alt="A Windows file system tree"></p>
<p>Here, children are shown in a vertically-aligned list, indented under
the root. An alternative depiction is as follows:</p>
<p><img src="tree-example.jpg" alt="A tree"></p>
<p>Here, children are shown by drawing lines to them downward from the
root.</p>
<p>Other examples of trees include various kinds of search spaces. For
example, for a chess-playing program, the search for a move can be
performed on a game tree whose root is a board position and whose
children are the game trees formed from each board position reachable
from the root position by a single move. Also, in the sections that
follow, we will consider various data structures that form trees.</p>
<p>The .NET Framework provides access to the folders in a file system tree
via the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>DirectoryInfo</strong></a>
class, found in the <strong>System.IO</strong> namespace. This class has a


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.-ctor?view=netframework-4.7.2" target="_blank" rel="noopener">constructor</a>
that takes as its only parameter a <strong>string</strong> giving the path to a
folder (i.e., a directory) and constructs a <strong>DirectoryInfo</strong> describing
that folder. We can obtain such a <strong>string</strong> from the user using a


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.folderbrowserdialog?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>FolderBrowserDialog</strong></a>.
This class is similar to a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/file-dialogs">file
dialog</a> and can be added
to a form in the Design window in the same way. If <code>uxFolderBrowser</code> is
a <strong>FolderBrowserDialog</strong>, we can use it to obtain a <strong>DirectoryInfo</strong>
for a user-selected folder as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (uxFolderBrowser.ShowDialog() == DialogResult.OK)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    DirectoryInfo folder = <span style="color:#66d9ef">new</span> DirectoryInfo(uxFolderBrowser.SelectedPath);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Process the folder</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Various properties of a <strong>DirectoryInfo</strong> give information about the
folder; for example:</p>
<ul>
<li>

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.name?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Name</strong></a>
gets the name of the folder as a <strong>string</strong>.</li>
<li>

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.fullname?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>FullName</strong></a>
gets the full path of the folder as a <strong>string</strong>.</li>
<li>

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.parent?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Parent</strong></a>
gets the parent folder as a <strong>DirectoryInfo</strong>.</li>
</ul>
<p>In addition, its


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.getdirectories?view=netframework-4.7.2#System_IO_DirectoryInfo_GetDirectories" target="_blank" rel="noopener"><strong>GetDirectories</strong></a>
method takes no parameters and returns a <strong>DirectoryInfo[Â ]</strong> whose
elements describe the contained folders (i.e., the elements of the array
are the children of the folder). For example, if <code>d</code> refers to a
<strong>DirectoryInfo</strong> for the folder <strong>Ksu.Cis300.HelloWorld</strong> from the
figures above, then <strong>d.GetDirectories()</strong> would return a 3-element
array whose elements describe the folders <strong>bin</strong>, <strong>obj</strong>, and
<strong>Properties</strong>. The following method illustrates how we can write the
names of the folders contained within a given folder to a


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.io.streamwriter?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>StreamWriter</strong></a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Writes the names of the directories contained in the given directory </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// (excluding their sub-directories) to the given StreamWriter.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;dir&#34;&gt;The directory whose contained directories are to</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// be written.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;output&#34;&gt;The output stream to write to.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> WriteSubDirectories(DirectoryInfo dir, StreamWriter output)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span> (DirectoryInfo d <span style="color:#66d9ef">in</span> dir.GetDirectories())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        output.WriteLine(d.Name);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>For a more interesting problem, suppose we want to write to a
<strong>StreamWriter</strong> the structure of an entire folder, as follows:</p>
<pre>
Ksu.Cis300.HelloWorld
  bin
    Debug
    Release
  obj
    Debug
      TempPE
  Properties
</pre>
<p>We can break this task into the following steps:</p>
<ol>
<li>
<p>Write the name of the folder:</p>
<pre>Ksu.Cis300.HelloWorld</pre>
</li>
<li>
<p>Write the structure of each child folder, indented one level (i.e.,
two spaces):</p>
<ul>
<li>
<p>First child:</p>
<pre>
  bin
    Debug
    Release
</pre>
</li>
<li>
<p>Second child:</p>
<pre>
  obj
    Debug
      TempPE
</pre>
</li>
<li>
<p>Third child:</p>
<pre>
  Properties
</pre>
</li>
</ul>
</li>
</ol>
<p><span id="recursion"></span> Note that writing the structure of a child
folder is an instance of the original problem that we want to solve -
i.e., writing the structure of a folder. The only difference is that the
folders are different and the amount of indentation is different. We can
solve such a problem using a technique called <em>recursion</em>. Recursion
involves a method calling itself. Because of the recursive nature of a
tree (i.e., each child of a tree is also a tree), recursion is commonly
used in processing trees.</p>
<p>In order to use recursion, we first must define precisely what we want
our method to accomplish, wherever it might be called. For this problem,
we want to write to a given <strong>StreamWriter</strong> a list of all the folders
contained within a given folder, including the given folder itself and
all sub-folders in the entire tree, where each folder is indented two
spaces beyond its parent&rsquo;s indentation. Furthermore, the entire tree
below a given folder (i.e., excluding the folder itself) should be
listed below that folder, but before any folders that are outside that
folder. In order to write such a method, we need three parameters:</p>
<ul>
<li>a <strong>DirectoryInfo</strong> giving the root folder;</li>
<li>a <strong>StreamWriter</strong> where the output is to be written; and</li>
<li>an <strong>int</strong> giving the level of indentation for the root folder,
where each level of indentation is two spaces.</li>
</ul>
<p>Because the root folder must be written first, we begin there. We first
must write two blanks for every level of indentation, then write the
name of the root folder:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Writes the directory structure for the given root directory to the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// given StreamWriter, indenting all entries to the given indentation</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// level (incomplete). </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;root&#34;&gt;The root directory.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;output&#34;&gt;The output stream to which to write&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;level&#34;&gt;The current indentation level.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> WriteTree(DirectoryInfo root, StreamWriter output, <span style="color:#66d9ef">int</span> level)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; level; i++)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        output.Write(<span style="color:#e6db74">&#34;  &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    output.WriteLine(root.Name);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// We now need to write the sub-directories . . .</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We can get the children using <strong>root.GetDirectories()</strong>. Each of the
elements of the array this method returns will be a <strong>DirectoryInfo</strong>
whose structure we want to write. Looking back at how we described what
we want the <strong>WriteTree</strong> method to accomplish, we see that it is
exactly what we want to do for each child. We can therefore make a
recursive call for each child, specifying that the indentation level
should be one deeper than the level for <code>root</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Writes the directory structure for the given root directory to the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// given StreamWriter, indenting all entries to the given indentation</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// level (incomplete). </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;root&#34;&gt;The root directory.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;output&#34;&gt;The output stream to which to write&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;level&#34;&gt;The current indentation level.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> WriteTree(DirectoryInfo root, StreamWriter output, <span style="color:#66d9ef">int</span> level)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; level; i++)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        output.Write(<span style="color:#e6db74">&#34;  &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    output.WriteLine(root.Name);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span> (DirectoryInfo d <span style="color:#66d9ef">in</span> root.GetDirectories())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        WriteTree(d, output, level + <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This method accomplishes the desired task, provided the directory tree
does not contain symbolic links or anything similar that might be
represented using a <strong>DirectoryInfo</strong>, but is not an actual folder.
While it is possible to detect these and avoid following them, we will
not consider that here.</p>
<p>There is something that may seem mysterious about what we have done. In
order to convince ourselves that this method is written correctly, we
need to know that the recursive calls work correctly; however, the
recursive calls are to the same method. Our reasoning therefore seems
circular. However, we are actually using a mathematical principle from
the discipline of formally proving software correctness: in order to
prove that a recursive method meets its specification we may assume that
any recursive calls meet that same specification, provided that these
recursive calls are all on smaller problem instances.</p>
<p>The restriction that recursive calls are on smaller problem instances is
what avoids circular reasoning regarding recursion. We associate with
each problem instance a nonnegative integer describing its size. For a
problem involving a tree, this size is typically the number of <em>nodes</em>
in the tree, where a node is a root of some subtree. Because every node
in a child is also in the tree containing the child, but the root of the
containing tree is not in the child, a child is always smaller, provided
the tree is finite. (For directory trees, if the underlying file system
is a Windows system, the tree will be finite; however if it is a
non-Windows system, the trees may appear to Windows as being infinite -
the above method actually will not work in such cases.)</p>
<p>The validity of this strategy is based on the fact that for any method,
the following three statements cannot be simultaneously true:</p>
<ol>
<li>All of the method&rsquo;s recursive calls (if there are any) are on inputs
of smaller size, where the size is defined to be a nonnegative
integer.</li>
<li>When the method is given any input, if all of the method&rsquo;s recursive
calls produce correct results, then the method itself produces a
correct result.</li>
<li>There is at least one input for which the method does not produce a
correct result.</li>
</ol>
<p>Thus, if we can ensure that Statements 1 and 2 are true, then Statement
3 must be false; i.e., the method will be correct. To ensure Statement
2, we only need to concern ourselves with cases in which all recursive
calls produce correct results; hence, we simply assume that each
recursive call produces correct results.</p>
<p>To see why the three statements above cannot be simultaneously true,
let&rsquo;s first suppose Statement 3 is true. Let <em>S</em> be the set of all
inputs for which the method does not produce a correct result. Then
because Statement 3 is true, this set is nonempty. Because each input in
<em>S</em> has a nonnegative integer size, there is an input <em>I</em> in <em>S</em> with
smallest size. Now suppose Statement 1 is true. Then when the method is
run on input <em>I</em>, each of the recursive calls is given an input smaller
than <em>I</em>; hence, because <em>I</em> is a smallest input in <em>S</em>, none of these
inputs is in <em>S</em>. Therefore, each of the recursive calls produces a
correct result. We therefore have an input, <em>I</em> on which all of the
method&rsquo;s recursive calls produce correct results, but the method itself
does not produce a correct result. Statement 2 is therefore false.</p>
<p>Once we understand this strategy, recursion is as easy to use as calling
a method written by someone else. In fact, we should treat recursive
calls in exactly the same way &mdash; we need to understand what the recursive
call is supposed to accomplish, but not necessarily how it accomplishes
it. Furthermore, because processing trees typically involves solving the
same problem for multiple nodes in the tree, recursion is the natural
technique to use.</p>
<p>A recursive method for processing a tree will break down into cases,
each fitting into one of the following categories:</p>
<ul>
<li>A <em>base case</em> is a case that is simple enough that a recursive call
is not needed. Empty trees are always base cases, and sometimes
other trees are as well.</li>
<li>A <em>recursive case</em> is a case that requires one or more recursive
calls to handle it.</li>
</ul>
<p>A recursive method will always contain cases of <em>both</em> these types. If
there were no base cases, the recursion would never terminate. If there
were no recursive cases, the method wouldn&rsquo;t be recursive. Most
recursive methods are, in fact, structured as an <strong>if</strong>-statement, with
some cases being base cases and some cases being recursive cases.
However, for some recursive methods, such as <strong>WriteTree</strong> above, the
base cases aren&rsquo;t as obvious. Note that in that method, the recursive
call appears in a loop; hence, if the loop doesn&rsquo;t iterate (because the
array returned is empty), no recursive calls are made. Furthermore, if
the directory tree is finite, there must be some sub-directories that
have no children. When the <strong>GetDirectories</strong> method is called for such
a directory, it returns an empty array. These directories are therefore
the base cases.</p>
<p>The <strong>WriteTree</strong> method above is actually an example of processing an
entire tree using a <em>preorder traversal</em>. In a preorder traversal, the
root of the tree is processed first, then each of the children is
processed using a recursive call. This results in each node&rsquo;s being
processed prior to any node contained in any of its children. For the
<strong>WriteTree</strong> method, this means that the name of any folder is written
before any folders contained anywhere within it.</p>
<p>When debugging a recursive method, we should continue to think about it
in the same way &mdash; that is, assume that all recursive calls work
correctly. In order to isolate an error, we need to find an instance
that causes an error, but whose recursive calls all work correctly. It
will almost always be possible to find such a case that is small &mdash; in
fact, small cases tend to be the most likely ones to fit this
description. When debugging, it therefore makes sense to start with the
smallest cases, and slowly increase their size until one is found that
causes an error. When using the debugger to step through code, first
delete all breakpoints from this method, then use 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/debugger/#debugger-buttons">Step
Over</a> to step over
the recursive calls. If a recursive call doesn&rsquo;t work correctly, you
have found a smaller instance that causes an error &mdash; work on that
instance instead. Otherwise, you can focus on the top-level code for the
instance you are debugging. This is much easier to think about that
trying to work through different levels of recursion.</p>
<p>There are times when it is useful to know exactly what happens when a
recursive call (or any method call, for that matter) is made. Prior to
transferring control to the top of the method being called, all local
variables and the address of the current code location are pushed onto
the <em>call stack</em>. This call stack is just like any other stack, except
that it has a smaller amount of space available to it. You can, in fact,
examine the call stack when debugging &mdash; from the &ldquo;Debug&rdquo; menu, select
&ldquo;WindowsÂ -&gt;Â CallÂ Stack&rdquo;. This will open a window
showing the contents of the call stack. The line on top shows the line
of code currently ready for execution. Below it is the line that called
the current method, and below that line is the line that called that
method, etc. By double-clicking on an entry in the call stack, you can
use the other debugging tools to examine the values of the local
variables for the method containing that line of code. If this method is
recursive, the values displayed for the local variables are their values
at that level of recursion.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>This only applies to the values
stored in local variables - in particular, if a local variable is a


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference type</a>, the
value of the object to which it refers will not revert to its earlier
state. For example, if a local variable is an array, the debugger will
show the value of this variable to refer to the array that it referred
to at that point, but the values shown in that array will be its current
values.</p>
    </div>
</div>
<p>Once consequence of method calls using a call stack with limited space
available is that moderately deep recursion can fill up the call stack.
If this happens, a <strong>StackOverflowException</strong> will be thrown. Thus,
infinite recursion will always throw this exception, as will recursion
that is nested too deeply. For this reason, it is usually a bad idea to
use recursion on a 

<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists">linked
list</a> - if the list is
very long, the recursion will be nested too deeply. We must also take
care in using recursion with trees, as long paths in a tree can lead to
a <strong>StackOverflowException</strong>. Due to the branching nature of trees,
however, we can have very large trees with no long paths. In fact, there
are many cases in which we can be sure that a tree doesn&rsquo;t contain any
long paths. In such cases, recursion is often a useful technique.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Binary Search Trees</h1></div>
<h2 id="binary-search-trees">Binary Search Trees</h2>
<p>We motivated our discussion of trees by expressing a need for a linked
data structure that supports a binary search or something similar. We
will present such a data structure - a binary search tree - in this
section. While it will support efficient lookups, insertions, and
deletions for many applications, we will see that there are cases in
which it performs no better than a linked list. In 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">the next
section</a>, we will add some
refinements that will guarantee good performance.</p>
<p>Before we can define a binary search tree, we need to define a more
primitive structure, a <em>binary tree</em>. We will then use binary trees to
define binary search trees, and show how to build them and search them.
We will then show how to remove elements from them. We conclude this
section by presenting the <em>inorder traversal</em> algorithm, which processes
all the elements in a binary search tree in order.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Binary Trees</h1></div>
<h2 id="binary-trees">Binary Trees</h2>
<p>A <em>binary tree</em> is a tree in which each node has exactly two children,
either of which may be empty. For example, the following is a binary
tree:</p>
<p><img src="binary-tree.jpg" alt="A binary tree"></p>
<p>Note that some of the nodes above are drawn with only one child or no
children at all. In these cases, one or both children are empty. Note
that we always draw one child to the left and one child to the right. As
a result, if one child is empty, we can always tell which child is empty
and which child is not. We call the two children the <em>left</em> child and
the <em>right</em> child.</p>
<p>We can implement a single node of a binary tree as a data structure and
use it to store data. The implementation is simple, like 

<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/intro">the
implementation of a linked list
cell</a>. Let&rsquo;s call
this type <strong>BinaryTreeNode&lt;T&gt;</strong>, where <strong>T</strong> will be the type of data
we will store in it. We need three <strong>public</strong> properties:</p>
<ul>
<li>a <strong>Data</strong> property of type <strong>T</strong>;</li>
<li>a <strong>LeftChild</strong> property of type <strong>BinaryTreeNode&lt;T&gt;</strong>; and</li>
<li>a <strong>RightChild</strong> property of type <strong>BinaryTreeNode&lt;T&gt;</strong>.</li>
</ul>
<p>We can define both <strong>get</strong> and <strong>set</strong> accessors using the default
implementation for each of these properties. However, it is sometimes
advantageous to make this type immutable. In such a case, we would not
define any <strong>set</strong> accessors, but we would need to be sure to define a
constructor that takes three parameters to initialize these three
properties. While immutable nodes tend to degrade the performance
slightly, they also tend to be easier to work with. For example, with
immutable nodes it is impossible to build a structure with a cycle in
it.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Introduction to Binary Search Trees</h1></div>
<h2 id="introduction-to-binary-search-trees">Introduction to Binary Search Trees</h2>
<p>In this section and 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/remove">the
next</a>,
we will present a binary search tree as a data structure that can be
used to implement a


<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries">dictionary</a>
whose key type can be ordered. This implementation will provide
efficient lookups, insertions, and deletions in most cases; however,
there will be cases in which the performance is bad. In 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">a later
section</a>,
we will show how to extend this good performance to all cases.</p>
<p>A <em>binary search tree</em> is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/binary-trees">binary
tree</a> containing
key-value pairs whose keys can be ordered. Furthermore, the data items
are arranged such that the key in each node is:</p>
<ul>
<li>greater than all the keys in its left child; and</li>
<li>less than all the keys in its right child.</li>
</ul>
<p>Note that this implies that all keys must be unique. For example, the
following is a binary search tree storing integer keys (only the keys
are shown):</p>
<p><img src="binary-search-tree-ex.jpg" alt="A binary search tree"></p>
<p>The hierarchical nature of this structure allows us to do something like
a binary search to find a key. Suppose, for example, that we are looking
for 41 in the above tree. We first compare 41 with the key in the root.
Because 41Â &lt;Â 54, we can safely ignore the right child, as all
keys there must be greater than 54. We therefore compare 41 to the key
in the root of the left child. Because 41Â &gt;Â 23, we look in the
right child, and compare 41 to 35. Because 41Â &gt;Â 35, we look in
the right child, where we find the key we are looking for.</p>
<p>Note the similarity of the search described above to a binary search. It
isn&rsquo;t exactly the same, because there is no guarantee that the root is
the middle element in the tree &mdash; in fact, it could be the first or the
last. In many applications, however, when we build a binary search tree
as we will describe below, the root of the tree tends to be roughly the
middle element. When this is the case, looking up a key is very
efficient. 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">Later</a>, we will
show how we can build and maintain a binary search tree so that this is
always the case.</p>
<p>It isn&rsquo;t hard to implement the search strategy outlined above using a
loop. However, in order to reinforce the concept of recursion as a tree
processing technique, let&rsquo;s consider how we would implement the search
using recursion. The algorithm breaks into four cases:</p>
<ul>
<li>The tree is empty. In this case, the element we are looking for is
not present.</li>
<li>The key we are looking for is at the root - we have found what we
are looking for.</li>
<li>The key we are looking for is less than the key at the root. We then
need to look for the given key in the left child. Because this is a
smaller instance of our original problem, we can solve it using a
recursive call.</li>
<li>The key we are looking for is greater than the key at the root. We
then look in the right child using a recursive call.</li>
</ul>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>It is important to handle the case of an empty tree first, as the other
cases don&rsquo;t make sense if the tree is empty. In fact, if we are using
<strong>null</strong> to represent an empty binary search tree (as is fairly common),
we will get a <strong>NullReferenceException</strong> if we try to access the key
at the root.</p>
    </div>
</div>
<p>If we need to compare
elements using a


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.icomparable-1.compareto?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>CompareTo</strong></a>
method, it would be more efficient to structure the code so that this
method is only called once; e.g.,</p>
<ul>
<li>If the tree is emptyÂ .Â .Â .Â .</li>
<li>Otherwise:
<ul>
<li>Get the result of the comparison.</li>
<li>If the result is 0Â .Â .Â .Â .</li>
<li>Otherwise, if the result is negativeÂ .Â .Â .Â .</li>
<li>OtherwiseÂ .Â .Â .Â .</li>
</ul>
</li>
</ul>
<p>This method would need to take two parameters &mdash; the key we are looking
for and the tree we are looking in. This second parameter will actually
be a reference to a node, which will either be the root of the tree or
<strong>null</strong> if the tree is empty. Because this method requires a parameter
that is not provided to the <strong>TryGetValue</strong> method, this method would be
a <strong>private</strong> method that the <strong>TryGetValue</strong> method can call. This
<strong>private</strong> method would then return the node containing the key, or
<strong>null</strong> if this key was not found. The <strong>TryGetValue</strong> method can be
implemented easily using this <strong>private</strong> method.</p>
<p>We also need to be able to implement the <strong>Add</strong> method. Let&rsquo;s first
consider how to do this assuming we are representing our binary search
tree with immutable nodes. The first thing to observe is that because we
can&rsquo;t modify an immutable node, we will need to build a binary search
tree containing the nodes in the current tree, plus a new node
containing the new key and value. In order to accomplish this, we will
describe a <strong>private</strong> recursive method that returns the result of
adding a given key and value to a given binary search tree. The <strong>Add</strong>
method will then need to call this <strong>private</strong> method and save the
resulting tree.</p>
<p>We therefore want to design a <strong>private</strong> method that will take three
parameters:</p>
<ul>
<li>a binary search tree (i.e., reference to a node);</li>
<li>the key we want to add; and</li>
<li>the value we want to add.</li>
</ul>
<p>It will return the binary search tree that results from adding the given
key and value to the given tree.</p>
<p>This method again has four cases:</p>
<ul>
<li>The tree is empty. In this case, we need to construct a node
containing the given key and value and two empty children, and
return this node as the resulting tree.</li>
<li>The root of the tree contains a key equal to the given key. In this
case, we can&rsquo;t add the item - we need to throw an exception.</li>
<li>The given key is less than the key at the root. We can then use a
recursive call to add the given key and value to the left child. The
tree returned by the recursive call needs to be the left child of
the result to be returned by the method. We therefore construct a
new node containing the data and right child from the given tree,
but having the result of the recursive call as its left child. We
return this new node.</li>
<li>The given key is greater than the key at the root. We use a
recursive call to add it to the right child, and construct a new
node with the result of the recursive call as its right child. We
return this new node.</li>
</ul>
<p>Note that the above algorithm only adds the given data item when it
reaches an empty tree. Not only is this the most straightforward way to
add items, but it also tends to keep paths in the tree short, as each
insertion is only lengthening one path. 

<a href="http://cs.ksu.edu/~rhowell/viewer/index.html" target="_blank" rel="noopener">This
page</a> contains an
application that will
show the result of adding a key at a time to a binary search tree.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>The
keys in this application are treated as strings; hence, you can use
numbers if you want, but they will be compared as strings (e.g.,
&ldquo;10&rdquo;Â &lt;Â &ldquo;5&rdquo; because &lsquo;1&rsquo;Â &lt;Â &lsquo;5&rsquo;). For this reason, it is
usually better to use either letters, words, or integers that all have
the same number of digits.</p>
    </div>
</div>
<p>The above algorithm can be implemented in the same way if mutable binary
tree nodes are used; however, we can improve its performance a bit by
avoiding the construction of new nodes when recursive calls are made.
Instead, we can change the child to refer to the tree returned. If we
make this optimization, the tree we return will be the same one that we
were given in the cases that make recursive calls. However, we still
need to construct a new node in the case in which the tree is empty. For
this reason, it is still necessary to return the resulting tree, and we
need to make sure that the <strong>Add</strong> method always uses the returned tree.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Removing from a Binary Search Tree</h1></div>
<h2 id="removing-from-a-binary-search-tree">Removing from a Binary Search Tree</h2>
<p>Before we can discuss how to remove an element from a binary search
tree, we must first define exactly how we want the method to behave.
Consider first the case in which the tree is built from immutable nodes.
We are given a key and a binary search tree, and we want to return the
result of removing the element having the given key. However, we need to
decide what we will do if there is no element having the given key. This
does not seem to be exceptional behavior, as we may have no way of
knowing in advance whether the key is in the tree (unless we waste time
looking for it). Still, we might want to know whether the key was found.
We therefore need two pieces of information from this method - the
resulting tree and a <strong>bool</strong> indicating whether the key was found. In
order to accommodate this second piece of information, we make the
<strong>bool</strong> an 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/out-ref"><strong>out</strong> parameter</a>.</p>
<p>We can again break the problem into cases and use recursion, as we did
for 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/intro">adding an element</a>. However, removing an element is complicated by the fact that its node
might have two nonempty children. For example, suppose we want to remove
the element whose key is 54 in the following binary search tree:</p>
<p><img src="binary-search-tree-ex.jpg" alt="A binary search tree"></p>
<p>In order to preserve the correct ordering of the keys, we should replace
54 with either the next-smaller key (i.e., 41) or the next-larger key
(i.e., 64). By convention, we will replace it with the next-larger key,
which is the smallest key in its right child. We therefore have a
sub-problem to solve - removing the element with the smallest key from a
nonempty binary search tree. We will tackle this problem first.</p>
<p>Because we will not need to remove the smallest key from an empty tree,
we don&rsquo;t need to worry about whether the removal was successful - a
nonempty binary search tree always has a smallest key. However, we still
need two pieces of information from this method:</p>
<ul>
<li>the element removed (so that we can use it to replace the element to
be removed in the original problem); and</li>
<li>the resulting tree (so that we can use it as the new right child in
solving the original problem).</li>
</ul>
<p>We will therefore use an <strong>out</strong> parameter for the element removed, and
return the resulting tree.</p>
<p>Because we don&rsquo;t need to worry about empty trees, and because the
smallest key in a binary search tree is never larger than the key at the
root, we only have two cases:</p>
<ul>
<li>The left child is empty. In this case, there are no keys smaller
than the key at the root; i.e., the key at the root is the smallest.
We therefore assign the data at the root to the <strong>out</strong> parameter,
and return the right child, which is the result of removing the
root.</li>
<li>The left child is nonempty. In this case, there is a key smaller
than the key at the root; furthermore, it must be in the left child.
We therefore use a recursive call on the left child to obtain the
result of removing element with the smallest key from that child. We
can pass as the <strong>out</strong> parameter to this recursive call the <strong>out</strong>
parameter that we were given - the recursive call will assign to it
the element removed. We then need to construct a new node whose data
and right child are the same as in the given tree, but whose left
child is the tree returned by the recursive call. We return this
node.</li>
</ul>
<p>Having this sub-problem solved, we can now return to the original
problem. We again have four cases, but one of these cases breaks into
three sub-cases:</p>
<ul>
<li>The tree is empty. In this case the key we are looking for is not
present, so we set the <strong>out</strong> parameter to <strong>false</strong> and return an
empty tree.</li>
<li>The key we are looking for is at the root. In this case, we can set
the <strong>out</strong> parameter to <strong>true</strong> but in order to remove the
element, we have three sub-cases:
<ul>
<li>The left child is empty. We can then return the right child (the
result of removing the root).</li>
<li>The right child is empty. We can then return the left child.</li>
<li>Both children are nonempty. We must then obtain the result of
removing the smallest key from the right child. We then
construct a new node whose data is the element removed from the
right child, the left child is the left child of the given tree,
and the right child is the result of removing the smallest key
from that child. We return this node.</li>
</ul>
</li>
<li>The key we are looking for is less than the key at the root. We then
obtain the result of removing this key from the left child using a
recursive call. We can pass as the <strong>out</strong> parameter to this
recursive call the <strong>out</strong> parameter we were given and let the
recursive call set its value. We then construct a new node whose
data and right child are the same as in the given tree, but whose
left child is the tree returned by the recursive call. We return
this node.</li>
<li>The key we are looking for is greater than the key at the root. This
case is symmetric to the above case.</li>
</ul>
<p>As we did with adding elements, we can optimize the methods described
above for mutable nodes by modifying the contents of a node rather than
constructing new nodes.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Inorder Traversal</h1></div>
<h2 id="inorder-traversal">Inorder Traversal</h2>
<p>When we store keys and values in an ordered dictionary, we typically
want to be able to process the keys in increasing order. The
&ldquo;processing&rdquo; that we do may be any of a number of things - for example,
writing the keys and values to a file or adding them to the end of a
list. Whatever processing we want to do, we want to do it increasing
order of keys.</p>
<p>If we are implementing the dictionary using a binary search tree, this
may at first seem to be a rather daunting task. Consider traversing the
keys in the following binary search tree in increasing order:</p>
<p><img src="binary-search-tree-ex.jpg" alt="A binary search tree"></p>
<p>Processing these keys in order involves frequent jumps in the tree, such
as from 17 to 23 and from 41 to 54. It may not be immediately obvious
how to proceed. However, if we just think about it with the purpose of
writing a recursive method, it actually becomes rather straightforward.</p>
<p>As with most tree-processing algorithms, if the given tree is nonempty,
we start at the root (if it is empty, there are no nodes to process).
However, the root isn&rsquo;t necessarily the first node that we want to
process, as there may be keys that are smaller than the one at the root.
These key are all in the left child. We therefore want to process first
all the nodes in the left child, in increasing order of their keys. This
is a smaller instance of our original problem - a recursive call on the
left child solves it. At this point all of the keys less than the one at
the root have been processed. We therefore process the root next
(whatever the &ldquo;processing&rdquo; might be). This just leaves the nodes in the
right child, which we want to process in increasing order of their keys.
Again, a recursive call takes care of this, and we are finished.</p>
<p>The entire algorithm is therefore as follows:</p>
<ul>
<li>If the given tree is nonempty:
<ul>
<li>Do a recursive call on the left child to process all the nodes
in it.</li>
<li>Process the root.</li>
<li>Do a recursive call on the right child to process all the nodes
in it.</li>
</ul>
</li>
</ul>
<p>This algorithm is known as an <em>inorder traversal</em> because it processes
the root between the processing of the two children. Unlike 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/intro">preorder
traversal</a>, this
algorithm only makes sense for binary trees, as there must be exactly
two children in order for &ldquo;between&rdquo; to make sense.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>AVL Trees</h1></div>
<h2 id="avl-trees">AVL Trees</h2>
<p>Up to this point, we haven&rsquo;t addressed the performance of binary search
trees. In considering this performance, let&rsquo;s assume that the time
needed to compare two keys is bounded by some fixed constant. The main
reason we do this is that this cost doesn&rsquo;t depend on the number of keys
in the tree; however, it may depend on the sizes of the keys, as, for
example, if keys are <strong>string</strong>s. However, we will ignore this
complication for the purpose of this discussion.</p>
<p>Each of the methods we have described for finding a key, adding a key
and a value, or removing a key and its associated value, follows a
single path in the given tree. As a result, the time needed for each of
these methods is at worst proportional to the <em>height</em> of the tree,
where the height is defined to be the length of the longest path from
the root to any node. (Thus, the height of a one-node tree is <span style="white-space:nowrap">
<span class="math align-center">$ 0 $</span>,</span> because
no steps are needed to get from the root to the only node - the root
itself &mdash; and the height of a two-node tree is always <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span>) In other words,
we say that the worst-case running time of each of these methods is in
<span style="white-space:nowrap">
<span class="math align-center">$ O(h) $</span>,</span> where 
<span class="math align-center">$ h $</span> is the height of the tree.</p>
<p>Depending on the shape of the tree, 
<span class="math align-center">$ O(h) $</span> running time might be very
good. For example, it is possible to show that if keys are randomly
taken from a uniform distribution and successively added to an initially
empty binary search tree, the expected height is in <span style="white-space:nowrap">
<span class="math align-center">$ O(\log n) $</span>,</span>
where 
<span class="math align-center">$ n $</span> is the number of nodes. In this case, we would expect
logarithmic performance for lookups, insertions, and deletions. In fact,
there are many applications in which the height of a binary search tree
remains fairly small in comparison to the number of nodes.</p>
<p>On the other hand, such a shape is by no means guaranteed. For example,
suppose a binary search tree were built by adding the <strong>int</strong> keys 1
through 
<span class="math align-center">$ n $</span> in increasing order. Then 1 would go at the root, and 2
would be its right child. Each successive key would then be larger than
any key currently in the tree, and hence would be added as the right
child of the last node on the path going to the right. As a result, the
tree would have the following shape:</p>
<p><img src="bst-chain.jpg" alt="A badly-shaped binary search tree"></p>
<p>The height of this tree is <span style="white-space:nowrap">
<span class="math align-center">$ n - 1 $</span>;</span> consequently, lookups will
take time linear in <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>,</span> the number of elements, in the worst case. This
performance is comparable with that of a linked list. In order to
guaranteed good performance, we need a way to ensure that the height of
a binary search tree does not grow too quickly.</p>
<p>One way to accomplish this is to require that each node always has
children that differ in height by at most <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span> In order for this
restriction to make sense, we need to extend the definition of the
height of a tree to apply to an empty tree. Because the height of a
one-node tree is <span style="white-space:nowrap">
<span class="math align-center">$ 0 $</span>,</span> we will define the height of an empty tree to be <span style="white-space:nowrap">
<span class="math align-center">$ -1 $</span>.</span>
We call this restricted form of a binary search tree an <em>AVL tree</em>
(&ldquo;AVL&rdquo; stands for the names of the inventors, Adelson-Velskii and
Landis).</p>
<p>

<a href="http://people.cis.ksu.edu/~rhowell/viewer/minAVL.html" target="_blank" rel="noopener">This page</a>
contains a Java applet/application that displays an AVL tree of a given
height using as few nodes as possible. For example, the following screen
capture shows an AVL tree of height 
<span class="math align-center">$ 7 $</span> having a minimum number of nodes:</p>
<p><img src="min-avl.jpg" alt="An AVL tree with height 7 and minimum number of nodes"></p>
<p>As the above picture illustrates, a minimum of 
<span class="math align-center">$ 54 $</span> nodes are required for
an AVL tree to reach a height of <span style="white-space:nowrap">
<span class="math align-center">$ 7 $</span>.</span> In general, it can be shown that the
height of an AVL tree is at worst proportional to <span style="white-space:nowrap">
<span class="math align-center">$ \log n $</span>,</span> where 
<span class="math align-center">$ n $</span>
is the number of nodes in the tree. Thus, if we can maintain the shape
of an AVL tree efficiently, we should have efficient lookups and
updates.</p>
<p>Regarding the AVL tree shown above, notice that the tree is not as
well-balanced as it could be. For example, 
<span class="math align-center">$ 0 $</span> is at depth <span style="white-space:nowrap">
<span class="math align-center">$ 7 $</span>,</span> whereas <span style="white-space:nowrap">
<span class="math align-center">$ 52 $</span>,</span>
which also has two empty children, is only at depth <span style="white-space:nowrap">
<span class="math align-center">$ 4 $</span>.</span> Furthermore, it
is possible to arrange 
<span class="math align-center">$ 54 $</span> nodes into a binary tree with height as small
as <span style="white-space:nowrap">
<span class="math align-center">$ 5 $</span>.</span> However, maintaining a more-balanced structure would likely
require more work, and as a result, the overall performance might not be
as good. As we will show in what follows, the balance criterion for an
AVL tree can be maintained without a great deal of overhead.</p>
<p>The first thing we should consider is how we can efficiently determine
the height of a binary tree. We don&rsquo;t want to have to explore the entire
tree to find the longest path from the root &mdash; this would be way too
expensive. Instead, we store the height of a tree as a <strong>private</strong> field
in its root. If our nodes are mutable, we would also need to provide a
<strong>public</strong> property to give read/write access to this field. However,
such a setup places the burden of maintaining the heights on the user of
the binary tree node class. Using immutable nodes allows a much cleaner
(albeit slightly less efficient) solution. In what follows, we will show
how to modify the definition of an immutable binary tree node so that
whenever a binary tree is created from such nodes, the resulting tree is
guaranteed to satisfy the AVL tree balance criterion. As a result, user
code will be able to form AVL trees as if they were ordinary binary
search trees.</p>
<p>In order to allow convenient and efficient access to the height, even
for empty trees, we can provide a <strong>static</strong> method to take a binary
tree node as its only parameter and return its height. Making this
method <strong>static</strong> will allow us to handle empty (i.e., <strong>null</strong>) trees.
If the tree is empty, this method will return <span style="white-space:nowrap">
<span class="math align-center">$ -1 $</span>;</span> otherwise, it will
return the height stored in the tree. This method can be <strong>public</strong>.</p>
<p>We then can modify the constructor so that it initializes the height
field. Using the above method, it can find the heights of each child,
and add 
<span class="math align-center">$ 1 $</span> to the maximum of these values. This is the height of the node
being constructed. It can initialize the height field to this value, and
because the nodes are immutable, this field will store the correct
height from that point on.</p>
<p>Now that we have a way to find the height of a tree efficiently, we can
focus on how we maintain the balance property. Whenever an insertion or
deletion would cause the balance property to be violated for a
particular node, we perform a <em>rotation</em> at that node. Suppose, for
example, that we have inserted an element into a node&rsquo;s left child, and
that this operation causes the height of the new left child to be two
greater than the height of the right child (note that this same scenario
could have occurred if we had removed an element from the right child).
We can then rotate the tree using a <em>single rotate right</em>:</p>
<p><img src="single-rotate.jpg" alt="A single rotate right"></p>
<p>The tree on the left above represents the tree whose left child has a
height 
<span class="math align-center">$ 2 $</span> greater than its right child. The root and the lines to its
children are drawn using dashes to indicate that the root node has not
yet been constructed &mdash; we have at this point simply built a new left
child, and the tree on the left shows the tree that would be formed if
we were building an ordinary binary search tree. The circles in the
picture indicate individual nodes, and the triangles indicate arbitrary
trees (which may be empty). Note that the because the left child has a
height 
<span class="math align-center">$ 2 $</span> greater than the right child, we know that the left child
cannot be empty; hence, we can safely depict it as a node with two
children. The labels are chosen to indicate the order of the elements &mdash;
e.g., as &ldquo;a&rdquo; 
<span class="math align-center">$ \lt $</span> &ldquo;b&rdquo;, every key in tree <em>a</em> is less than the key in
node <em>b</em>. The tree on the right shows that tree that would be built by
performing this rotation. Note that the rotation preserves the order of
the keys.</p>
<p>Suppose the name of our class implementing a binary tree node is
<strong>BinaryTreeNode&lt;T&gt;</strong>, and suppose it has the following properties:</p>
<ul>
<li><strong>Data:</strong> gets the data stored in the node.</li>
<li><strong>LeftChild:</strong> gets the left child of the node.</li>
<li><strong>RightChild:</strong> gets the right child of the node.</li>
</ul>
<p>Then the following code can be used to perform a single rotate right:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Builds the result of performing a single rotate right on the binary tree</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// described by the given root, left child, and right child.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;root&#34;&gt;The data stored in the root of the original tree.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;left&#34;&gt;The left child of the root of the original tree.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;right&#34;&gt;The right child of the root of the original tree.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The result of performing a single rotate right on the tree described</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// by the parameters.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> BinaryTreeNode&lt;T&gt; SingleRotateRight(T root, 
</span></span><span style="display:flex;"><span>    BinaryTreeNode&lt;T&gt; left, BinaryTreeNode&lt;T&gt; right)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    BinaryTreeNode&lt;T&gt; newRight = 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> BinaryTreeNode&lt;T&gt;(root, left.RightChild, right);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> BinaryTreeNode&lt;T&gt;(left.Data, left.LeftChild, newRight);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Relating this code to the tree on the left in the picture above, the
parameter <code>root</code> refers to <em>d</em>, the parameter <code>left</code> refers to the tree
rooted at <em>b</em>, and the parameter <code>right</code> refers to the tree <em>e</em>. The
code first constructs the right child of the tree on the right and
places it in the variable <code>newRight</code>. It then constructs the entire tree
on the right and returns it.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Don&rsquo;t try to write the code for doing rotations without looking at pictures of the rotations.</p>
    </div>
</div>
<p>Now that we have seen what a single rotate right does and how to code
it, we need to consider whether it fixes the problem. Recall that we
were assuming that the given left child (i.e., the tree rooted at <em>b</em> in
the tree on the left above) has a height 
<span class="math align-center">$ 2 $</span> greater than the given right
child (i.e., the tree <em>e</em> in the tree on the left above). Let&rsquo;s suppose
the tree <em>e</em> has height <span style="white-space:nowrap">
<span class="math align-center">$ h $</span>.</span> Then the tree rooted at <em>b</em> has height
<span style="white-space:nowrap">
<span class="math align-center">$ h + 2 $</span>.</span> By the definition of the height of a tree, either <em>a</em>
or <em>c</em> (or both) must have height <span style="white-space:nowrap">
<span class="math align-center">$ h + 1 $</span>.</span> Assuming that every
tree we&rsquo;ve built so far is an AVL tree, the children of <em>b</em> must differ
in height by at most <span style="white-space:nowrap">
<span class="math align-center">$ 2 $</span>;</span> hence, <em>a</em> and <em>c</em> must both have a height of at
least 
<span class="math align-center">$ h $</span> and at most <span style="white-space:nowrap">
<span class="math align-center">$ h + 1 $</span>.</span></p>
<p>Given these heights, let&rsquo;s examine the tree on the right. We have
assumed that every tree we&rsquo;ve built up to this point is an AVL tree, so
we don&rsquo;t need to worry about any balances within <em>a</em>, <em>c</em>, or <em>e</em>.
Because <em>c</em> has either height 
<span class="math align-center">$ h $</span> or height 
<span class="math align-center">$ h + 1 $</span> and <em>e</em> has
height <span style="white-space:nowrap">
<span class="math align-center">$ h $</span>,</span> the tree rooted at <em>d</em> satisfies the balance criterion.
However, if <em>c</em> has height 
<span class="math align-center">$ h + 1 $</span> and <em>a</em> has height <span style="white-space:nowrap">
<span class="math align-center">$ h $</span>,</span> then
the tree rooted at <em>d</em> has height <span style="white-space:nowrap">
<span class="math align-center">$ h + 2 $</span>,</span> and the balance
criterion is <em>not</em> satisfied. On the other hand, if <em>a</em> has height
<span style="white-space:nowrap">
<span class="math align-center">$ h + 1 $</span>,</span> the tree rooted at <em>d</em> will have a height of either

<span class="math align-center">$ h + 1 $</span> or <span style="white-space:nowrap">
<span class="math align-center">$ h + 2 $</span>,</span> depending on the height of <em>c</em>. In these
cases, the balance criterion is satisfied.</p>
<p>We therefore conclude that a single rotate right will restore the
balance if:</p>
<ul>
<li>The height of the original left child (i.e., the tree rooted at <em>b</em>
in the above figure) is 
<span class="math align-center">$ 2 $</span> greater than the height of the original
right child (tree <em>e</em> in the above figure); and</li>
<li>The height of the left child of the original left child (tree <em>a</em> in
the above figure) is greater than the height of the original right
child (tree <em>e</em>).</li>
</ul>
<p>For the case in which the height of the left child of the original left
child (tree <em>a</em>) is <em>not</em> greater than the height of the original right
child (tree <em>e</em>), we will need to use a different kind of rotation.</p>
<p>Before we consider the other kind of rotation, we can observe that if an
insertion or deletion leaves the right child with a height 
<span class="math align-center">$ 2 $</span> greater
than the left child and the right child of the right child with a height
greater than the left child, the mirror image of a single rotate right
will restore the balance. This rotation is called a <em>single rotate
left</em>:</p>
<p><img src="single-rotate-left.jpg" alt="A single rotate left"></p>
<p>Returning to the case in which the left child has a height 
<span class="math align-center">$ 2 $</span> greater
than the right child, but the left child of the left child has a height
no greater than the right child, we can in this case do a <em>double rotate
right</em>:</p>
<p><img src="double-rotate.jpg" alt="A double rotate right"></p>
<p>Note that we have drawn the trees a bit differently by showing more
detail. Let&rsquo;s now show that this rotation restores the balance in this
case. Suppose that in the tree on the left, <em>g</em> has height <span style="white-space:nowrap">
<span class="math align-center">$ h $</span>.</span> Then the
tree rooted at <em>b</em> has height <span style="white-space:nowrap">
<span class="math align-center">$ h + 2 $</span>.</span> Because the height of <em>a</em>
is no greater than the height of <em>g</em>, assuming all trees we have built
so far are AVL trees, <em>a</em> must have height <span style="white-space:nowrap">
<span class="math align-center">$ h $</span>,</span> and the tree rooted at
<em>d</em> must have height 
<span class="math align-center">$ h + 1 $</span> (thus, it makes sense to draw it as
having a root node). This means that <em>c</em> and <em>e</em> both must have heights
of either 
<span class="math align-center">$ h $</span> or <span style="white-space:nowrap">
<span class="math align-center">$ h - 1 $</span>.</span> It is now not hard to verify that the
balance criterion is satisfied at <em>b</em>, <em>f</em>, and <em>d</em> in the tree on the
right.</p>
<p>The only remaining case is the mirror image of the above &mdash; i.e., that
the right child has height 
<span class="math align-center">$ 2 $</span> greater than the left child, but the height
of the right child of the right child is no greater than the height of
the left child. In this case, a <em>double rotate left</em> can be applied:</p>
<p><img src="double-rotate-left.jpg" alt="A double rotate left"></p>
<p>We have shown how to restore the balance whenever the balance criterion
is violated. Now we just need to put it all together in a <strong>public
static</strong> method that will replace the constructor as far as user code is
concerned. In order to prevent the user from calling the constructor
directly, we also need to make the constructor <strong>private</strong>. We want this
<strong>static</strong> method to take the same parameters as the constructor:</p>
<ul>
<li>The data item that can be stored at the root, provided no rotation
is required.</li>
<li>The tree that can be used as the left child if no rotation is
required.</li>
<li>The tree that can be used as the right child if no rotation is
required.</li>
</ul>
<p>The purpose of this method is to build a tree including all the given
nodes, with the given data item following all nodes in the left child
and preceding all nodes in the right child, but satisfying the AVL tree
balance criterion. Because this method will be the only way for user
code to build a tree, we can assume that both of the given trees satisfy
the AVL balance criterion. Suppose that the name of the <strong>static</strong>
method to get the height of a tree is <strong>Height</strong>, and that the names of
the methods to do the remaining rotations are <strong>SingleRotateLeft</strong>,
<strong>DoubleRotateRight</strong>, and <strong>DoubleRotateLeft</strong>, respectively. Further
suppose that the parameter lists for each of these last three methods
are the same as for <strong>SingleRotateRight</strong> above. The following method
can then be used to build AVL trees:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Constructs an AVL Tree from the given data element and trees. The heights of </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// the trees must differ by at most two. The tree built will have the same </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// inorder traversal order as if the data were at the root, left were the left </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// child, and right were the right child.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;data&#34;&gt;A data item to be stored in the tree.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;left&#34;&gt;An AVL Tree containing elements less than data.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;right&#34;&gt;An AVL Tree containing elements greater than data.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The AVL Tree constructed.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> BinaryTreeNode&lt;T&gt; GetAvlTree(T data, BinaryTreeNode&lt;T&gt; left,
</span></span><span style="display:flex;"><span>    BinaryTreeNode&lt;T&gt; right)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> diff = Height(left) - Height(right);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (Math.Abs(diff) &gt; <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (diff == <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (Height(left.LeftChild) &gt; Height(right))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> SingleRotateRight(data, left, right);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> DoubleRotateRight(data, left, right);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (diff == -<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (Height(right.RightChild) &gt; Height(left))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> SingleRotateLeft(data, left, right);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> DoubleRotateLeft(data, left, right);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> BinaryTreeNode&lt;T&gt;(data, left, right);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In order to build and maintain an AVL tree, user code simply needs to
call the above wherever it would have invoked the
<strong>BinaryTreeNode&lt;T&gt;</strong> constructor in building and maintaining an
ordinary binary search tree. The extra overhead is fairly minimal &mdash; each
time a new node is constructed, we need to check a few heights (which
are stored in fields), and if a rotation is needed, construct one or two
extra nodes. As a result, because the height of an AVL tree is
guaranteed to be logarithmic in the number of nodes, the worst-case
running times of both lookups and updates are in <span style="white-space:nowrap">
<span class="math align-center">$ O(\logÂ n) $</span>,</span> where

<span class="math align-center">$ n $</span> is the number of nodes in the tree.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Tries</h1></div>
<h2 id="tries">Tries</h2>
<p>

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">AVL trees</a> give us an efficient mechanism for storage and  retrieval, particularly if we need to be able to process the elements in order of their keys.  However, there are special cases where we can achieve better performance.  One of these special cases occurs when we need to store a list of words, as we might need in a word game, for example.  For such applications, a <em>trie</em> provides for even more efficient storage and retrieval.</p>
<p>In this section, we first define a trie and give a rather straightforward implementation.  We then show how to improve performance by implementing different nodes in different ways. We then examine the use of a preorder traversal to traverse a trie.  We conclude by discussing an example of using a trie in a word game.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Introduction to Tries</h1></div>
<h2 id="introduction-to-tries">Introduction to Tries</h2>
<p>A <em>trie</em> is a nonempty tree storing a set of words in the following way:</p>
<ul>
<li>Each child of a node is labeled with a character.</li>
<li>Each node contains a boolean indicating whether the labels in the
path from the root to that node form a word in the set.</li>
</ul>
<p>The word, &ldquo;trie&rdquo;, is taken from the middle of the word, &ldquo;retrieval&rdquo;, but
to avoid confusion, it is pronounced like &ldquo;try&rdquo; instead of like &ldquo;tree&rdquo;.</p>
<p>Suppose, for example, that we want to store the following words:</p>
<ul>
<li>ape</li>
<li>apple</li>
<li>cable</li>
<li>car</li>
<li>cart</li>
<li>cat</li>
<li>cattle</li>
<li>curl</li>
<li>far</li>
<li>farm</li>
</ul>
<p>A trie storing these words (where we denote a value of <strong>true</strong> for the
boolean with a <code>*</code>) is as follows:</p>
<p><img src="trie-example.jpg" alt="A trie"></p>
<p>Thus, for example, if we follow the path from the root through the
labels &lsquo;c&rsquo;, &lsquo;a&rsquo;, and &lsquo;r&rsquo;, we reach a node with a <strong>true</strong> boolean value
(shown by the <code>*</code> in the above picture); hence, &ldquo;car&rdquo; is in this set of
words. However, if we follow the path through the labels &lsquo;c&rsquo;, &lsquo;u&rsquo;, and
&lsquo;r&rsquo;, the node we reach has a <strong>false</strong> boolean; hence, &ldquo;cur&rdquo; is not in
this set. Likewise, if we follow the path through &lsquo;a&rsquo;, we reach a node
from which there is no child labeled &lsquo;c&rsquo;; hence, &ldquo;ace&rdquo; is not in this
set.</p>
<p>Note that each subtree of a trie is also a trie, although the &ldquo;words&rdquo; it
stores may begin to look a little strange. For example if we follow the
path through &lsquo;c&rsquo; and &lsquo;a&rsquo; in the above figure, we reach a trie that
contains the following &ldquo;words&rdquo;:</p>
<ul>
<li>&ldquo;ble&rdquo;</li>
<li>&ldquo;r&rdquo;</li>
<li>&ldquo;rt&rdquo;</li>
<li>&ldquo;t&rdquo;</li>
<li>&ldquo;ttle&rdquo;</li>
</ul>
<p>These are actually the <em>completions</em> of the original words that begin
with the prefix &ldquo;ca&rdquo;. Note that if, in this subtree, we take the path
through &rsquo;t&rsquo;, we reach a trie containing the following completions:</p>
<ul>
<li>&quot;&quot; [i.e., the empty string]</li>
<li>&ldquo;tle&rdquo;</li>
</ul>
<p>In particular, the empty string is a word in this trie. This motivates
an alternative definition of the boolean stored in each node: it
indicates whether the empty string is stored in the trie rooted at this
node. This definition may be somewhat preferable to the one given above,
as it does not depend on any context, but instead focuses entirely on
the trie rooted at that particular node.</p>
<p>One of the main advantages of a trie over an 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">AVL
tree</a> is the speed with
which we can look up words. Assuming we can quickly find the child with
a given label, the time we need to look up a word is proportional to the
length of the word, no matter how many words are in the trie. Note that
in looking up a word that is present in an AVL tree, we will at least
need to compare the given word with its occurrence in the tree, in
addition to any other comparisons done during the search. The time it
takes to do this one comparison is proportional to the length of the
word, as we need to verify each character (we actually ignored the cost
of such comparisons when we analyzed the performance of AVL trees).
Consequently, we can expect a significant performance improvement by
using a trie if our set of words is large.</p>
<p>Let&rsquo;s now consider how we can implement a trie. There are various ways
that this can be done, but we&rsquo;ll consider a fairly straightforward
approach in this section (we&rsquo;ll improve the implementation in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl">the next
section</a>). We
will assume that the words we are storing are comprised of only the 26
lower-case English letters. In this implementation, a single node will
contain the following <strong>private</strong> fields:</p>
<ul>
<li>A <strong>bool</strong> storing whether the empty string is contained in the trie
rooted at this node (or equivalently, whether this node ends a word
in the entire trie).</li>
<li>A 26-element array of tries storing the children, where element 0
stores the child labeled &lsquo;a&rsquo;, element 1 stores the child labeled
&lsquo;b&rsquo;, etc. If there is no child with some label, the corresponding
array element is <strong>null</strong>.</li>
</ul>
<p>Note that in this implementation, no <strong>char</strong>s or <strong>string</strong>s are
actually stored. We can see if a node has a child labeled by a given
<strong>char</strong> by finding the difference between that <strong>char</strong> and &lsquo;a&rsquo;, and
using that difference as the array index. For example, suppose the array
field is named <code>_children</code>, and suppose <code>label</code> is a <strong>char</strong> variable
containing a lower-case letter. Because <strong>char</strong> is technically a
numeric type, we can perform arithmetic with <strong>char</strong>s; thus, we can
obtain the child labeled by <code>label</code> by retrieving
<code>_children[labelÂ -Â 'a']</code>. More specifically, if <code>label</code>
contains &rsquo;d&rsquo;, then the difference, <code>labelÂ -Â 'a'</code> will be 3; hence,
the child with label &rsquo;d&rsquo; will be stored at index 3. We have therefore
achieved our goal of providing quick access to a child with a given
label.</p>
<p>Let&rsquo;s now consider how to implement a lookup. We can define a <strong>public</strong>
method for this purpose within the class implementing a trie node:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">bool</span> Contains(<span style="color:#66d9ef">string</span> s)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>This method does not need a trie node as a parameter because
the method will belong to a trie node. Thus, the method will be able to
access the node as


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/static-this"><strong>this</strong></a>, and may
access its <strong>private</strong> fields directly by their names.</p>
    </div>
</div>
<p>The method
consists of four cases:</p>
<ul>
<li><code>s</code> is the empty <strong>string</strong>. In this case the <strong>bool</strong> stored in
this node indicates whether it is a word in this trie; hence, we can
simply return this <strong>bool</strong>.</li>
<li>The first character of <code>s</code> is not a lower-case English letter (i.e.,
it is less than &lsquo;a&rsquo; or greater than &lsquo;z&rsquo;). Then <code>s</code> can&rsquo;t be stored
in this trie. In this case, we can return <strong>false</strong>.</li>
<li>The child labeled with the first character of <code>s</code> (obtained as
described above) is missing (i.e., is <strong>null</strong>). Then <code>s</code> isn&rsquo;t
stored in this trie. Again, we return <strong>false</strong>.</li>
<li>The child labeled with the first character of <code>s</code> is present (i.e.,
non-<strong>null</strong>). In this case, we need to determine whether the
substring following the first character of <code>s</code> is in the trie rooted
at the child we retrieved. This can be found using a recursive call
to this method within the child trie node. We return the result of
this recursive call.</li>
</ul>
<p>In order to be able to look up words, we need to be able to build a trie
to look in. We therefore need to be able to add words to a trie. It&rsquo;s
not practical to make a trie node immutable, as there is too much
information that would need to be copied if we need to replace a node
with a new one (we would need to construct a new node for each letter of
each word we added). We therefore should provide a <strong>public</strong> method
within the trie node class for the purpose of adding a word to the trie
rooted at this node:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Add(<span style="color:#66d9ef">string</span> s)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This time there are three cases:</p>
<ul>
<li><code>s</code> is the empty <strong>string</strong>. Then we can record this word by setting
the <strong>bool</strong> in this node to <strong>true</strong>.</li>
<li>The first character of <code>s</code> is not a lower-case English letter. Then
we can&rsquo;t add the word. In this case, we&rsquo;ll need to throw an
exception.</li>
<li>The first character is a lower-case English letter. In this case, we
need to add the substring following the first character of <code>s</code> to
the child labeled with the first letter. We do this as follows:
<ul>
<li>If the child labeled with the first letter of the word is
missing (i.e., <strong>null</strong>), we construct a new trie node and place
it in the array location for this child.</li>
<li>Now that we have a child labeled with the first letter, we can
add the substring following the first letter to this child by
making a recursive call.</li>
</ul>
</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Multiple Implementations of Children</h1></div>
<h2 id="multiple-implementations-of-children">Multiple Implementations of Children</h2>
<p>The trie implementation given in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a> offers very
efficient lookups - a word of length 
<span class="math align-center">$ m $</span> can be looked up in 
<span class="math align-center">$ O(m) $</span>
time, no matter how many words are in the trie. However, it wastes a
large amount of space. In a typical trie, a majority of the nodes will
have no more than one child; however, each node contains a 26-element
array to store its children. Furthermore, each of these arrays is
automatically initialized so that all its elements are <strong>null</strong>. This
initialization takes time. Hence, building a trie may be rather
inefficient as well.</p>
<p>We can implement a trie more efficiently if we can customize the
implementation of a node based on the number of children it has. Because
most of the nodes in a trie can be expected to have either no children
or only one child, we can define alternate implementations for these
special cases:</p>
<ul>
<li>For a node with no children, there is no need to represent any
children - we only need the <strong>bool</strong> indicating whether the trie
rooted at this node contains the empty <strong>string</strong>.</li>
<li>For a node with exactly one child, we maintain a single reference to
that one child. If we do this, however, we won&rsquo;t be able to infer
the child&rsquo;s label from where we store the child; hence, we also need
to have a <strong>char</strong> giving the child&rsquo;s label. We also need the
<strong>bool</strong> indicating whether the trie rooted at this node contains
the empty <strong>string</strong>.</li>
</ul>
<p>For all other nodes, we can use an implementation similar to the one
outlined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a>. We will still
waste some space with the nodes having more than one child but fewer
than 26; however, the amount of space wasted will now be much less.
Furthermore, in each of these three implementations, we can quickly
access the child with a given label (or determine that there is no such
child).</p>
<p>Conceptually, this sounds great, but we run into some obstacles as soon
as we try to implement this approach. Because we are implementing nodes
in three different ways, we need to define three different classes. Each
of these classes defines a different type. So how do we build a trie
from three different types of nodes? In particular, how do we define the
type of a child when that child may be any of three different types?</p>
<p>The answer is to use a C# construct called an <em>interface</em>. An interface
facilitates <em>abstraction</em> - hiding lower-level details in order to focus
on higher-level details. At a high level (i.e., ignoring the specific
implementations), these three different classes appear to be the same:
they are all used to implement tries of words made up of lower-case
English letters. More specifically, we want to be able to add a
<strong>string</strong> to any of these classes, as well as to determine whether they
contain a given <strong>string</strong>. An interface allows us to define a type that
has this functionality, and to define various sub-types that have
different implementations, but still have this functionality.</p>
<p>A simple example of an interface is


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.icomparable-1?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>IComparable&lt;T&gt;</strong></a>.
Recall from the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/linked-list-impl">&ldquo;Implementing a Dictionary with a Linked
List&rdquo;</a>,
that we can constrain the keys in a dictionary implementation to be of a
type that can be ordered by using a <strong>where</strong> clause on the <strong>class</strong>
statement, as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dictionary</span>&lt;TKey, TValue&gt; <span style="color:#66d9ef">where</span> TKey : IComparable&lt;TKey&gt;
</span></span></code></pre></div><p>The 

<a href="https://referencesource.microsoft.com/#mscorlib/system/icomparable.cs,3911354c40e0c30e" target="_blank" rel="noopener">source code for the <strong>IComparable&lt;T&gt;</strong>
interface</a>
has been posted by MicrosoftÂ®. The essential part of this definition
is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">IComparable</span>&lt;<span style="color:#66d9ef">in</span> T&gt;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> CompareTo(T other);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>(Don&rsquo;t worry about the <strong>in</strong> keyword with the type parameter in the
first line.) This definition defines the type <strong>IComparable&lt;T&gt;</strong> as
having a method <strong>CompareTo</strong> that takes a parameter of the generic type
<strong>T</strong> and returns an <strong>int</strong>. Note that there is no <strong>public</strong> or
<strong>private</strong> access modifier on the method definition. This is because
access modifiers are disallowed within interfaces &mdash; all definitions are
implicitly <strong>public</strong>. Note also that there is no actual definition of
the <strong>CompareTo</strong> method, but only a header followed by a semicolon.
Definitions of method bodies are also disallowed within interfaces &mdash; an
interface doesn&rsquo;t define the behavior of a method, but only how it
should be used (i.e., its parameter list and return type). For this
reason, it is impossible to construct an instance of an interface
directly. Instead, one or more sub-types of the interface must be
defined, and these sub-types must provide definitions for the behavior
of <strong>CompareTo</strong>. As a result, because the <strong>Dictionary&lt;TKey,
TValue&gt;</strong> class restricts type <strong>TKey</strong> to be a sub-type of
<strong>IComparable&lt;T&gt;</strong>, its can use the <strong>CompareTo</strong> method of any
instance of type <strong>TKey</strong>.</p>
<p>Now suppose that we want to define a class <strong>Fraction</strong> and use it as a
key in our dictionary implementation. We would begin the class
definition within Visual StudioÂ® as follows:</p>
<p><img src="interface-example1.jpg" alt="Beginning an interface"></p>
<p>At the end of the first line of the <strong>class</strong> definition, <code>: IComparable&lt;Fraction&gt;</code> indicates that the class being defined is a
subtype of <strong>IComparable&lt;Fraction&gt;</strong>. In general, we can list one or
more interface names after the colon, separating these names with
commas. Each name that we list requires that all of the methods,
properties, and 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/indexers">indexers</a>
from that interface must be fully defined within this class. If we hover
the mouse over the word, <code>IComparable&lt;Fraction&gt;</code>, a drop-down menu
appears. By selecting &ldquo;Implement interface&rdquo; from this menu, all of the
required members of the interface are provided for us:</p>
<p><img src="interface-example2.jpg" alt="Interface members are auto-filled"></p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>In order to implement a method specified in an interface, we
must define it as <strong>public</strong>.</p>
    </div>
</div>
<p>We now just need to replace the <strong>throw</strong>
with the proper code for the <strong>CompareTo</strong> method and fill in any other
class members that we need; for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Collections.Generic;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Linq;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Text;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Threading.Tasks;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Ksu.Cis300.Fractions
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// An immutable fraction whose instances can be ordered.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fraction</span> : IComparable&lt;Fraction&gt;
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets the numerator.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Numerator { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets the denominator.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Denominator { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Constructs a new fraction with the given numerator and denominator.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;numerator&#34;&gt;The numerator.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;denominator&#34;&gt;The denominator.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> Fraction(<span style="color:#66d9ef">int</span> numerator, <span style="color:#66d9ef">int</span> denominator)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (denominator &lt;= <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentException();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            Numerator = numerator;
</span></span><span style="display:flex;"><span>            Denominator = denominator;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Compares this fraction with the given fraction.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;other&#34;&gt;The fraction to compare to.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;returns&gt;A negative value if this fraction is less</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// than other, 0 if they are equal, or a positive value if this</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// fraction is greater than other.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> CompareTo(Fraction other)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">long</span> prod1 = (<span style="color:#66d9ef">long</span>)Numerator * other.Denominator;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">long</span> prod2 = (<span style="color:#66d9ef">long</span>)other.Numerator * Denominator;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> prod1.CompareTo(prod2);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Other class members</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></div>
  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>The <strong>CompareTo</strong> method above is <em>not</em> recursive. The
<strong>CompareTo</strong> method that it calls is a member of the <strong>long</strong>
structure, not the <strong>Fraction</strong> class.</p>
    </div>
</div>
<p>As we suggested above, interfaces can also include properties. For
example,


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.icollection-1?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>ICollection&lt;T&gt;</strong></a>
is a generic interface implemented by both arrays and the class
<span style="white-space:nowrap">

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>List&lt;T&gt;</strong></a>.</span>
This interface contains the following member (among others):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Count { <span style="color:#66d9ef">get</span>; }
</span></span></code></pre></div><p>This member specifies that every subclass must contain a property called
<strong>Count</strong> with a getter. At first, it would appear that an array does
not have such a property, as we cannot write something like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span>[] a = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> k = a.Count;  <span style="color:#75715e">// This gives a syntax error.</span>
</span></span></code></pre></div><p><span id="explicit-impl"></span> In fact, an array does contain a
<strong>Count</strong> property, but this property is available only when the array
is treated as an <strong>ICollection&lt;T&gt;</strong> (or an
<span style="white-space:nowrap">

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ilist-1?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>IList&lt;T&gt;</strong></a>,</span>
which is an interface that is a subtype of <strong>ICollection&lt;T&gt;</strong>, and is
also implemented by arrays). For example, we can write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span>[] a = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span>ICollection&lt;<span style="color:#66d9ef">int</span>&gt; col = a;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> k = col.Count;
</span></span></code></pre></div><p>or</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span>[] a = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> k = ((ICollection&lt;<span style="color:#66d9ef">int</span>&gt;)a).Count;
</span></span></code></pre></div><p>This behavior occurs because an array <em>explicitly implements</em> the
<strong>Count</strong> property. We can do this as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ExplicitImplementationExample</span>&lt;T&gt; : ICollection&lt;T&gt;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> ICollection&lt;T&gt;.Count
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Code to return the proper value</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Other class members</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Thus, if we create an instance of
<strong>ExplicitImplementationExample&lt;T&gt;</strong>, we cannot access its <strong>Count</strong>
property unless we either store it in a variable of type
<strong>ICollection&lt;T&gt;</strong> or cast it to this type. Note that whereas the
<strong>public</strong> access modifier is required when implementing an interface
member, neither the <strong>public</strong> nor the <strong>private</strong> access modifier is
allowed when <em>explicitly</em> implementing an interface member.</p>
<p>We can also include


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/indexers">indexers</a> within
interfaces. For example, the <strong>IList&lt;T&gt;</strong> interface is defined as
follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">IList</span>&lt;T&gt; : ICollection&lt;T&gt;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    T <span style="color:#66d9ef">this</span>[<span style="color:#66d9ef">int</span> index] { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> IndexOf(T item);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> Insert(<span style="color:#66d9ef">int</span> index, T item);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> RemoveAt(<span style="color:#66d9ef">int</span> index);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <code>: ICollection&lt;T&gt;</code> at the end of the first line specifies that
<strong>IList&lt;T&gt;</strong> is a subtype of <strong>ICollection&lt;T&gt;</strong>; thus, the interface
includes all members of <strong>ICollection&lt;T&gt;</strong>, plus the ones listed. The
first member listed above specifies an indexer with a get accessor and a
set accessor.</p>
<p>Now that we have seen a little of what interfaces are all about, let&rsquo;s
see how we can use them to provide three different implementations of
trie nodes. We first need to define an interface, which we will call
<strong>ITrie</strong>, specifying the two <strong>public</strong> members of 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">our previous
implementation of a trie
node</a>. We do, however,
need to make one change to the way the <strong>Add</strong> method is called. This
change is needed because when we add a <strong>string</strong> to a trie, we may need
to change the implementation of the root node. We can&rsquo;t simply change
the type of an object - instead, we&rsquo;ll need to construct a new instance
of the appropriate implementation. Hence, the <strong>Add</strong> method will need
to return the root of the resulting trie. Because this node may have any
of the three implementations, the return type of this method should be
<strong>ITrie</strong>. The <strong>ITrie</strong> interface is therefore as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// An interface for a trie.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">ITrie</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Determines whether this trie contains the given string.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;s&#34;&gt;The string to look for.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;Whether this trie contains s.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">bool</span> Contains(<span style="color:#66d9ef">string</span> s);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Adds the given string to this trie.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;s&#34;&gt;The string to add.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The resulting trie.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    ITrie Add(<span style="color:#66d9ef">string</span> s);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We will then need to define three classes, each of which implements the
above interface. We will use the following names for these classes:</p>
<ul>
<li><strong>TrieWithNoChildren</strong> will be used for nodes with no children.</li>
<li><strong>TrieWithOneChild</strong> will be used for nodes with exactly one child.</li>
<li><strong>TrieWithManyChildren</strong> will be used for all other nodes; this will
be the class described in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a> with a few
modifications.</li>
</ul>
<p>These three classes will be similar because they each will implement the
<strong>ITrie</strong> interface. This implies that they will each need a
<strong>Contains</strong> method and an <strong>Add</strong> method as specified by the interface
definition. However, the code for each of these methods will be
different, as will other aspects of the implementations. For example,
the <strong>TrieWithNoChildren</strong> and <strong>TrieWithOneChild</strong> classes need
<strong>private</strong> fields as described at the beginning of this section,
whereas the <strong>TrieWithManyChildren</strong> classes needs the same <strong>private</strong>
fields as outlined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a>. In each case,
whenever we need to refer to a trie, we will use the type <strong>ITrie</strong>.</p>
<p>The <strong>Add</strong> methods for both <strong>TrieWithNoChildren</strong> and
<strong>TrieWithOneChild</strong> will need to be able to construct instances of
<strong>TrieWithOneChild</strong> and <strong>TrieWithManyChildren</strong>, respectively, when
they have no room for the <strong>string</strong> being added. The instances they
will need to construct will need information regarding the <strong>string</strong>s
already being stored, plus the <strong>string</strong> being added; hence, we will
need to define constructors for both <strong>TrieWithOneChild</strong> and
<strong>TrieWithManyChildren</strong>. Each of these constructors will need to take
the <strong>string</strong> being added as one of its parameters. Because the
instance being constructed also needs to retain all of the information
stored in the implementation that calls it, additional parameters for
each of these constructors will correspond to the <strong>private</strong> fields of
the implementation that will need to call it.</p>
<p>Thus, the parameters for the <strong>TrieWithOneChild</strong> constructor will be a
<strong>string</strong> to be stored (i.e., the one being added) and a <strong>bool</strong>
indicating whether the empty <strong>string</strong> is also to be stored (i.e.,
because it was stored in the original <strong>TrieWithNoChildren</strong>).
Furthermore, because the empty <strong>string</strong> can always be added to a
<strong>TrieWithNoChildren</strong> without constructing a new node, this constructor
should never be passed the empty <strong>string</strong>. The constructor can then
operate as follows:</p>
<ul>
<li>If the given <strong>string</strong> is empty or begins with a character that is
not a lower-case English letter, throw an exception.</li>
<li>Initialize the <strong>bool</strong> field with the given <strong>bool</strong>.</li>
<li>Initialize the <strong>char</strong> field with the first character of the given
<strong>string</strong>.</li>
<li>Initialize the <strong>ITrie</strong> field with the result of constructing a new
<strong>TrieWithNoChildren</strong> and adding to it the substring of the given
<strong>string</strong> following the first character.</li>
</ul>
<p>The parameters for the <strong>TrieWithManyChildren</strong> constructor will need to
be a <strong>string</strong> to be stored (i.e., the one being added), a <strong>bool</strong>
indicating whether the empty <strong>string</strong> is to be stored, a <strong>char</strong>
giving the label of a child, and an <strong>ITrie</strong> giving a child (these last
three parameters will come from the original <strong>TrieWithOneChild</strong>). It
can use the last three parameters to initialize its <strong>bool</strong> field and
one of its children (computing the child&rsquo;s index as in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a>). It can then
use its own <strong>Add</strong> method to add the given <strong>string</strong>, as there will
always be room to add a <strong>string</strong> to this implementation; hence, it can
ignore the value returned by the <strong>Add</strong> method. Furthermore, because
the <strong>Add</strong> method does error checking on the given <strong>string</strong>, the only
error checking this constructor needs to do is on the given <strong>char</strong>, to
verify that it is a lower-case English letter.</p>
<p>The <strong>Contains</strong> method for <strong>TrieWithManyChildren</strong> can be exactly the
same as for the implementation in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a>. For the other
two classes, the structure of the method is similar. Specifically, the
empty <strong>string</strong> needs to be handled first and in exactly the same way,
as the empty <strong>string</strong> is represented in the same way in all three
implementations. Nonempty <strong>string</strong>s, however, are represented
differently, and hence need to be handled differently. This is easy for
the <strong>TrieWithNoChildren</strong> class, as this implementation can&rsquo;t store a
nonempty <strong>string</strong>; hence, its <strong>Contains</strong> method should simply return
<strong>false</strong> when the given <strong>string</strong> is nonempty. For <strong>TrieWithOneChild</strong>, we need to check to
see if the first character of the given <strong>string</strong> matches the child&rsquo;s
label. If so, we can recursively look for the remainder of the
<strong>string</strong> in that child. Otherwise, we should simply return <strong>false</strong>,
as this <strong>string</strong> is not in this trie.</p>
<p>The <strong>Add</strong> method for <strong>TrieWithManyChildren</strong> needs some modification
from the description given in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a>. First, the
method must return the resulting trie, which will always be <strong>this</strong>, as
this implementation never needs to be replaced by another to accommodate
a new <strong>string</strong>. The only other change that needs to be made is where a
new child is constructed - this new child should be a
<strong>TrieWithNoChildren</strong>.</p>
<p>The <strong>Add</strong> method for <strong>TrieWithNoChildren</strong> will need to handle the
empty <strong>string</strong> in the same way as the above <strong>Add</strong> method. However,
this implementation cannot store a nonempty <strong>string</strong>. In this case, it
will need to construct and return a new <strong>TrieWithOneChild</strong> containing
the <strong>string</strong> to be added and the <strong>bool</strong> stored in this node.</p>
<p>The <strong>Add</strong> method for <strong>TrieWithOneChild</strong> will need three cases:</p>
<ul>
<li>The empty <strong>string</strong>: This case can be handled in the same way as
for the other two classes.</li>
<li>A nonempty <strong>string</strong> whose first character matches the child&rsquo;s
label: The remainder of the <strong>string</strong> can be added to the child
using the child&rsquo;s <strong>Add</strong> method. Because this method may return a
different node, we need to replace the child with the value this
method returns. We can then return <strong>this</strong>, as we didn&rsquo;t need more
room for the given <strong>string</strong>.</li>
<li>A nonempty <strong>string</strong> whose first character does not match the
child&rsquo;s label. In this case, we need to return a new
<strong>TrieWithManyChildren</strong> containing the given <strong>string</strong> and all of
the information already being stored.</li>
</ul>
<p>Code that uses such a trie will need to refer to it as an <strong>ITrie</strong>
whenever possible. The only exception to this rule occurs when we are
constructing a new trie, as we cannot construct an instance of an
interface. Here, we want to construct the simplest implementation &mdash; a
<strong>TrieWithNoChildren</strong>. Otherwise, the only difference in usage as
compared to the implementation of 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">the previous
section</a> is that the
<strong>Add</strong> method now returns the resulting trie, whose root may be a
different object; hence, we will need to be sure to replace the current
trie with whatever the <strong>Add</strong> method returns.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Traversing a Trie</h1></div>
<h2 id="traversing-a-trie">Traversing a Trie</h2>
<p>As with other kinds of trees, there are occasions where we need to
process all the elements stored in a trie in order. Here, the elements
are strings, which are not stored explicitly in the trie, but implicitly
based on the labels of various nodes. Thus, an individual node does not
contain a <strong>string</strong>; however, if its <strong>bool</strong> has a value of <strong>true</strong>,
then the path to that node describes a string stored in the trie. We can
therefore associate this string with this node. Note that this string is
a prefix of any string associated with any node in any of this node&rsquo;s
children; hence, it is alphabetically less than any string found in any
of the children. Thus, in order to process each of the strings in
alphabetic order, we need to do a 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro">preorder
traversal</a>, which
processes the root before recursively processing the children.</p>
<p>In order to process the string associated with a node, we need to be
able to retrieve this string. Because we will have followed the path
describing this string in order to get to the node associated with it,
we can build this string on the way to the node and pass it as a
parameter to the preorder traversal of the trie rooted at this node.
Because we will be building this string a character at a time, to do
this efficiently we should use a


<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilders"><strong>StringBuilder</strong></a>
instead of a <strong>string</strong>. Thus, the preorder traversal method for a trie
will take a <strong>StringBuilder</strong> parameter describing the path to that
trie, in addition to any other parameters needed to process the strings
associated with its nodes.</p>
<p>Before we present the algorithm itself, we need to address one more
important issue. We want the <strong>StringBuilder</strong> parameter to describe the
path to the node we are currently working on. Because we will need to do
a recursive call on each child, we will need to modify the
<strong>StringBuilder</strong> to reflect the path to that child. In order to be able
to do this, we will need to ensure that the recursive calls don&rsquo;t change
the contents of the <strong>StringBuilder</strong> (or more precisely, that they undo
any changes that they make).</p>
<p>Because we are implementing a preorder traversal, the first thing we
will need to do is to process the root. This involves determining
whether the root is associated with a string contained in the trie, and
if so, processing that string. Determining whether the root is
associated with a contained string is done by checking the <strong>bool</strong> at
the root. If it is <strong>true</strong>, we can convert the <strong>StringBuilder</strong>
parameter to a <strong>string</strong> and process it by doing whatever processing
needs to be done for each string in our specific application.</p>
<p>Once we have processed the root, we need to recursively process each of
the children in alphabetic order of their labels. How we accomplish this
depends on how we are implementing the trie - we will assume the
implementation of 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl">the previous
section</a>. Because
this implementation uses three different classes depending on how many
children a node has, we will need to write three different versions of
the preorder traversal, one for each class:</p>
<ul>
<li>For a <strong>TrieWithNoChildren</strong>, there is nothing to do (after processing the root).</li>
<li>Because a <strong>TrieWithOneChild</strong> has exactly one child, we need a
single recursive call on this child. Before we make this call, we
will need to append the child&rsquo;s label to the <strong>StringBuilder</strong>.
Following the recursive call, we will need to remove the character
that we added by reducing its


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.text.stringbuilder.length?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Length</strong></a>
property by 1.</li>
<li>We handle a <strong>TrieWithManyChildren</strong> in a similar way as a
<strong>TrieWithOneChild</strong> , only we will need to iterate through the
array of children and process each non-<strong>null</strong> child with a
recursive call. Note that for each of these children, its label will
need to be appended to the <strong>StringBuilder</strong> prior to the recursive
call and removed immediately after. We can obtain the label of a
child by adding &lsquo;a&rsquo; to its array index and


<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stacks/#cast">casting</a> the result to a
<strong>char</strong>.</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Tries in Word Games</h1></div>
<h2 id="tries-in-word-games">Tries in Word Games</h2>
<p>One application of tries is for implementing word games such as
BoggleÂ® or ScrabbleÂ®. This section discusses how a trie can be
used to reduce dramatically the amount of time spent searching for words
in such games. We will focus specifically on Boggle, but the same
principles apply to other word games as well.</p>
<p>A Boggle game consists of either 16 or 25 dice with letters on their
faces, along with a tray containing a 4Â xÂ 4 or 5Â xÂ 5 grid
for holding these dice. The face of each die contains a single letter,
except that one face of one die contains &ldquo;Qu&rdquo;. The tray has a large
cover such that the dice can be placed in the cover and the tray placed
upside-down on top of the cover. The whole thing can then be shaken,
then inverted so that each die ends up in a different grid cell, forming
a random game board such as:</p>
<p><img src="boggle.jpg" alt="A Boggle game board"></p>
<p>Players are then given a certain amount of time during which they
compete to try to form as many unique words as they can from these
letters. The letters of a word must be adjacent either horizontally,
vertically, or diagonally, and no die may be used more than once in a
single word. There is a minimum word length, and longer words are worth
more points. For example, the above game board contains the words,
&ldquo;WITCH&rdquo;, &ldquo;ITCH&rdquo;, &ldquo;PELLET&rdquo;, &ldquo;TELL&rdquo;, and &ldquo;DATA&rdquo;, among many others.</p>
<p><img src="boggle2.jpg" alt="Words on a Boggle game board"></p>
<p>Suppose we want to build a program that plays Boggle against a human
opponent. The program would need to look for words on a given board. The
dictionary of words can of course be stored in a trie. In what follows,
we will show how the structure of a trie can be particularly helpful in
guiding this search so that words are found more quickly.</p>
<p>We can think of a search from a given starting point as a traversal of a
tree. The root of the tree is the starting point, and its children are
searches starting from adjacent dice. We must be careful, however, to
include in such a tree only those adjacent dice that do not already
occur on the path to the given die. For example, if we start a search at
the upper-left corner of the above board, its children would be the
three adjacent dice containing &ldquo;I&rdquo;, &ldquo;C&rdquo;, and &ldquo;A&rdquo;. The children of &ldquo;I&rdquo;,
then, would not include &ldquo;H&rdquo; because it is already on the path to &ldquo;I&rdquo;.
Part of this tree would look like this:</p>
<p><img src="boggle-tree.jpg" alt="A part of a tree representing a Boggle search space"></p>
<p>Note that this tree is not a data structure - it need not be explicitly
stored anywhere. Rather, it is a mathematical object that helps us to
design an algorithm for finding all of the words. Each word on the board
is simply a path in this tree starting from the root. We can therefore
traverse this tree in much the same way as we outlined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/traversing">the previous
section</a> for tries.
For each node in the tree, we can look up the path leading to that node,
and output it if it is a word in the dictionary.</p>
<p>In order to be able to implement such a traversal, we need to be able to
find the children of a node. These children are the adjacent cells that
are not used in the path to the node. An efficient way to keep track of
the cells used in this path is with a <strong>bool[Â ,Â ]</strong> of the same
size as the Boggle board - a value of <strong>true</strong> in this array will
indicate that the corresponding cell on the board has been used in the
current path. The children of a node are then the adjacent cells whose
entries in this array are <strong>false</strong>.</p>
<p>A preorder traversal of this tree will therefore need the following
parameters (and possibly others, depending on how we want to output the
words found):</p>
<ul>
<li>The row index of the current cell.</li>
<li>The column index of the current cell.</li>
<li>The <strong>bool[Â ,Â ]</strong> described above. The current cell will
have a <strong>false</strong> entry in this array.</li>
<li>A <strong>StringBuilder</strong> giving the letters on the path up to, but not
including, the current cell.</li>
</ul>
<p>The preorder traversal will first need to update the cells used by
setting the location corresponding to the current cell to <strong>true</strong>.
Likewise, it will need to update the <strong>StringBuilder</strong> by appending the
contents of the current cell. Then it will need to process the root by
looking up the contents of the <strong>StringBuilder</strong> - if this forms a word,
it should output this word. Then it should process the children: for
each adjacent cell whose entry in the <strong>bool[Â ,Â ]</strong> is
<strong>false</strong>, it should make a recursive call on that cell. After all the
children have been processed, it will need to return the
<strong>bool[Â ,Â ]</strong> and the <strong>StringBuilder</strong> to their
earlier states by setting the array entry back to <strong>false</strong> and removing
the character(s) appended earlier.</p>
<p>Once such a method is written, we can call it once for each cell on the
board. For each of these calls, all entries in the <strong>bool[Â ,Â ]</strong>
should be false, and the <strong>StringBuilder</strong> should be empty.</p>
<p>While the algorithm described above will find all the words on a Boggle
board, a 5Â xÂ 5 board will require quite a while for the algorithm
to process. While this might be acceptable if we are implementing a game
that humans can compete with, from an algorithmic standpoint, we would
like to improve the performance. (In fact, there are probably better
ways to make a program with which humans can compete, as this search
will only find words that begin near the top of the board.)</p>
<p>We can begin to see how to improve the performance if we observe the
similarity between the trees we have been discussing and a trie
containing the word list. Consider, for example, a portion of the child
labeled &lsquo;h&rsquo; in a trie representing a large set of words:</p>
<p><img src="trie-portion.jpg" alt="A portion of a trie."></p>
<p>We have omitted some of the children because they are irrelevant to the
search we are performing (e.g., there is no die containing &ldquo;E&rdquo; adjacent
to &ldquo;H&rdquo; on the above game board). Also, we are assuming a minimum word
length of 4; hence, &ldquo;ha&rdquo;, &ldquo;hi&rdquo;, and &ldquo;hit&rdquo; are not shown as words in this
trie.</p>
<p>Notice the similarity between the trie portion shown above and the tree
shown earlier. The root of the tree has children representing dice
containing &ldquo;I&rdquo; and &ldquo;A&rdquo;, and the former node has children representing
dice containing &ldquo;T&rdquo;, &ldquo;C&rdquo;, and &ldquo;A&rdquo;; likewise, though they are listed in a
different order, the trie has children labeled &lsquo;i&rsquo; and &lsquo;a&rsquo;, and the
former node has children labeled &rsquo;t&rsquo;, &lsquo;c&rsquo;, and &lsquo;a&rsquo;.</p>
<p>What is more important to our discussion, however, is that the trie does
not have a child labeled &lsquo;c&rsquo;, as there is no English word beginning with
&ldquo;hc&rdquo;. Similarly, the child labeled &lsquo;i&rsquo; does not have a child labeled
&lsquo;i&rsquo;, as there is no English word beginning with &ldquo;hii&rdquo;. If there are no
words in the word list beginning with these prefixes, there is no need
to search the subtrees rooted at the corresponding nodes when doing the
preorder traversal. Using the trie to prune the search in this way ends
up avoiding many subtrees that don&rsquo;t lead to any words. As a result,
only a small fraction of the original tree is searched.</p>
<p>In order to take advantage of the trie in this way, we need a method in
the trie implementation to return the child having a given label, or
<strong>null</strong> if there is no such child. Alternatively, we might provide a
method that takes a <strong>string</strong> and returns the trie that this <strong>string</strong>
leads to, or <strong>null</strong> if there is no such trie (this method would make
it easier to handle the die containing &ldquo;Qu&rdquo;). Either way, we can then
traverse the trie as we are doing the preorder traversal described
above, and avoid searching a subtree whenever the trie becomes null.</p>
<p>This revised preorder traversal needs an extra parameter - a trie giving
all completions of words beginning with the prefix given by the
<strong>StringBuilder</strong> parameter. We will need to ensure that this parameter
is never <strong>null</strong>. The algorithm then proceeds as follows:</p>
<ul>
<li>From the given trie, get the subtrie containing the completions of
words beginning with the contents of the current cell.</li>
<li>If this subtrie is not <strong>null</strong>:
<ul>
<li>Set the location in the <strong>bool[Â ,Â ]</strong> corresponding to
the current cell to <strong>true</strong>.</li>
<li>Append the contents of the current cell to the
<strong>StringBuilder</strong>.</li>
<li>If the subtrie obtained above contains the empty <strong>string</strong>,
output the contents of the <strong>StringBuilder</strong> as a word found.</li>
<li>Recursively traverse each adjacent cell whose corresponding
entry in the <strong>bool[Â ,Â ]</strong> is <strong>false</strong>. The recursive
calls should use the subtrie obtained above.</li>
<li>Set the location in the <strong>bool[Â ,Â ]</strong> corresponding to
the current cell to <strong>false</strong>.</li>
<li>Remove the contents of the current cell from the end of the
<strong>StringBuilder</strong> (i.e., decrease its <strong>Length</strong> by the
appropriate amount).</li>
</ul>
</li>
</ul>
<p>We would then apply the above algorithm to each cell on the board. For
each cell, we would use a <strong>bool[Â ,Â ]</strong> whose entries are all
<strong>false</strong>, an empty <strong>StringBuilder</strong>, and the entire trie. Note that we
have designed the preorder traversal so that it leaves each of these
parameters unchanged; hence, we only need to initialize them once. The
resulting search will find all of the words on the board quickly.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Priority Queues</h1></div>
<h2 id="priority-queues">Priority Queues</h2>
<p>Often we need a data structure that supports efficient storage of data items and their subsequent retrieval in order of some pre-determined <em>priority</em>.  We have already seen two instances of such data structures: stacks and queues.  With a stack, the later the item is stored, the higher its priority. With a queue, the earlier the item is stored, the higher its
priority.  More generally, we would like to be able to set priorities arbitrarily, in a way that may be unrelated to the order in which they were stored.</p>
<p>The general name for such a data structure is a <em>priority queue</em>.  Priority queues typically  support the following operations:</p>
<ul>
<li>Adding a data element, together with a priority.</li>
<li>Obtaining the number of data elements currently in the structure.</li>
<li>Obtaining the maximum of all priorities of elements in the structure.</li>
<li>Removing a data element having maximum priority.</li>
</ul>
<p>Obviously, the last two operations above can only be done when the structure is nonempty.  A variation on the above focuses on minimum priority rather than maximum priority.  This variation is called a <em>min-priority queue</em>.  Because we will later cover applications of min-priority queues, we will focus on this variation in this section.  In the sub-sections that follow, we will first consider a general structure that can be used in various ways to give efficient priority queue implementations.  We will then look at one specific implementation.  We will conclude by giving an example of how min-priority queues are used in file compression algorithms.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Heaps</h1></div>
<h2 id="heaps">Heaps</h2>
<p>A common structure for implementing a priority queue is known as a
<em>heap</em>. A heap is a tree whose nodes contain elements with priorities
that can be ordered. Furthermore, if the heap is nonempty, its root
contains the maximum priority of any node in the heap, and each of its
children is also a heap. Note that this implies that, in any subtree,
the maximum priority is at the root. We define a <em>min-heap</em> similarly,
except that the minimum priority is at the root. Below is an example of
a min-heap with integer priorities (the data elements are not shown &mdash;
only their priorities):</p>
<p><img src="heap.jpg" alt="A min-heap."></p>
<p>Note that this structure is different from a binary search tree, as
there are elements in the left child that have larger priorities than
the root. Although some ordering is imposed on the nodes (i.e.,
priorities do not decrease as we go down a path from the root), the
ordering is less rigid than for a binary search tree. As a result, there
is less overhead involved in maintaining this ordering; hence, a
min-heap tends to give better performance than an AVL tree, which could
also be used to implement a min-priority queue. Although the definition
of a heap does not require it, the implementations we will consider will
be binary trees, as opposed to trees with an arbitrary number of
children.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>The heap data structure is
unrelated to the pool of memory from which instances of reference types
are constructed &mdash; this also, unfortunately, is called a heap.</p>
    </div>
</div>
<p>One advantage to using a min-heap to implement a min-priority queue is
fairly obvious &mdash; an element with minimum priority is always at the root
if the min-heap is nonempty. This makes it easy to find the minimum
priority and an element with this priority. Let&rsquo;s consider how we might
remove an element with minimum priority. Assuming the min-heap is
nonempty, we need to remove the element at the root. Doing so leaves us
with two min-heaps (either of which might be empty). To complete the
removal, we need a way to merge two min-heaps into one. Note that if we
can do this, we also have a way of adding a new element: we form a
1-node min-heap from the new element and its priority, then merge this
min-heap with the original one.</p>
<p>Let us therefore consider the problem of merging two min-heaps into one.
If either min-heap is empty, we can simply use the other one. Suppose
that both are nonempty. Then the minimum priority of each is located at
its root. The minimum priority overall must therefore be the smaller of
these two priorities. Let <em>s</em> denote the heap whose root has the smaller
priority and <em>b</em> denote the heap whose root has the larger priority.
Then the root of <em>s</em> should be the root of the resulting min-heap.</p>
<p>Now that we have determined the root of the result, let&rsquo;s consider what
we have left. <em>s</em> has two children, both of which are min-heaps, and <em>b</em>
is also a min-heap. We therefore have three min-heaps, but only two
places to put them - the new left and right children of <em>s</em>. To reduce
the number of min-heaps to two, we can merge two of them into one. This
is simply a recursive call.</p>
<p>We have therefore outlined a general strategy for merging two min-heaps.
There two important details that we have omitted, though:</p>
<ul>
<li>Which two min-heaps do we merge in the recursive call?</li>
<li>Which of the two resulting min-heaps do we make the new left child
of the new root?</li>
</ul>
<p>There are various ways these questions can be answered. Some ways lead
to efficient implementations, whereas others do not. For example, if we
always merge the right child of <em>s</em> with <em>b</em> and make the result the new
right child of the new root, it turns out that all of our min-heaps will have
empty left children. As a result, in the worst case, the time needed to
merge two min-heaps is proportional to the total number of elements in
the two min-heaps. This is poor performance. In 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/leftist-heaps">the next
section</a> we will
consider a specific implementation that results in a worst-case running
time proportional to the logarithm of the total number of nodes.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Leftist Heaps</h1></div>
<h2 id="leftist-heaps">Leftist Heaps</h2>
<p>One efficient way to complete the merge algorithm outlined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/heaps">the
previous section</a> revolves
around the concept of the <em>null path length</em> of a tree, which is defined
to be 
<span class="math align-center">$ 0 $</span> for empty trees, or one more than the minimum of the null path
lengths of the children for nonempty trees. Another way to understand
this concept is that it gives the minimum number of steps needed to get
from the root to an empty subtree. For an empty tree, there is no root,
so we somewhat arbitrarily define the null path length to be <span style="white-space:nowrap">
<span class="math align-center">$ 0 $</span>.</span> For
single-node trees or binary trees with at least one empty child, the
null path length is 
<span class="math align-center">$ 1 $</span> because only one step is needed to reach an empty
subtree.</p>
<p>One reason that the null path length is important is that it can be
shown that any binary tree with 
<span class="math align-center">$ n $</span> nodes has a null path length that is
no more than <span style="white-space:nowrap">
<span class="math align-center">$ \lg(n + 1) $</span>.</span> Furthermore, recall that in the merging
strategy outlined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/heaps">the previous
section</a>, there is some
flexibility in choosing which child of a node will be used in the
recursive call. Because the strategy reaches a base case when one of the
min-heaps is empty, the algorithm will terminate the most quickly if we
do the recursive call on the child leading us more quickly to an empty
subtree &mdash; i.e., if we use the child with smaller null path length.
Because this length is logarithmic in the number of nodes in the
min-heap, this choice will quickly lead us to the base case and
termination.</p>
<p>A common way of implementing this idea is to use what is known as a
<em>leftist heap</em>. A leftist heap is a binary tree that forms a heap such
that for every node, the null path length of the right child is no more
than the null path length of the left child. For such a structure,
completing the merge algorithm is simple:</p>
<ul>
<li>For the recursive call, we merge the right child of <em>s</em> with <em>b</em>,
where <em>s</em> and <em>b</em> are as defined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/heaps">the previous
section</a>.</li>
<li>When combining the root and left child of <em>s</em> with the result of the
recursive call, we arrange the children so that the result is a
leftist heap.</li>
</ul>
<p>We can implement this idea by defining two classes, <strong>LeftistTree&lt;T&gt;</strong>
and <strong>MinPriorityQueue&lt;TPriority, TValue&gt;</strong>. For the
<strong>LeftistTree&lt;T&gt;</strong> class, we will only be concerned with the shape of
the tree &mdash; namely, that the null path length of the right child is never
more than the null path length of the left child. We will adopt a
strategy similar to what we did with 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">AVL
trees</a>. Specifically a
<strong>LeftistTree&lt;T&gt;</strong> will be immutable so that we can always be sure
that it is shaped properly. It will then be a straightforward matter to
implement a <strong>MinPriorityQueue&lt;TPriority, TValue&gt;</strong>, where
<strong>TPriority</strong> is the type of the priorities, and <strong>TValue</strong> is the type
of the values.</p>
<p>The implementation of <strong>LeftistTree&lt;T&gt;</strong> ends up being very similar to
the implementation we described for 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">AVL tree
nodes</a>, but without the
rotations. We need three <strong>public</strong> properties using the default
implementation with <strong>get</strong> accessors: the data (of type <strong>T</strong>) and the
two children (of type <strong>LeftistTree&lt;T&gt;</strong>). We also need a <strong>private</strong>
field to store the null path length (of type <strong>int</strong>). We can define a
<strong>static</strong> method to obtain the null path length of a given
<strong>LeftistTree&lt;T&gt;</strong>. This method is essentially the same as the
<strong>Height</strong> method for an AVL tree, except that if the given tree is
<strong>null</strong>, we return 0. A constructor takes as its parameters a data
element of type <strong>T</strong> and two children of type <strong>LeftistTree&lt;T&gt;</strong>. It
can initialize its data with the first parameter. To initialize its
children, it first needs to determine their null path lengths using the
<strong>static</strong> method above. It then assigns the two <strong>LeftistTree&lt;T&gt;</strong>
parameters to its child fields so that the right child&rsquo;s null path
length is no more than the left child&rsquo;s. Finally, it can initialize its
own null path length by adding 1 to its right child&rsquo;s null path length.</p>
<p><span id="where"></span> Let&rsquo;s now consider how we can implement
<strong>MinPriorityQueue&lt;TPriority, TValue&gt;</strong>. The first thing we need to
consider is the type, <strong>TPriority</strong>. This needs to be a type that can be
ordered (usually it will be a numeric type like <strong>int</strong>). We can
restrict <strong>TPriority</strong> to be a subtype of <strong>IComparable&lt;TPriority&gt;</strong>
by using a <strong>where</strong> clause, as we did for dictionaries (see
&ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/linked-list-impl">Implementing a Dictionary with a Linked
List</a>&rdquo;).</p>
<p>We then need a <strong>private</strong> field in which to store a leftist tree. We
can store both the priority and the data element in a node if we use a
<strong>LeftistTree&lt;KeyValuePair&lt;TPriority, TValue&gt;&gt;</strong>; thus, the keys are
the priorities and the values are the data elements. We also need a
<strong>public int</strong> property to get of the number of elements in the
min-priority queue. This property can use the default implementation
with <strong>get</strong> and <strong>private set</strong> accessors.</p>
<p>In order to implement <strong>public</strong> methods to add an element with a
priority and to remove an element with minimum priority, we need the
following method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> LeftistTree&lt;KeyValuePair&lt;TPriority, TValue&gt;&gt;
</span></span><span style="display:flex;"><span>    Merge(LeftistTree&lt;KeyValuePair&lt;TPriority, TValue&gt;&gt; h1, 
</span></span><span style="display:flex;"><span>        LeftistTree&lt;KeyValuePair&lt;TPriority, TValue&gt;&gt; h2)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This method consist of three cases. The first two cases occur when
either of the parameters is <strong>null</strong>. In each such case, we return the
other parameter. In the third case, when neither parameter is <strong>null</strong>,
we first need to compare the priorities in the data stored in the root
nodes of the parameters. A priority is stored in the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.keyvaluepair-2.key?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Key</strong></a>
property of the <strong>KeyValuePair</strong>, and we have constrained this type so
that it has a <strong>CompareTo</strong> method that will compare one instance with
another. Once we have determined which root has a smaller priority, we
can construct and return a new
<strong>LeftistTree&lt;KeyValuePair&lt;TPriority,Â TValue&gt;&gt;</strong> whose data
is the data element with smaller priority, and whose children are the
left child of this data element and the result of recursively merging
the right child of this element with the parameter whose root has larger
priority.</p>
<p>The remaining methods and properties of
<strong>MinPriorityQueue&lt;TPriority,Â TValue&gt;</strong> are now fairly
straightforward.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Huffman Trees</h1></div>
<h2 id="huffman-trees">Huffman Trees</h2>
<p>In this section, we&rsquo;ll consider an application of min-priority queues to
the general problem of compressing files. Consider, for example, a plain
text file like 

<a href="pg5.txt">this copy of the U. S. Constitution</a>. This file
is encoded using UTF-8, the most common encoding for plain text files.
The characters most commonly appearing in English-language text files
are each encoded as one byte (i.e., eight bits) using this scheme. For
example, in the text file referenced above, every character is encoded
as a single byte (the first three bytes of the file are an optional code
indicating that it is encoded in UTF-8 format). Furthermore, some byte
values occur much more frequently than others. For example, the encoding
of the blank character occurs over 6000 times, whereas the encoding of
&lsquo;$&rsquo; occurs only once, and the encoding of &lsquo;=&rsquo; doesn&rsquo;t occur at all.</p>
<p>One of the techniques used by most file compression schemes is to find a
variable-width encoding scheme for the file. Such a scheme uses fewer
bits to encode commonly-occurring byte values and more bits to encode
rarely-occurring byte values. Byte values that do not occur at all in
the file are not given an encoding.</p>
<p>Consider, for example, a file containing the single string,
&ldquo;Mississippi&rdquo;, with no control characters signaling the end of the line.
If we were to use one byte for each character, as UTF-8 would do, we
would need 11 bytes (or 88 bits). However, we could encode the
characters in binary as follows:</p>
<ul>
<li>M: 100</li>
<li>i: 0</li>
<li>p: 101</li>
<li>s: 11</li>
</ul>
<p>Obviously because each character is encoded with fewer than 8 bits, this
will give us a shorter encoding. However, because &lsquo;i&rsquo; and &rsquo;s&rsquo;, which
each occur four times in the string, are given shorter encodings than
&lsquo;M&rsquo; and &lsquo;p&rsquo;, which occur a total of three times combined, the number of
bits is further reduced. The encoded string is</p>
<pre><code>100011110111101011010
</code></pre>
<p>which is only 21 bits, or less than 3 bytes.</p>
<p>In constructing such an encoding scheme, it is important that the
encoded string can be decoded unambiguously. For example, it would
appear that the following scheme might be even better:</p>
<ul>
<li>M: 01</li>
<li>i: 0</li>
<li>p: 10</li>
<li>s: 1</li>
</ul>
<p>This scheme produces the following encoding:</p>
<pre><code>01011011010100
</code></pre>
<p>which is only 14 bits, or less than 2 bytes. However, when we try to
decode it, we immediately run into problems. Is the first 0 an &lsquo;i&rsquo; or
the first bit of an &lsquo;M&rsquo;? We could decode this string as &ldquo;isMsMsMisii&rdquo;,
or a number of other possible strings.</p>
<p>The first encoding above, however, has only one decoding, &ldquo;Mississippi&rdquo;.
The reason for this is that this encoding is based on the following
binary tree:</p>
<p><img src="huffman.jpg" alt="A Huffman tree"></p>
<p>To get the encoding for a character, we trace the path to that character
from the root, and record a 0 each time we go left and a 1 each time we
go right. Thus, because the path to &lsquo;M&rsquo; is right, left, left, we have an
encoding of 100. To decode, we simply use the encoding to trace out a
path in the tree, and when we reach a character (or more generally, a
byte value), we record that value. If we form the tree such that each
node has either two empty children or two nonempty children, then when
tracing out a path, we will always either have a choice of two
alternatives or be at a leaf storing a byte value. The decoding will
therefore be unambiguous. Such a tree that gives an encoding whose
length is minimized over all such encodings is called a <em>Huffman tree</em>.</p>
<p>Before we can find a Huffman tree for a file, we need to determine how
many times each byte value occurs. There are 256 different byte values
possible; hence we will need an array of 256 elements to keep track of
the number of occurrences of each. Because files can be large, this
array should be a <strong>long[Â ]</strong>. We can then use element <em>i</em> of this
array to keep track of the number of occurrences of byte value <em>i</em>.
Thus, after constructing this array, we can read the file one byte at a
time as described in 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/other-file-io">&ldquo;Other File
I/O&rdquo;</a>, and for each
<strong>byte</strong> <code>b</code> that we read, we increment the value at location <code>b</code> of the
array.</p>
<p>Having built this frequency table, we can now use it to build a Huffman
tree. We will build this tree from the bottom up, storing subtrees in a
min-priority queue. The priority of each subtree will be the total
number of occurrences of all the byte values stored in its leaves. We
begin by building a 1-node tree from each nonzero value in the frequency
table. As we iterate through the frequency table, if we find that
location <em>i</em> is nonzero, we construct a node containing <em>i</em> and add that
node to the min-priority queue. The priority we use when adding the node
is the number of occurrences of <em>i</em>, which is simply the value at
location <em>i</em> of the frequency table.</p>
<p>Once the min-priority queue has been loaded with the leaves, can begin
combining subtrees into larger trees. We will need to handle as a
special case an empty min-priority queue, which can result only from an
empty input file. In this case, there is no Huffman tree, as there are
no byte values that need to be encoded. Otherwise, as long as the
min-priority queue has more than one element, we:</p>
<ul>
<li>Get and remove the two smallest priorities and their associated
trees.</li>
<li>Construct a new binary tree with these trees as its children and 0
as its data (which will be unused).</li>
<li>Add the resulting tree to the min-priority queue with a priority
equal to the sum of the priorities of its children.</li>
</ul>
<p>Because each iteration removes two elements from the min-priority queue
and adds one, eventually the min-priority queue will contain only one
element. It can be shown that this last remaining element is a Huffman
tree for the file.</p>
<p>Most file compression schemes involve more than just converting to a
Huffman-tree encoding. Furthermore, even if this is the only technique
used, simply writing the encoded data is insufficient to compress the
file, as the Huffman tree is needed to decompress it. Therefore, some
representation of the Huffman tree must also be written. In addition, a
few extra bits may be needed to reach a byte boundary. Because of this,
the length of the decompressed file is also needed for decompression so
that the extra bits are not interpreted as part of the encoded data. Due
to this additional output, compressing a short file will likely result
in a longer file than the original.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
          </section>
    
    
          <article class="default">
<div hidden><h1>Hash Tables</h1></div>
<h2 id="hash-tables">Hash Tables</h2>
<p>Throughout our discussion of dictionaries over the last three chapters,
we have taken advantage of the fact that the keys were sorted when
looking up specific keys. In this chapter, we examine a rather
surprising result &mdash; that we can achieve better performance if we don&rsquo;t
have to keep the keys in any particular order (i.e., so that we can
process them in that order). The technique uses a data structure known
as a <em>hash table</em>, which is the underlying data structure in the .NET
Framework&rsquo;s <strong>Dictionary&lt;TKey,TValue&gt;</strong> class.</p>
<p>A hash table is typically organized as an array of linked lists. The
individual cells in the linked lists each store a key and a value.
Associated with this structure is a <em>hash function</em>, which takes a key
as its parameter and computes an array location. This array location
contains a reference to the beginning of the linked list that will
contain the given key if it is in the hash table. Thus, in order to find
a key in a hash table, we first apply the hash function to the key, then
search the linked list at the location computed by the hash function.
The following picture illustrates the layout of a hash table in which
the keys are <strong>string</strong>s and the values are <strong>int</strong>s, and the hash
function is denoted by <em>h</em>:</p>
<p><img src="hash-table.jpg" alt="A hash table."></p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>In order to avoid cluttering the above picture, the <strong>string</strong>s are
shown inside the linked list cells, even though <strong>string</strong> is a
reference type.</p>
    </div>
</div>
<p>In order to achieve good performance, we want all of the linked lists to
be short. This requires, among other things, that we make the array
sufficiently large. We therefore increase the size of the array as the
number of elements increases.</p>
<p>The above overview of hash tables reveals one of the challenges in using
a dictionary implemented using a hash table. Specifically, whenever we
define a new key type, this type is unknown to the dictionary
implementation. How then can it compute a hash function on an instance
of this type? The short answer to this question is that the hash
function is divided into two parts. The first part of the hash function
is implemented within the key type itself, where code can access the
implementation details of the key. Specifically, every type in C# has a
<strong>public</strong>


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.gethashcode?view=netframework-4.7.2#System_Object_GetHashCode" target="_blank" rel="noopener"><strong>GetHashCode</strong></a>
method, which takes no parameters and returns an <strong>int</strong>. Any new type
that redefines how its elements are compared for equality should
<em>override</em> this method so as to ensure that it returns the same value
whenever it is called on equal instances. The second part of the hash
function is implemented within the dictionary itself. This part takes
the <strong>int</strong> from the first part and uses it to compute an array
location. We will discuss both parts of the hash function computation in
more detail in later sections.</p>
<p>In the next few sections, we will present the implementation details of
a hash table. We will then discuss how a dictionary can facilitate a
technique called <em>memoization</em>, which can be used to improve
dramatically the performance of certain algorithms. This discussion will
provide a motivation for defining a new key type. We then take a close
look at how equality is handled in C#, as we will need to be able to
implement equality tests if we are to define new types that can be used
as keys. We then complete the discussion on defining new key types by
illustrating how the <strong>GetHashCode</strong> method can be implemented.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>A Simple Hash Table Implementation</h1></div>
<h2 id="a-simple-hash-table-implementation">A Simple Hash Table Implementation</h2>
<p>In this section, we will look at a simple hash table implementation
using a fixed-length table. In subsequent sections, we will consider how
to adjust the table size for better performance, as well as how to
implement enumerators for iterating through the keys and/or values.</p>
<p>At the core of our implementation is the computation of the hash
function. Recall that the implementation of the hash function
computation is divided into two parts. The first part of the computation
is implemented within the definition of the key type via its
<strong>GetHashCode</strong> method. We will discuss this part of the computation in
the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/hash-functions">&ldquo;Hash
Codes&rdquo;</a>. Here, we will
focus on the second step, converting the <strong>int</strong> hash code returned by
the key&rsquo;s <strong>GetHashCode</strong> method to a table location.</p>
<p>One common technique, which is used in the .NET implementation of the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Dictionary&lt;TKey,Â TValue&gt;</strong></a>
class, is called the <em>division method</em>. This technique consists of the
following:</p>
<ol>
<li>Reset the sign bit of the hash code to <code>0</code>.</li>
<li>Compute the remainder of dividing this value by the length of the
table.</li>
</ol>
<p>If <code>p</code> is a nonnegative <strong>int</strong> and <code>q</code> is a positive <strong>int</strong>, then
<code>pÂ %Â q</code> gives a nonnegative value less than <code>q</code>; hence, if <code>q</code>
is the table length, <code>pÂ %Â q</code> is a location within the table.
Furthermore, this calculation often does a good job of distributing hash
code values among the different table locations, but this depends on how
the hash codes were computed and what the length of the table is.</p>
<p>For example, suppose we use a size 
<span class="math align-center">$ 2^k $</span> for some positive
integer <span style="white-space:nowrap">
<span class="math align-center">$ k $</span>.</span> In this case, the above computation can be simplified, as
the values formed by 
<span class="math align-center">$ k $</span> bits are 
<span class="math align-center">$ 0 $</span> through <span style="white-space:nowrap">
<span class="math align-center">$ 2^kÂ -Â 1 $</span>,</span>
or all of the locations in the table. We can therefore simply use the
low-order 
<span class="math align-center">$ k $</span> bits of the hash code as the table location. However, it
turns out that using the division method when the table size is a power
of 
<span class="math align-center">$ 2 $</span> can lead to poor key distribution for some common hash code
schemes. To avoid these problems, a prime number should be used as the
table length. When a prime number is used, the division method tends to
result in a good distribution of the keys.</p>
<p>The reason we need to reset the sign bit of the hash code to <code>0</code> is to
ensure that the first operand to the <code>%</code> operator is nonnegative, and
hence that the result is nonnegative. Furthermore, simply taking the
absolute value of the hash code won&rsquo;t always work because

<span class="math align-center">$ -2^{31} $</span> can be stored in an <strong>int</strong>, but 
<span class="math align-center">$ 2^{31} $</span> is too
large. Resetting the sign bit to <code>0</code> is a quick way to ensure we have a
nonnegative value without losing any additional information.</p>
<p>We can do this using a bitwise AND operator, denoted by a single
ampersand (<code>&amp;</code>). This operator operates on the individual bits of an
integer type such as <strong>int</strong>. The logical AND of two <code>1</code> bits is <code>1</code>; all
other combinations result in <code>0</code>. Thus, if we want to set a bit to <code>0</code>, we
AND it with <code>0</code>, and ANDing a bit with <code>1</code> will leave it unchanged. The sign
bit is the high-order bit; hence, we want to AND the hash code with an
<strong>int</strong> whose first bit is <code>0</code> and whose remaining bits are <code>1</code>. The easiest
way to write this value is using hexadecimal notation, as each hex digit
corresponds to exactly four bits. We begin writing a hexadecimal value
with <code>0x</code>. The first four bits need to be one <code>0</code>, followed by three <code>1</code>s.
These three <code>1</code> are in the <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>,</span> <span style="white-space:nowrap">
<span class="math align-center">$ 2 $</span>,</span> and 
<span class="math align-center">$ 4 $</span> bit positions of the first hex digit; hence, the value of
this hex digit should be <code>7</code>. We then want seven more hex digits, each
containing four <code>1</code>s. An additional <code>1</code> in the 
<span class="math align-center">$ 8 $</span> position gives us a sum of
<span style="white-space:nowrap">
<span class="math align-center">$ 15 $</span>,</span> which is denoted as either <code>f</code> or <code>F</code> in hex. We can therefore reset
the sign bit of an <strong>int</strong> <code>i</code> as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span>i = i &amp; <span style="color:#ae81ff">0x7fffffff</span>;
</span></span></code></pre></div><p>Now let&rsquo;s consider how we would look up a key. First, we need to obtain
the key&rsquo;s hash code by calling its <strong>GetHashCode</strong> method. From the hash
code, we use the division method to compute the table location where it
belongs. We then search the linked list for that key.</p>
<p>Adding a key and a value is done similarly. We first look for the key as
described above. If we find it, we either replace its <strong>KeyValuePair</strong>
with a new one containing the new value, or we throw an exception,
depending on how we want this method to behave. If we don&rsquo;t find it, we
add a new cell containing the given key and value to the beginning of
the list we searched.</p>
<p>Note that looking up a key or adding a key and a value as described
above can be implemented using either methods or indexers (the .NET
Framework uses both). See the section,


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/indexers">&ldquo;Indexers&rdquo;</a> for details on
how to implement an indexer.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Rehashing</h1></div>
<h2 id="rehashing">Rehashing</h2>
<p>In this section, we will show how to improve the performance of a hash
table by adjusting the size of the array. In order to see how the array
size impacts the performance, let&rsquo;s suppose we are using an array with

<span class="math align-center">$ m $</span> locations, and that we are storing 
<span class="math align-center">$ n $</span> keys in the hash table. In
what follows, we will analyze the number of keys we will need to examine
while searching for a particular key, <code>k</code>.</p>
<p>In the worst case, no matter how large the array is, it is possible that
all of the keys map to the same array location, and therefore all end up
in one long linked list. In such a case, we will need to examine all of
the keys whenever we are looking for the last one in this list. However,
the worst case is too pessimistic &mdash; if the hash function is implemented
properly, it is reasonable to expect that something approaching a
uniform random distribution will occur. We will therefore consider the
number of keys we would expect to examine, assuming a uniform random
distribution of keys throughout the table.</p>
<p>We&rsquo;ll first consider the case in which <code>k</code> is not in the hash table. In
this case, we will need to examine all of the keys in the linked list at
the array location where <code>k</code> belongs. Because each of the 
<span class="math align-center">$ n $</span> keys is
equally likely to map to each of the 
<span class="math align-center">$ m $</span> array locations, we would
expect, on average, 
<span class="math align-center">$ nÂ /Â m $</span> keys to be mapped to the location
where <code>k</code> belongs. Hence, in this case, we would expect to examine

<span class="math align-center">$ nÂ /Â m $</span> keys, on average.</p>
<p>Now let&rsquo;s consider the case in which <code>k</code> is in the hash table. In this
case, we will examine the key <code>k</code>, plus all the keys that precede <code>k</code> in
its linked list. The number of keys preceding <code>k</code> cannot be more than
the total number of keys other than <code>k</code> in that linked list. Again,
because each of the 
<span class="math align-center">$ nÂ -Â 1 $</span> keys other than <code>k</code> is equally likely
to map to each of the 
<span class="math align-center">$ m $</span> array locations, we would expect, on average,

<span class="math align-center">$ (nÂ -Â 1)Â /Â m $</span> keys other than <code>k</code> to be in the same linked
list as <code>k</code>. Thus, we can expect, on average, to examine no more than

<span class="math align-center">$ 1Â +Â  (nÂ -Â 1)Â /Â m $</span> keys when looking for a key
that is present.</p>
<p>Notice that both of the values derived above decrease as <em>m</em> increases.
Specifically, if 
<span class="math align-center">$ m \geqÂ n $</span>, the expected number of examined
keys on a failed lookup is no more than 
<span class="math align-center">$ 1 $</span>, and the expected number of
examined keys on a successful lookup is less than 
<span class="math align-center">$ 2 $</span>. We can therefore
expect to achieve very good performance if we keep the number of array
locations at least as large as the number of keys.</p>
<p>We have already seen (e.g., in &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl">Implementation of
<strong>StringBuilder</strong>s</a>&rdquo;)
how we can keep an array large enough by doubling its size whenever we
need to. However, a hash table presents two unique challenges for this
technique. First, as we observed in 

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/simple">the previous
section</a>, we
are most likely to get good performance from a hash table if the number
of array locations is a prime number. However, doubling a prime number
will never give us a prime number. The other challenge is due to the
fact that when we change the size of the array, we consequently change
the hash function, as the hash function uses the array size. As a
result, the keys will need to go to different array locations in the new
array.</p>
<p>In order to tackle the first challenge, recall that we presented an
algorithm for finding all prime numbers less than a given <code>n</code> in
&ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/sieve-eratosthenes">Finding Prime
Numbers</a>&rdquo;;
however, this is a rather expensive way to find a prime number of an
appropriate size. While there are more efficient algorithms, we really
don&rsquo;t need one. Suppose we start with an array size of 
<span class="math align-center">$ 5 $</span> (there may be
applications using many small hash tables &mdash; the .NET implementation
starts with an array size of <span style="white-space:nowrap">
<span class="math align-center">$ 3 $</span>).</span> 
<span class="math align-center">$ 5 $</span> is larger than
<span style="white-space:nowrap">
<span class="math align-center">$ 2^2Â =Â 4 $</span>.</span> If we double this value 
<span class="math align-center">$ 28 $</span> times, we
reach a value larger than <span style="white-space:nowrap">
<span class="math align-center">$ 2^{30} $</span>,</span> which is larger than 
<span class="math align-center">$ 1 $</span>
billion. More importantly, this value is large enough that we can&rsquo;t
double it again, as an array in C# must contain fewer than

<span class="math align-center">$ 2^{31} $</span> locations. Hence, we need no more than 
<span class="math align-center">$ 29 $</span> different array
sizes. We can pre-compute these and hard-code them into our
implementation; for example,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span>[] _tableSizes = 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">47</span>, <span style="color:#ae81ff">97</span>, <span style="color:#ae81ff">197</span>, <span style="color:#ae81ff">397</span>, <span style="color:#ae81ff">797</span>, <span style="color:#ae81ff">1597</span>, <span style="color:#ae81ff">3203</span>, <span style="color:#ae81ff">6421</span>, <span style="color:#ae81ff">12853</span>, <span style="color:#ae81ff">25717</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">51437</span>, <span style="color:#ae81ff">102877</span>, <span style="color:#ae81ff">205759</span>, <span style="color:#ae81ff">411527</span>, <span style="color:#ae81ff">823117</span>, <span style="color:#ae81ff">1646237</span>, <span style="color:#ae81ff">3292489</span>, <span style="color:#ae81ff">6584983</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">13169977</span>, <span style="color:#ae81ff">26339969</span>, <span style="color:#ae81ff">52679969</span>, <span style="color:#ae81ff">105359939</span>, <span style="color:#ae81ff">210719881</span>, <span style="color:#ae81ff">421439783</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">842879579</span>, <span style="color:#ae81ff">1685759167</span> 
</span></span><span style="display:flex;"><span>}; 
</span></span></code></pre></div><p>Each of the values in the above array is a prime number, and each one
after the first is slightly more than twice its predecessor. In order to
make use of these values, we need a <strong>private</strong> field to store the index
at which the current table size is stored in this array. We also need to
keep track of the number of keys currently stored. As this information
is useful to the user, a <strong>public int Count</strong> property would be
appropriate. It can use the default implementation with a <strong>get</strong>
accessor and a <strong>private set</strong> accessor.</p>
<p>One important difference between the reason for rehashing and the reason
for creating a larger array for an implementation of a


<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl"><strong>StringBuilder</strong></a>,


<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl">stack</a>, or


<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/queue-impl">queue</a> is that rehashing
is done simply for performance reasons - there is always room to put a
new key and value into a hash table unless we have run out of memory.
For this reason, it makes sense to handle rehashing <em>after</em> we have
added the new key and value. This results in one extra linked-list
insertion (i.e., updating two references) each time we rehash, but it
simplifies the coding somewhat. Because rehashing is rarely done, this
overhead is minimal, and seems to be a reasonable price to pay for
simpler code.</p>
<p>Once a new key and value have been added, we first need to update the
<strong>Count</strong>. We then need to check to see whether this number exceeds the
current array size. As we do this, we should also make sure that the
array size we are using is not the last array size in <code>_tableSizes</code>,
because if it is, we can&rsquo;t rehash. If both of these conditions hold, we
need to rehash.</p>
<p>To begin rehashing, we copy the reference to the table into a local
variable and increment the field giving our current index into
<code>_tableSizes</code>. We then construct for the table field a new array whose
size is given by the value at the new current index into <code>_tableSizes</code>.
Note that it is important that the local variable is used to refer to
the old table, and that the field is used to refer to the new table, as
the hash function uses the field to obtain the array size.</p>
<p>We then need to move all keys and values from the old table to the new
one. As we do this, we will need to re-compute the hash function for each
key, as the hash function has now changed. We therefore need two nested
loops. The outer loop iterates through the locations in the old table,
and the inner loop iterates as long as the linked list at the current
table location is non-empty. On each iteration of the inner loop:</p>
<ul>
<li>Use a local variable to save a reference to the first cell in the
linked list at the current table location.</li>
<li>Remove this cell from this linked list.</li>
<li>Using the hash function, compute the new array location of the key
in this cell.</li>
<li>Insert this cell into the beginning of the linked list at the new
array location in the new table.</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Memoization</h1></div>
<h2 id="memoization">Memoization</h2>
<p>We we will now present an example of a common technique involving
dictionaries. Consider the following variation of the 2-player game,
Nim. The board consists of a number of stones arranged into several
piles. Associated with each nonempty pile is a <em>limit</em>, which is a
positive integer no greater than the number of stones on that pile (the
limit for an empty pile is always 0). Players alternate taking stones
according to the following rules:</p>
<ul>
<li>On each turn, the player must take some number of stones from a
single pile.</li>
<li>The number of stones taken must be at least 1, but no more than the
current limit for that pile.</li>
<li>Taking <em>n</em> stones from a pile changes the limit for that pile to
2<em>n</em>. (If this limit is more than the number of stones remaining on
that pile, the new limit is the number of stones remaining.)</li>
</ul>
<p>The player taking the last stone wins. Note that by the rules of the
game, there will always be a winner &mdash; a draw is impossible.</p>
<p>For example, suppose we start a game with three piles, each containing
10 stones with a limit of 9. We will denote this board position as
(10/9; 10/9; 10/9). If Player 1 removes two stones from Pile 1, the
resulting position is (8/4; 10/9; 10/9). Note that because 2 stones were
removed from Pile 1, its new limit is 2Â xÂ 2Â =Â 4. If Player 2
now removes 4 stones from Pile 2, the resulting position is (8/4; 6/6;
10/9). Note that because 4 stones were removed, the new limit for Pile 2
would become 2Â xÂ 4Â =Â 8; however, because only 6 stones
remain, the new limit is 6. Play then continues until a player wins by
taking all remaining stones.</p>
<p>Let us define a <em>winning play</em> as any play giving a position from which
there is no winning play. Thus, if we make a winning play, there are two
possible cases. In the first case, there are no winning plays from the
resulting position because there are no legal plays. This means we just
took the last stone and won the game. In the other case, there are legal
plays, but none is a winning play. Our opponent must make one of these
plays. Because it isn&rsquo;t a winning play, there must be a winning play
from the resulting position. Therefore, an optimal strategy is to make a
winning play whenever one exists. Because of the way a winning play is
defined, if a winning play exists, following this strategy will enable
us to continue to make winning plays until we eventually win the game.
If no winning play exists, we just have to make some play and hope that
our opponent blunders by making a play that is not a winning play. If
that happens, a winning play will be available, and our strategy leads
us to a win.</p>
<p>Consider the following examples:</p>
<ul>
<li><strong>Example 1</strong>: (1/1; 0/0). Taking one stone from Pile 1 is a winning
play because there is no legal play from the resulting position;
hence, there can be no winning play from it.</li>
<li><strong>Example 2</strong>: (1/1; 1/1). There is no winning play from this
position because both legal plays give essentially the position from
Example 1, from which there is a winning play.</li>
<li><strong>Example 3</strong>: (2/2; 1/1). Taking one stone from Pile 1 is a winning
play because it leads to (1/1; 1/1), from which there is no winning
play, as shown in Example 2.</li>
</ul>
<p>Given enough stones and piles, finding a winning play or determining
that there is none is challenging. In order to develop a search
algorithm somewhat similar to the one described in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/word-games">&ldquo;Tries in Word Games&rdquo;</a>, we can define the
following tree:</p>
<ul>
<li>The root is the current board position.</li>
<li>The children of a node are all the positions that can be reached by
making legal plays.</li>
</ul>
<p>Thus, the tree defined by (2/2; 2/2) is as follows:</p>
<p><img src="nim-tree.jpg" alt="The tree defined by a Nim position."></p>
<p>The winning plays have been marked with a &lsquo;W&rsquo; in the above tree. As in


<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/word-games">&ldquo;Tries in Word Games&rdquo;</a>,
this tree is not a data structure, but simply a mental guide to building
a search algorithm. Specifically, we can find a winning play (or
determine whether there is none) by traversing the tree in the following
way:</p>
<ul>
<li>For each legal play <em>p</em> from the given position:
<ul>
<li>Form the board position that results from making this play (this
position is a child).</li>
<li>Recursively find a winning play from this new position.</li>
<li>If there was no winning play returned (i.e., it was <strong>null</strong>),
return <em>p</em>, as it&rsquo;s a winning play.</li>
</ul>
</li>
<li>If we get to this point we&rsquo;ve examined all the plays, and none of
them is winning; hence we return <strong>null</strong>.</li>
</ul>
<p>Note that the above algorithm may not examine all the nodes in the tree
because once it finds a winning play, it returns it immediately without
needing to examine any more children. For example, when processing the
children of the node (1/1; 2/2), it finds that from its second child,
(1/1; 1/1), there is no winning play; hence, it immediately returns the
play that removes one stone from Pile 2 without even looking at the
third child, (1/1; 0/0). Even so, because the size of the tree grows
exponentially as the number of stones increases, once the number of
stones reaches about 25, the time needed for the algorithm becomes
unacceptable.</p>
<p>Notice that several of the nodes in the tree occur multiple times. For
example, (1/1; 1/1) occurs twice and (1/1; 0/0) occurs five times. For a
large tree, the number of duplicate nodes in the tree increases
dramatically. The only thing that determines the presence of a winning
move is the board position; hence, once we have a winning move (or know
that none exists) for a given position, it will be the same wherever
this position may occur in the tree. We can therefore save a great deal
of time by saving the winning move for any position we examine. Then
whenever we need to examine a position, we first check to see if we&rsquo;ve
already processed it &mdash; if so, we just use the result we obtained earlier
rather than processing it again. Because processing it again may involve
searching a large tree, the savings in time might be huge.</p>
<p>The technique outlined in the above paragraph is known as <em>memoization</em>
(not to be confused with <em>memorization</em>) &mdash; we make a <em>memo</em> of the
results we compute so that we can look them up again later if we need
them. A dictionary whose keys are board positions and whose values are
plays is an ideal data structure for augmenting the above search with
memoization. As the first step, before we look at any plays from the
given board position, we look up the position in the dictionary. If we
find it, we immediately return the play associated with it. Otherwise,
we continue the algorithm as before, but prior to returning a play (even
if it is <strong>null</strong>), we save that play in the dictionary with the given
board position as its key. This memoization will allow us to analyze
board positions containing many more stones.</p>
<p>To implement the above strategy, we need to define two types - one to
represent a board position and one to represent a play. The type
representing a play needs to be a class so that we can use <strong>null</strong> to
indicate that there is no winning play. The type representing a board
position can be either a class or a structure. Because the dictionary
needs to be able to compare instances of this type for equality in order
be able to find keys, its definition will need to re-define the equality
comparisons. Consequently, we need to redefine the hash code computation
to be consistent with the equality comparison. The next two sections
will examine these topics.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Equality in C#</h1></div>
<h2 id="equality-in-c">Equality in C#</h2>
<p>Continuing our discussion from 

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/memoization">the previous
section</a>, we want to
define a type that represents a Nim board. Furthermore, we need to be
able to compare instances of this type for equality. Before we can
address how this can be done, we first need to take a careful look at
how C# handles equality. In what follows, we will discuss how C#
handles the <code>==</code> operator, the non-<strong>static</strong> <strong>Equals</strong> method, and two
<strong>static</strong> methods for determining equality. We will then show how the
comparison can be defined so that all of these mechanisms behave in a
consistent way.</p>
<p>We first consider the <code>==</code> operator. The behavior of this operator is
determined by the <em>compile-time</em> types of its operands. This is
determined by the declared types of variables, the declared return types
of methods or properties, and the rules for evaluating expressions.
Thus, for example, if we have a statement</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">object</span> x = <span style="color:#e6db74">&#34;abc&#34;</span>;
</span></span></code></pre></div><p>the compile-time type of <code>x</code> is <strong>object</strong>, even though it actually
refers to a <strong>string</strong>.</p>
<p>For pre-defined 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">value
types</a>, <code>==</code> evaluates
to <strong>true</strong> if its operands contain the same values. Because


<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerations">enumerations</a> are
represented as numeric types such as <strong>int</strong> or <strong>byte</strong>, this rule
applies to them as well. For user-defined structures, <code>==</code> is undefined
unless the structure definition explicitly defines the <code>==</code> and <code>!=</code>
operators. We will show how this can be done below.</p>
<p>By default, when <code>==</code> is applied to reference types, it evaluates to
<strong>true</strong> when the two operands refer to the same object (i.e., they
refer to the same memory location). A class may override this behavior
by explicitly defining the <code>==</code> and <code>!=</code> operators. For example, the
<strong>string</strong> class defines the <code>==</code> operator to evaluate to <strong>true</strong> if the
given <strong>string</strong>s are the same length and contain the same sequence of
characters.</p>
<p>Let&rsquo;s consider an example that illustrates the rules for reference
types:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> a = <span style="color:#e6db74">&#34;abc&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">string</span> b = <span style="color:#e6db74">&#34;0abc&#34;</span>.Substring(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> x = a;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> y = b;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> comp1 = a == b;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> comp2 = x == y;
</span></span></code></pre></div><p>The first two lines assign to <code>a</code> and <code>b</code> the same sequence of
characters; however, because the <strong>string</strong>s are computed differently,
they are different objects. The next two lines copy the reference in <code>a</code>
to <code>x</code> and the reference in <code>b</code> to <code>y</code>. Thus, at this point, all four
variables refer to a <strong>string</strong> &ldquo;abc&rdquo;; however, <code>a</code> and <code>x</code> refer to a
different object than do <code>b</code> and <code>y</code>. The fifth line compares <code>a</code> and
<code>b</code> for equality using <code>==</code>. The compile-time types of <code>a</code> and <code>b</code> are
both <strong>string</strong>; hence, these variables are compared using the rules for
comparing <strong>string</strong>s. Because they refer to <strong>string</strong>s of the same
length and containing the same sequence of characters, <code>comp1</code> is
assigned <strong>true</strong>. The behavior of the last line is determined by the
compile-time types of <code>x</code> and <code>y</code>. These types are both <strong>object</strong>,
which defines the default behavior of this operator for reference types.
Thus, the comparison determines whether the two variables refer to the
same object. Because they do not, <code>comp2</code> is assigned <strong>false</strong>.</p>
<p>Now let&rsquo;s consider the non-<strong>static</strong> <strong>Equals</strong> method. The biggest
difference between this method and the <code>==</code> operator is that the behavior
of <code>x.Equals(y)</code> is determined by the <em>run-time</em> type of <code>x</code>. This is
determined by the actual type of the object, independent of how any
variables or return types are declared.</p>
<p>By default, if <code>x</code> is a value type and <code>y</code> can be treated as having the
same type, then <code>x.Equals(y)</code> returns <strong>true</strong> if <code>x</code> and <code>y</code> have the
same value (if <code>y</code> can&rsquo;t be treated as having the same type as <code>x</code>, then
this method returns <strong>false</strong>). Thus, for pre-defined value types, the
behavior is the same as for <code>==</code> once the types are determined (provided
the types are consistent). However, the <strong>Equals</strong> method is always
defined, whereas the <code>==</code> operator may not be. Furthermore, structures may
<em>override</em> this method to change this behavior &mdash; we will show how to do
this below.</p>
<p>By default, if <code>x</code> is a reference type, <code>x.Equals(y)</code> returns <strong>true</strong>
if <code>x</code> and <code>y</code> refer to the same object. Hence, this behavior is the
same as for <code>==</code> once the types are determined (except that if <code>x</code> is
<strong>null</strong>, <code>x.Equals(y)</code> will throw a <strong>NullReferenceException</strong>,
whereas <code>xÂ ==Â y</code> will not). However, classes may override this
method to change this behavior. For example, the <strong>string</strong> class
overrides this method to return <strong>true</strong> if <code>y</code> is a <strong>string</strong> of the
same length and contains the same sequence of characters as <code>x</code>.</p>
<p>Let&rsquo;s now continue the above example by adding the following lines:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> comp3 = a.Equals(b);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> comp4 = a.Equals(x);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> comp5 = x.Equals(a);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> comp6 = x.Equals(y);
</span></span></code></pre></div><p>These all evaluate to <strong>true</strong> for one simple reason &mdash; the behavior is
determined by the run-time type of <code>a</code> in the case of the first two
lines, or of <code>x</code> in the case of the last two lines. Because these types
are both <strong>string</strong>, the objects are compared as <strong>string</strong>s.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>It&rsquo;s actually a bit more complicated in the case of <code>comp3</code>, but we&rsquo;ll explain
this later.</p>
    </div>
</div>
<p>The <strong>object</strong> class defines, in addition to the <strong>Equals</strong> method
described above, two <strong>public static</strong> methods, which are in turn
inherited by every type in C#:</p>
<ul>
<li><strong>bool Equals(object x, object y)</strong>: The main purpose of this method
is to avoid the <strong>NullReferenceException</strong> that is thrown by
<code>x.Equals(y)</code> when <code>x</code> is <strong>null</strong>. If neither <code>x</code> nor <code>y</code> is
<strong>null</strong>, this method simply returns the value of <code>x.Equals(y)</code>.
Otherwise, it will return <strong>true</strong> if both <code>x</code> and <code>y</code> are <strong>null</strong>, or <strong>false</strong> if only one is <strong>null</strong>.
User-defined types cannot override this method, but because it calls
the non-<strong>static Equals</strong> method, which they can override, they can
affect its behavior indirectly.</li>
<li><strong>bool ReferenceEquals(object x, object y)</strong>: This method returns
<strong>true</strong> if <code>x</code> and <code>y</code> refer to the same object or are both
<strong>null</strong>. If either <code>x</code> or <code>y</code> is a value type, it will return
<strong>false</strong>. User-defined types cannot override this method.</li>
</ul>
<p>Finally, there is nothing to prevent user-defined types from including
their own <strong>Equals</strong> methods with different parameter lists. In fact,
the <strong>string</strong> class includes definitions of the following <strong>public</strong>
methods:</p>
<ul>
<li><strong>bool Equals(string s)</strong>: This method actually does the same thing
as the non-<strong>static</strong> <strong>Equals</strong> method defined in the <strong>object</strong>
class, but is slightly more efficient because less run-time type
checking needs to be done. This is the method that is called in the
computation of <code>comp3</code> in the above example.</li>
<li><strong>static bool Equals(string x, string y)</strong>: This method does the
same thing as the <strong>static Equals</strong> method defined in the <strong>object</strong>
class, but again is slightly more efficient because less run-time
type checking needs to be done.</li>
</ul>
<p>All of this can be rather daunting at first. Fortunately, in most cases
these comparisons end up working the way we expect them to. The main
thing we want to focus on here is how to define equality properly in a
user-defined type.</p>
<p><span id="operator-overloading"></span> Let&rsquo;s start with the <code>==</code>
operator. This is one of several operators that may be defined within
class and structure definitions. If we are defining a class or structure
called <strong>SomeType</strong>, we can include a definition of the <code>==</code> operator as
follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">bool</span> <span style="color:#66d9ef">operator</span> ==(SomeType x, SomeType y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Definition of the behavior of ==</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Note the resemblance to the definition of a <strong>static</strong> method. Even
though we define it using the syntax for a method definition, we still
use it as we typically use the <code>==</code> operator; e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (a == b)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If <code>a</code> and <code>b</code> are both of type <strong>SomeType</strong>, the above definition will
be called using <code>a</code> as the parameter <code>x</code> and <code>b</code> as the parameter <code>y</code>.</p>
<p>Within the operator definition, if it is within a class definition, the
first thing we need to do is to handle the cases in which one or both
parameters are <strong>null</strong>. We don&rsquo;t need to do this for a structure
definition because value types can&rsquo;t be <strong>null</strong>, but if we omit this
part for a reference type, comparing a variable or expression of this
type to <strong>null</strong> will most likely result in a
<strong>NullReferenceException</strong>. We need to be a bit careful here, because if
we use <code>==</code> to compare one of the parameters to <strong>null</strong> it will be a
recursive call &mdash; infinite recursion, in fact. Furthermore, using
<code>x.Equals(null)</code> is always a bad idea, as if <code>x</code> does, in fact, equal
<strong>null</strong>, this will throw a <strong>NullReferenceException</strong>. We therefore
need to use one of the <strong>static</strong> methods, <strong>Equals</strong> or
<strong>ReferenceEquals</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">bool</span> <span style="color:#66d9ef">operator</span> ==(SomeType x, SomeType y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (Equals(x, <span style="color:#66d9ef">null</span>))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">return</span> (Equals(y, <span style="color:#66d9ef">null</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (Equals(y, <span style="color:#66d9ef">null</span>))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code to determine if x == y</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Note that because all three calls to <strong>Equals</strong> have <strong>null</strong> as a
parameter, these calls won&rsquo;t result in calling the <strong>Equals</strong> method
that we will override below.</p>
<p>Whenever we define the <code>==</code> operator, C# requires that we also define the
<code>!=</code> operator. In virtually all cases, what we want this operator to do
is to return the negation of what the <code>==</code> operator does:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">bool</span> <span style="color:#66d9ef">operator</span> !=(SomeType x, SomeType y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> !(x == y);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We now turn to the (non-<strong>static</strong>) <strong>Equals</strong> method. This is defined
in the <strong>object</strong> class to be a <strong>virtual</strong> method, meaning that
sub-types are allowed to


<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl/#overriding">override</a> its
behavior. Because every type in C# is a subtype of <strong>object</strong>, this
method is present in every type, and it can be overridden by any class
or structure.</p>
<p>We override this method as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">bool</span> Equals(<span style="color:#66d9ef">object</span> obj)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Definition of the behavior of Equals</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>For the body of the method, we first need to take care of the fact that
the parameter is of type <strong>object</strong>; hence, it may not even have the
same type as what we want to compare it to. If this is the case, we can
immediately return <strong>false</strong>. Otherwise, in order to ensure consistency
between this method and the <code>==</code> operator, we can do the actual comparison
using the <code>==</code> operator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">bool</span> Equals(<span style="color:#66d9ef">object</span> obj)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (obj <span style="color:#66d9ef">is</span> SomeType)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span> == (SomeType)obj;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The above definitions give a template for defining the <code>==</code> and <code>!=</code>
operators and the non-<strong>static Equals</strong> method for most classes that we
would want to compare for equality. For structures, we can remove the
code that handles <strong>null</strong> parameters from the <code>==</code> definition. In either
case, all we then need to do to complete the definitions is to replace
the name <strong>SomeType</strong>, wherever it occurs, with the name of the type we
are defining, and to fill in the hole left in the definition of the <code>==</code>
operator. It is here where we actually define how the comparison is to
be made.</p>
<p>Suppose, for example, that we want to define a class to represent a Nim
board position (see the 

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/memoization">previous
section</a>). This class
will need to have two <strong>private</strong> fields: an <strong>int[Â ]</strong> storing the
number of stones on each pile and an <strong>int[Â ]</strong> storing the limit
for each pile. These two arrays should be non-<strong>null</strong> and have the same
length, but this should be enforced by the constructor. By default, two
instances of a class are considered to be equal (by either the <code>==</code>
operator or the non-<strong>static Equals</strong> method) if they are the same
object. This is too strong for our purposes; instead, two instances <code>x</code>
and <code>y</code> of the board position class should be considered equal if</p>
<ul>
<li>Their arrays giving the number of stones on each pile have the same
length; and</li>
<li>For each index<code>i</code> into the arrays giving the number of stones on
each pile, the elements at location <code>i</code> of these arrays have the
same value, and the elements at location <code>i</code> of the arrays giving
the limit for each pile have the same value.</li>
</ul>
<p>Code to make this determination and return the result can be inserted
into the above template defining of the <code>==</code> operator, and the other two
templates can be customized to refer to this type.</p>
<p>Any class that redefines equality should also redefine the hash code
computation to be consistent with the equality definition. We will show
how to do this in the next section.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Hash Codes</h1></div>
<h2 id="hash-codes">Hash Codes</h2>
<p>Whenever equality is redefined for a type, the hash code computation for
that type needs to be redefined in a consistent way. This is done by


<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl/#overriding">overriding</a> that
type&rsquo;s


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.gethashcode?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>GetHashCode</strong></a>
method. In order for hashing to be implemented correctly and
efficiently, this method should satisfy the following goals:</p>
<ul>
<li>Equal keys must have the same hash code. This is necessary in order
for the <strong>Dictionary&lt;TKey,Â TValue&gt;</strong> class to be able to find a
given key that it has stored. On the other hand, because the number
of possible keys is usually larger than the number of possible hash
codes, unequal keys are also allowed to have the same hash code.</li>
<li>The computation should be done quickly.</li>
<li>Hash codes should be uniformly distributed even if the keys are not.</li>
</ul>
<p>The last goal above may seem rather daunting, particularly in light of
our desire for a quick computation. In fact, it is impossible to
guarantee in general &mdash; provided there are more than

<span class="math align-center">$ 2^{32}(kÂ -Â 1) $</span> possible keys from which to choose, no
matter how the hash code computation is implemented, we can always find
at least 
<span class="math align-center">$ k $</span> keys with the same hash code. However, this is a problem
that has been studied a great deal, and several techniques have been
developed that are effective in practice. We will caution, however, that
not every technique that looks like it should be effective actually is
in practice. It is best to use techniques that have been demonstrated to
be effective in a wide variety of applications. We will examine one of
these techniques in what follows.</p>
<p>A guiding principle in developing hashing techniques is to use all
information available in the key. By using all the information, we will
be sure to use the information that distinguishes this key from other
keys. This information includes not just the values of the individual
parts of the the key, but also the order in which they occur, provided
this order is significant in distinguishing unequal keys. For example,
the strings, &ldquo;being&rdquo; and &ldquo;begin&rdquo; contain the same letters, but are
different because the letters occur in a different order.</p>
<p>One specific technique initializes the hash code to 0, then processes
the key one component at a time. These components may be bytes,
characters, or other parts no larger than 32 bits each. For example, for
the Nim board positions discussed in


<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/memoization">&ldquo;Memoization&rdquo;</a>, the
components would be the number of stones on each pile, the limit for
each pile, and the total number of piles (to distinguish between a board
ending with empty piles and a board with fewer piles). For each
component, it does the following:</p>
<ul>
<li>Multiply the hash code by some fixed odd integer.</li>
<li>Add the current component to the hash code.</li>
</ul>
<p>Due to the repeated
multiplications, the above computation will often overflow an <strong>int</strong>.
This is not a problem &mdash; the remaining bits are sufficient for the hash code.</p>
<p>In order to understand this computation a little better, let&rsquo;s first
ignore the effect of this overflow. We&rsquo;ll denote the fixed odd integer
by 
<span class="math align-center">$ x $</span>, and the components of the key as
<span style="white-space:nowrap">
<span class="math align-center">$ k_1,Â \dots,Â k_n $</span>.</span> Then
this is the result of the computation:</p>

<span class="math align-left">
$$(\dotsÂ ((0xÂ +Â k_1)xÂ +Â k_2)Â \dots)xÂ +Â k_nÂ =Â k_1 x^{n-1}Â +Â k_2 x^{n-2}Â +Â \dotsÂ +Â k_n.$$
</span>
<p>Because the above is a polynomial, this hashing scheme is called
<em>polynomial hashing</em>. While the computation itself is efficient,
performing just a couple of arithmetic operations on each component, the
result is to multiply each component by a unique value (
<span class="math align-center">$ x^i $</span>
for some <span style="white-space:nowrap">
<span class="math align-center">$ i $</span>)</span> depending on its position within the key.</p>
<p>Now let&rsquo;s consider the effect of overflow on the above polynomial. What
this does is to keep only the low-order 32 bits of the value of the
polynomial. Looking at it another way, we end up multiplying

<span class="math align-center">$ k_i $</span> by only the low-order 32 bits of <span style="white-space:nowrap">
<span class="math align-center">$ x^{n-i} $</span>.</span>
This helps to explain why 
<span class="math align-center">$ x $</span> is an odd number &mdash; raising an even number
to the <span style="white-space:nowrap">
<span class="math align-center">$ i $</span>th</span> power forms a number ending in 
<span class="math align-center">$ i $</span> 0s in binary. Thus, if
there are more than 32 components in the key, all but the last 32 will
be multiplied by <span style="white-space:nowrap">
<span class="math align-center">$ 0 $</span>,</span> and hence, ignored.</p>
<p>There are other potential problems with using certain odd numbers for

<span class="math align-center">$ x $</span>. For example, we wouldn&rsquo;t want to use <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>,</span> because that would result
in simply adding all the components together, and we would lose any
information regarding their positions within the key. Using 
<span class="math align-center">$ -1 $</span> would be
almost as bad, as we would multiply all components in odd positions by

<span class="math align-center">$ -1 $</span> and all components in even positions by <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span> The effect of overflow can
cause similar behavior; for example, if we place

<span class="math align-center">$ 2^{31}Â -Â 1 $</span> in an <strong>int</strong> variable and square it,
the overflow causes the result to be <span style="white-space:nowrap">1.</span> Successive powers will then
alternate between 
<span class="math align-center">$ 2^{31}Â -Â 1 $</span> and <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span></p>
<p>It turns out that this cyclic behavior occurs no matter what odd number
we use for <span style="white-space:nowrap">
<span class="math align-center">$ x $</span>.</span> However, in most cases the cycle is long enough that
keys of a reasonable size will have each component multiplied by a
unique value. The only odd numbers that result in short cycles are those
that are adjacent to a multiple of a large power of 
<span class="math align-center">$ 2 $</span> (note that 
<span class="math align-center">$ 0 $</span> is a
multiple of any integer).</p>
<p>The other potential problem occurs when we are hashing fairly short
keys. In such cases, if 
<span class="math align-center">$ x $</span> is also small enough, the values computed
will all be much smaller than the maximum possible integer value
<span style="white-space:nowrap">
<span class="math align-center">$ (2^{31}Â -Â 1) $</span>.</span> As a result, we will not have a uniform
distribution of values. We therefore want to avoid making 
<span class="math align-center">$ x $</span> too small.</p>
<p>Putting all this together, choosing 
<span class="math align-center">$ x $</span> to be an odd number between 
<span class="math align-center">$ 30 $</span>
and 
<span class="math align-center">$ 40 $</span> works pretty well. These values are large enough so that seven key
components will usually overflow an <strong>int</strong>. Furthermore, they all have
a cycle length greater than 
<span class="math align-center">$ 100 $</span> million.</p>
<p>We should always save the hash code in a <strong>private</strong> field after we
compute it so that subsequent requests for the same hash code don&rsquo;t
result in repeating the computation. This can be done in either of two
ways. One way is to compute it in an <em>eager</em> fashion by doing it in the
constructor. When doing it this way, the <strong>GetHashCode</strong> method simply
needs to return the value of the <strong>private</strong> field. While this is often
the easiest way, it sometimes results in computing a hash code that we
end up not using. The alternative is to compute it in a <em>lazy</em> fashion.
This requires an extra <strong>private</strong> field of type <strong>bool</strong>. This field is
used to indicate whether the hash code has been computed yet or not.
With this approach, the <strong>GetHashCode</strong> method first checks this field
to see if the hash code has been computed. If not, it computes the hash
code and saves it in its field. In either case, it then returns the
value of the hash code field.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Graphs</h1></div>
<h2 id="graphs">Graphs</h2>
<p>In this chapter, we examine a data structure known as a <em>graph</em>, which
can be used to represent a wide variety of data sets in which pairs of
data items are related in a certain way. Examples of such data sets
include road maps, data flows or control flows in programs, and
representations of communication networks. Because graphs are so widely
used, numerous algorithms on graphs have been devised. As a result, the
same algorithm can often be applied to a variety of applications because
the underlying data structure for each application is a graph.</p>
<p>We will begin by presenting the basic definitions and concepts, and
describing the use of a data type that implements a graph. We will then
examine how to use a graph to find shortest paths in a road map. We will
then examine the related problem of finding shortest paths through a
maze. We will conclude by discussing how to implement a graph.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Introduction to Graphs</h1></div>
<h2 id="introduction-to-graphs">Introduction to Graphs</h2>
<p>There are two kinds of graphs: undirected and directed. An <em>undirected
graph</em> consists of:</p>
<ul>
<li>a finite set of <em>nodes</em>; and</li>
<li>a finite set of <em>edges</em>, which are 2-element subsets of the nodes.</li>
</ul>
<p>The fact that edges are 2-element sets means that the nodes that
comprise an edge must be distinct. Furthermore, within a set, there is
no notion of a &ldquo;first&rdquo; element or a &ldquo;second&rdquo; element &mdash; there are just
two elements. Thus, an edge expresses some symmetric relationship
between two nodes; i.e., if 
<span class="math align-center">$ \\{u,Â v\\} $</span> is an edge then node 
<span class="math align-center">$ u $</span> is
<em>adjacent</em> to node <span style="white-space:nowrap">
<span class="math align-center">$ v $</span>,</span> and node 
<span class="math align-center">$ v $</span> is adjacent to node <span style="white-space:nowrap">
<span class="math align-center">$ u $</span>.</span> We also
might associate some data, such as a label or a length, with an edge.</p>
<p>We can think of an edge as &ldquo;connecting&rdquo; the two nodes that comprise it.
We can then draw an undirected graph using circles for the nodes and
lines connecting two distinct nodes for the edges. Following is an
example of an undirected graph with numeric values associated with the
edges:</p>
<p><img src="undirected-graph.jpg" alt="An undirected graph"></p>
<p>A <em>directed graph</em> is similar to an undirected graph, but the edges are
ordered pairs of distinct nodes rather than 2-element sets. Within an
ordered pair, there is a first element and a second element. We call the
first node of an edge its <em>source</em> and the second node its
<em>destination</em>. Thus, an edge in a directed graph expresses an asymmetric
relationship between two nodes; i.e., if 
<span class="math align-center">$ (u,Â v) $</span> is an edge, then

<span class="math align-center">$ v $</span> is adjacent to <span style="white-space:nowrap">
<span class="math align-center">$ u $</span>,</span> but 
<span class="math align-center">$ u $</span> is not adjacent to 
<span class="math align-center">$ v $</span> unless

<span class="math align-center">$ (v,Â u) $</span> is also an edge in the graph. As with undirected
graphs, we might associate data with an edge in a directed graph.</p>
<p>We can draw directed graphs like we draw undirected graphs, except that
we use an arrow to distinguish between the source and the destination of
an edge. Specifically, the arrows point from the source to the
destination. If we have edges 
<span class="math align-center">$ (u,Â v) $</span> and <span style="white-space:nowrap">
<span class="math align-center">$ (v,Â u) $</span>,</span> and if
these edges have the same data associated with them, we might simplify
the drawing by using a single line with arrows in both directions.
Following is an example of a directed graph with numeric values
associated with the edges:</p>
<p><img src="directed-graph.jpg" alt="A directed graph"></p>
<p>

<a href="Ksu.Cis300.Graphs.dll">This DLL</a> contains the definition of a namespace
<strong>Ksu.Cis300.Graphs</strong> containing a class
<strong>DirectedGraph&lt;TNode,Â TEdgeData&gt;</strong> and a structure
<strong>Edge&lt;TNode,Â TEdgeData&gt;</strong>. The class
<strong>DirectedGraph&lt;TNode,Â TEdgeData&gt;</strong> implements a directed
graph whose nodes are of type <strong>TNode</strong>, which must be a type suitable
for hashing. The edges each store a data item of type <strong>TEdgeData</strong>,
which may be any type. These edges can be represented using instances of
the <strong>Edge&lt;TNode,Â TEdgeData&gt;</strong> structure. We also can use the
<strong>DirectedGraph&lt;TNode,Â TEdgeData&gt;</strong> class to represent undirected
graphs &mdash; we simply make sure that whenever there is an edge
<span style="white-space:nowrap">
<span class="math align-center">$ (u,Â v) $</span>,</span> there is also an edge 
<span class="math align-center">$ (v,Â u) $</span> containing the
same data.</p>
<p>The <strong>Edge&lt;TNode,Â TEdgeData&gt;</strong> structure contains the following
<strong>public</strong> members:</p>
<ul>
<li><strong>Edge(TNode source, TNode dest, TEdgeData data)</strong>: This constructor
constructs an edge leading from <strong>source</strong> to <strong>dest</strong> and having
<strong>data</strong> as its data item.</li>
<li><strong>TNode Source</strong>: This property gets the source node for the edge.</li>
<li><strong>TNode Destination</strong>: This property gets the destination node for
the edge.</li>
<li><strong>TEdgeData Data</strong>: This property gets the data associated with the
edge.</li>
</ul>
<p>Note that because no <strong>public</strong> members change the structure, it is
immutable.</p>
<p>The <strong>DirectedGraph&lt;TNode,Â TEdgeData&gt;</strong> class contains the
following <strong>public</strong> members:</p>
<ul>
<li><strong>DirectedGraph()</strong>: This constructor constructs a directed graph
with no nodes or edges.</li>
<li><strong>void AddNode(TNode node)</strong>: This method adds the given node to the
graph. If this node already is in the graph, it throws an
<strong>ArgumentException</strong>. If <code>node</code> is <strong>null</strong>, it throws an
<strong>ArgumentNullException</strong>.</li>
<li><strong>void AddEdge(TNode source, TNode dest, TEdgeData value)</strong>: This
method adds a new edge from <code>source</code> to <code>dest</code>, with <code>value</code> as its
associated value. If either <code>source</code> or <code>dest</code> is not already in the
graph, it is automatically added. If <code>source</code> and <code>dest</code> are the
same node, or if there is already an edge from <code>source</code> to <code>dest</code>,
it throws an <strong>ArgumentException</strong>. If either <code>source</code> or <code>dest</code> is
<strong>null</strong>, it throws an <strong>ArgumentNullException</strong>.</li>
<li><strong>bool TryGetEdge(TNode source, TNode dest, out TEdgeData value)</strong>:
This method tries to get the value associated with the edge from
<code>source</code> to <code>dest</code>. If this edge exists, it sets <code>value</code> to the
value associated with this edge and returns <strong>true</strong>; otherwise, it
sets <code>value</code> to the default value for the <strong>TEdge</strong> type and returns
<strong>false</strong>.</li>
<li><strong>int NodeCount</strong>: This property gets the number of nodes in the
graph.</li>
<li><strong>int EdgeCount</strong>: This property gets the number of edges in the
graph.</li>
<li><strong>bool ContainsNode(TNode node)</strong>: This method returns whether the
graph contains the given node. If <code>node</code> is <strong>null</strong>, it throws an
<strong>ArgumentNullException</strong>.</li>
<li><strong>bool ContainsEdge(TNode source, TNode dest)</strong>: This method returns
whether the graph contains an edge from <code>source</code> to <code>dest</code>.</li>
<li><strong>IEnumerable&lt;TNode&gt; Nodes</strong>: This property gets an enumerable
collection of the nodes in the graph.</li>
<li><strong>IEnumerable&lt;Edge&lt;TNode,Â TEdgeData&gt;&gt; OutgoingEdges(TNode
source)</strong>: This method gets an enumerable collection of the outgoing
edges from the given node. If <code>source</code> is not a node in the graph,
it throws an <strong>ArgumentException</strong>. If <code>source</code> is <strong>null</strong>, it
throws an <strong>ArgumentNullException</strong>. Otherwise, each edge in the
collection returned is represented by an
<strong>Edge&lt;TNode,Â TEdgeData&gt;</strong></li>
</ul>
<p>This implementation is somewhat limited in its utility, as nodes or
edges cannot be removed, and values associated with edges cannot be
changed. However, it will be sufficient for our purposes. We will
examine its implementation details in 

<a href="https://ksu-cs-textbooks.github.io/cis300/graphs/impl">a later
section</a>. For now, we will
examine how it can be used.</p>
<p>Building a graph is straightforward using the constructor and the
<strong>AddNode</strong> and/or <strong>AddEdge</strong> methods. Note that because the
<strong>AddEdge</strong> method will automatically add given nodes that are not
already in the graph, the <strong>AddNode</strong> method is only needed when we need
to add a node that may have no incoming or outgoing edges.</p>
<p>For many graph algorithms, we need to process all of the edges in some
way. Often the order in which we process them is important, but not in
all cases. If we simply need to process all of the edges in some order
we can use <strong>foreach</strong> loops with the last two properties listed above
to accomplish this:</p>
<ul>
<li>For each node in the graph:
<ul>
<li>For each outgoing edge from that node:
<ul>
<li>Process this edge.</li>
</ul>
</li>
</ul>
</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Shortest Paths</h1></div>
<h2 id="shortest-paths">Shortest Paths</h2>
<p>In this section, we will consider a common graph problem &mdash; that of
finding a shortest path from a node <em>u</em> to a node <em>v</em> in a directed
graph. We will assume that each edge contains as its data a nonnegative
number. This number may represent a physical distance or some other
cost, but for simplicity, we will refer to this value as the <em>length</em> of
the edge. We can then define the length of a path to be the sum of the
lengths of all the edges along that path. A shortest path from <em>u</em> to
<em>v</em> is then a path from <em>u</em> to <em>v</em> with minimum length. Thus, for
example, the shortest path from <em>a</em> to <em>h</em> in the graph below is
<em>a</em>-<em>c</em>-<em>g</em>-<em>f</em>-<em>h</em>, and its length is
4.8Â +Â 6.4Â +Â 4.9Â +Â 3.2Â =Â 19.3.</p>
<p><img src="directed-graph.jpg" alt="A directed graph"></p>
<p>The biggest challenge in finding an algorithm for this problem is that
the number of paths in a graph can be huge, even for relatively small
graphs. For example, a directed graph with 15 nodes might contain over
10 billion paths from a node <em>u</em> to a node <em>v</em>. Clearly, an algorithm
that simply checks all paths would be impractical for solving a problem
such as finding the shortest route between two given locations in North America.
In what follows, we will present a much more efficient algorithm due to
Edsger W. Dijkstra.</p>
<p>First, it helps to realize that when we are looking for a shortest path
from <em>u</em> to <em>v</em>, we are likely to find other shortest paths along the
way. Specifically, if node <em>w</em> is on the shortest path from <em>u</em> to <em>v</em>,
then taking that same path but stopping at <em>w</em> gives us a shortest path
from <em>u</em> to <em>w</em>. Returning to the above example, the shortest path from
<em>a</em> to <em>h</em> also gives us shortest paths from <em>a</em> to each of the nodes
<em>c</em>, <em>g</em>, and <em>f</em>. For this reason, we will generalize the problem to
that of finding the shortest paths from a given node <em>u</em> to each of the
nodes in the graph. This problem is known as the <em>single-source shortest
paths</em> problem. This problem is a bit easier to think about because we
can use shortest path information that we have already computed to find
additional shortest path information. Then once we have an algorithm for
this problem, we can easily modify it so that as soon as it finds the
shortest path to our actual goal node <em>v</em>, we terminate it.</p>
<p>Dijkstra&rsquo;s algorithm progresses by finding a shortest path to one node
at a time. Let <em>S</em> denote the set of nodes to which it has found a
shortest path. Initially, <em>S</em> will contain only <em>u</em>, as the shortest
path from <em>u</em> to <em>u</em> is the empty path. At each step, it finds a
shortest path that begins at <em>u</em> and ends at a node outside of <em>S</em>.
Let&rsquo;s call the last node in this path <em>x</em>. Certainly, if this path to
<em>x</em> is the shortest to <em>any</em> node outside of <em>S</em>, it is also the
shortest to <em>x</em>. The algorithm therefore adds <em>x</em> to <em>S</em>, and continues
to the next step.</p>
<p>What makes Dijkstra&rsquo;s algorithm efficient is the way in which it finds
each of the paths described above. Recall that each edge has a
nonnegative length. Hence, once a given path reaches some node outside
of <em>S</em>, we cannot make the path any shorter by extending it further. We
therefore only need to consider paths that remain in <em>S</em> until the last
edge, which goes from a node in <em>S</em> to a node outside of <em>S</em>. We will
refer to such edges as <em>eligible</em>. We are therefore looking for a
shortest path whose last edge is eligible.</p>
<p>Suppose (<em>w</em>, <em>x</em>) is an eligible edge; i.e., <em>w</em> is in <em>S</em>, but <em>x</em> is
not. Because <em>w</em> is in <em>S</em>, we know the length of the shortest path to
<em>w</em>. The length of a shortest path ending in (<em>w</em>, <em>x</em>) is simply the
length of the shortest path to <em>w</em>, plus the length of (<em>w</em>, <em>x</em>).</p>
<p>Let us therefore assign to each eligible edge (<em>w</em>, <em>x</em>) a priority
equal to the length of the shortest path to <em>w</em>, plus the length of
(<em>w</em>, <em>x</em>). A shortest path ending in an eligible edge therefore has a
length equal to the minimum priority of any eligible edge. Furthermore,
if the eligible edge with minimum priority is (<em>w</em>, <em>x</em>), then the
shortest path to <em>x</em> is the shortest path to <em>w</em>, followed by (<em>w</em>,
<em>x</em>).</p>
<p>We can efficiently find an eligible edge with minimum priority if we
store all eligible edges in a <strong>MinPriorityQueue&lt;TEdgeData,
Edge&lt;TNode, TEdgeData&gt;&gt;</strong>. Note however, that when we include <em>x</em> in
<em>S</em> as a result of removing (<em>w, x</em>) from the queue, it will cause any
other eligible edges leading to <em>x</em> to become ineligible, as <em>x</em> will no
longer be outside of <em>S</em>. Because removing these edges from the
min-priority queue is difficult, we will simply leave them in the queue,
and discard them whenever they have minimum priority. This min-priority
queue will therefore contain all eligible edges, plus some edges whose
endpoints are both in <em>S</em>.</p>
<p>We also need a data structure to keep track of the shortest paths we
have found. A convenient way to do this is, for each node to which we
have found a shortest path, to keep track of this node&rsquo;s predecessor on
this path. This will allow us to retrieve a shortest path to a node <em>v</em>
by starting at <em>v</em> and tracing the path backwards using the predecessor
of each node until we reach <em>u</em>. A <strong>Dictionary&lt;TNode,Â TNode&gt;</strong> is
an ideal choice for this data structure. The keys in the dictionary will
be the nodes in <em>S</em>, and the value associated with a key will be that
key&rsquo;s predecessor on a shortest path. For node <em>u</em>, which is in <em>S</em> but
has no predecessor on its shortest path, we can associate a value of <em>u</em>
itself.</p>
<p>The algorithm begins by adding the key <em>u</em> with the value <em>u</em> to a new
dictionary. Because all of the outgoing edges from <em>u</em> are now eligible,
it then places each of these edges into the min-priority queue. Because
<em>u</em> is the source node of each of these edges, and the shortest path
from <em>u</em> to <em>u</em> has length 0, the priority of each of these edges will
simply be its length.</p>
<p>Once the above initialization is done, the algorithm enters a loop that
iterates as long as the min-priority queue is nonempty. An iteration
begins by obtaining the minimum priority <em>p</em> from the min-priority
queue, then removing an edge (<em>w</em>,Â <em>x</em>) with minimum priority. If <em>x</em>
is a key in the dictionary, we can ignore this edge and go on to the
next iteration. Otherwise, we add to the dictionary the key <em>x</em> with a
value of <em>w</em>. Because we now have a shortest path to <em>x</em>, there may be
more eligible edges that we need to add to the min-priority queue. These
edges will be edges from <em>x</em> that lead to nodes that are not keys in the
dictionary; however, because the min-priority queue can contain edges to
nodes that are already keys, we can simply add all outgoing edges from
<em>x</em>. Because the length of the shortest path to <em>x</em> is <em>p</em>, the priority
of each of these outgoing edges is <em>p</em> plus the length of the outgoing edge.</p>
<p>Note that an edge is added to the min-priority queue only when its
source is added as a key to the dictionary. Because we can only add a
key once, each edge is added to the min-priority queue at most once.
Because each iteration removes an edge from the min-priority queue, the
min-priority queue must eventually become empty, causing the loop to
terminate. When the min-priority queue becomes empty, there can be no
eligible edges; hence, when the loop terminates, the algorithm has found
a shortest path to every reachable node.</p>
<p>We can now modify the above algorithm so that it finds a shortest path
from <em>u</em> to a given node <em>v</em>. Each time we add a new key to the
dictionary, we check to see if this key is <em>v</em>; if so, we return the
dictionary immediately. We might also want to return this path&rsquo;s length,
which is the priority of the edge leading to <em>v</em>. In this case, we could
return the dictionary as an <strong>out</strong> parameter. Doing this would allow us
to return a special value (e.g., a negative number) if we get through
the loop without adding <em>v</em>, as this would indicate that <em>v</em> is
unreachable. This modified algorithm is therefore as follows:</p>
<ul>
<li>Construct a new dictionary and a new min-priority queue.</li>
<li>Add to the dictionary the key <em>u</em> with value <em>u</em>.</li>
<li>If <em>u</em>Â =Â <em>v</em>, return 0.</li>
<li>For each outgoing edge (<em>u</em>,Â <em>w</em>) from <em>u</em>:
<ul>
<li>Add (<em>u</em>,Â <em>w</em>) to the min-priority queue with a priority of
the length of this edge.</li>
</ul>
</li>
<li>While the min-priority queue is nonempty:
<ul>
<li>Get the minimum priority <em>p</em> from the min-priority queue.</li>
<li>Remove an edge (<em>w</em>,Â <em>x</em>) with minimum priority from the
min-priority queue.</li>
<li>If <em>x</em> is not a key in the dictionary:
<ul>
<li>Add to the dictionary the key <em>x</em> with a value of <em>w</em>.</li>
<li>If <em>x</em>Â =Â <em>v</em>, return <em>p</em>.</li>
<li>For each outgoing edge (<em>x</em>,Â <em>y</em>) from <em>x</em>:
<ul>
<li>Add (<em>x</em>,Â <em>y</em>) to the min-priority queue with
priority <em>p</em> plus the length of (<em>x</em>,Â <em>y</em>).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Return a negative value.</li>
</ul>
<p>The above algorithm computes all of the path information we need, but we
still need to extract from the dictionary the shortest path from <em>u</em> to
<em>v</em>. Because the value for each key is that key&rsquo;s predecessor, we can
walk backward through this path, starting with <em>v</em>. To get the path in
the proper order, we can push the nodes onto a stack; then we can remove
them in the proper order. Thus, we can extract the shortest path as
follows:</p>
<ul>
<li>Construct a new stack.</li>
<li>Set the current node to <em>v</em>.</li>
<li>While the current node is not <em>u</em>:
<ul>
<li>Push the current node onto the stack.</li>
<li>Set the current node to its value in the dictionary.</li>
</ul>
</li>
<li>Process <em>u</em>.</li>
<li>While the stack is not empty:
<ul>
<li>Pop the top node from the stack and process it.</li>
</ul>
</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Unweighted Shortest Paths</h1></div>
<h2 id="unweighted-shortest-paths">Unweighted Shortest Paths</h2>
<p>In some shortest path problems, all edges have the same length. For
example, we may be trying to find the shortest path out of a maze. Each
cell in the maze is a node, and an edge connects two nodes if we can
move between them in a single step. In this problem, we simply want to
minimize the number of edges in a path to an exit. We therefore say that
the edges are <em>unweighted</em> &mdash; they contain no explicit length
information, and the length of each edge is considered to be <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span></p>
<p>We could of course apply 

<a href="https://ksu-cs-textbooks.github.io/cis300/graphs/dijkstra/">Dijkstra&rsquo;s
algorithm</a> to this
problem, using 
<span class="math align-center">$ 1 $</span> as the length of each edge. However, if analyze what
this algorithm does in this case, we find that we can optimize it to
achieve significantly better performance.</p>
<p>The optimization revolves around the use of the min-priority queue. Note
that Dijkstra&rsquo;s algorithm first adds all outgoing edges from the start
node <em>u</em> to the min-priority queue, using their lengths as their
priorities. For unweighted edges, each of these priorities will be <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span> As
the algorithm progresses it retrieves the minimum priority and removes
an edge having this priority. If it adds any new edges before removing
the next edge, they will all have a priority 
<span class="math align-center">$ 1 $</span> greater than the priority
of the edge just removed.</p>
<p>We claim that this behavior causes the priorities in the min-priority
queue to differ by no more than 
<span class="math align-center">$ 1 $</span>. To see this, we will show that we can
never reach a point where we change the maximum difference in priorities
from no more than 
<span class="math align-center">$ 1 $</span> to more than <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span> First observe that when the outgoing
edges from <em>u</em> are added, the priorities all differ by
<span style="white-space:nowrap">
<span class="math align-center">$ 0Â \leqÂ 1 $</span>.</span> Removing an edge can&rsquo;t increase the
difference in the priorities stored. Suppose the edge we remove has
priority <span style="white-space:nowrap">
<span class="math align-center">$ p $</span>.</span> Assuming we have not yet achieved a priority difference
greater than <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>,</span> any priorities remaining in the min-priority queue must
be either 
<span class="math align-center">$ p $</span> or <span style="white-space:nowrap">
<span class="math align-center">$ pÂ +Â 1 $</span>.</span> Any edges we add before removing the
next edge have priority <span style="white-space:nowrap">
<span class="math align-center">$ pÂ +Â 1 $</span>.</span> Hence, the priority difference
remains no more than <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span> Because we have covered all changes to the
priority queue, we can never cause the priority difference to exceed <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span></p>
<p>Based on the above claim, we can now claim that whenever an edge is
added, its priority is the largest of any in the min-priority queue.
This is certainly true when we add the outgoing edges from <em>u</em>, as all
these edges have the same priority. Furthermore, whenever we remove an
edge with priority <span style="white-space:nowrap">
<span class="math align-center">$ p $</span>,</span> any edges we subsequently add have priority
<span style="white-space:nowrap">
<span class="math align-center">$ pÂ +Â 1 $</span>,</span> which must be the maximum priority in the min-priority
queue.</p>
<p>As a result of this behavior, we can replace the min-priority queue with
an ordinary 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/queues/">FIFO queue</a>, and
for unweighted edges, the behavior of the algorithm will be the same.
Because accessing a FIFO queue is more efficient than accessing a
min-priority queue, the resulting algorithm, known as <em>breadth-first
search</em>, is also more efficient.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Implementing a Graph</h1></div>
<h2 id="implementing-a-graph">Implementing a Graph</h2>
<p>Traditionally, there are two main techniques for implementing a graph.
Each of these techniques has advantages and disadvantages, depending on
the characteristics of the graph. In this section, we describe the
implementation of the <strong>DirectedGraph&lt;TNode,Â TEdgeData&gt;</strong> class
from 

<a href="Ksu.Cis300.Graphs.dll"><strong>Ksu.Cis300.Graphs.dll</strong></a>. This
implementation borrows from both traditional techniques to obtain an
implementation that provides good performance for any graph. In what
follows, we will first describe the two traditional techniques and
discuss the strengths and weaknesses of each. We will then outline the
implementation of <strong>DirectedGraph&lt;TNode,Â TEdgeData&gt;</strong>.</p>
<p>The first traditional technique is to use what we call an <em>adjacency
matrix</em>. This matrix is an 
<span class="math align-center">$ n \times n $</span> boolean array, where 
<span class="math align-center">$ n $</span> is the number
of nodes in the graph. In this implementation, each node is represented
by an <strong>int</strong> value <span style="white-space:nowrap">
<span class="math align-center">$ i $</span>,</span> where <span style="white-space:nowrap">
<span class="math align-center">$ 0Â \leqÂ iÂ \ltÂ n $</span>.</span> The
value at row 
<span class="math align-center">$ i $</span> and column 
<span class="math align-center">$ j $</span> will be <strong>true</strong> if there is an edge
from node 
<span class="math align-center">$ i $</span> to node <span style="white-space:nowrap">
<span class="math align-center">$ j $</span>.</span></p>
<p>The main advantage to this technique is that we can very quickly
determine whether an edge exists &mdash; we only need to look up one element
in an array. There are several disadvantages, however. First, we are
forced to use a specific range of <strong>int</strong> values as the nodes. If we
wish to have a generic node type, we need an additional data structure
(such as a <strong>Dictionary&lt;TNode,Â int&gt;</strong>) to map each node to its
<strong>int</strong> representation. It also fails to provide a way to associate a
value with an edge; hence, we would need an additional data structure
(such as a <strong>TEdgeData[int,Â int]</strong>) to store this information.</p>
<p>Perhaps the most serious shortcoming for the adjacency matrix, however,
is that if the graph contains a large number of nodes, but relatively
few edges, it wastes a huge amount of space. Suppose, for example, that
we have a graph representing street information, and suppose there are
about one million nodes in this graph. We might expect the graph to
contain around three million edges. However, an adjacency matrix would
require one trillion entries, almost all of which will be <strong>false</strong>.
Similarly, finding the edges from a given node would require examining
an entire row of a million elements to find the three or four outgoing
edges from that node.</p>
<p>The other traditional technique involves using what we call <em>adjacency
lists</em>. An adjacency list is simply a linked list containing
descriptions of the outgoing edges from a single node. These lists are
traditionally grouped together in an array of size <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>,</span> where 
<span class="math align-center">$ n $</span> is
again the number of nodes in the graph. As with the adjacency matrix
technique, the nodes must be nonnegative <strong>int</strong>s less than <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>.</span> The
linked list at location 
<span class="math align-center">$ i $</span> of the array then contains the descriptions
of the outgoing edges from node 
<span class="math align-center">$ i $</span>.</p>
<p>One advantage to this technique is that the amount of space it uses is
proportional to the size of the graph (i.e., the number of nodes plus
the number of edges). Furthermore, obtaining the outgoing edges from a
given node simply requires traversing the linked list containing the
descriptions of these edges. Note also that we can store the data
associated with an edge within the linked list cell describing that
edge. However, this technique still requires some modification if we
wish to use a generic node type. A more serious weakness, though, is
that in order to determine if a given edge exists, we must search
through potentially all of the outgoing edges from a given node. If the
number of edges is large in comparison to the number of nodes, this
search can be expensive.</p>
<p>As we mentioned above, our implementation of
<strong>DirectedGraph&lt;TNode,Â TEdgeData&gt;</strong> borrows from both of these
traditional techniques. We start by modifying the adjacency lists
technique to use a <strong>Dictionary&lt;TNode,Â LinkedListCell&lt;TNode&gt;&gt;</strong>
instead of an array of linked lists. Thus, we can accommodate a generic
node type while maintaining efficient access to the adjacency lists.
While a dictionary lookup is not quite as efficient as an array lookup,
a dictionary would provide the most efficient way of mapping nodes of a
generic type to <strong>int</strong> array indices. Using a dictionary instead of an
array eliminates the need to do a subsequent array lookup. The linked
list associated with a given node in this dictionary will then contain
the destination node of each outgoing edge from the given node.</p>
<p>In addition to this dictionary, we use a
<strong>Dictionary&lt;(TNode,Â TNode),Â TEdgeData&gt;</strong> to facilitate
efficient edge lookups. The notation <strong>(T1,Â T2)</strong> defines a <em>tuple</em>, which is an ordered pair of elements, the first of type <strong>T1</strong>,
and the second of type <strong>T2</strong>. Elements of this type are described with
similar notation, <code>(x, y)</code>, where <code>x</code> is of type <strong>T1</strong> and <code>y</code> is of
type <strong>T2</strong>. These elements can be accessed using the <strong>public</strong>
properties <strong>Item1</strong> and <strong>Item2</strong>. In general, longer tuples can be
defined similarly.</p>
<p>This second dictionary essentially fills the role of an adjacency
matrix, while accommodating a generic node type and using space more
efficiently. Specifically, a tuple whose <strong>Item1</strong> is <code>u</code> and whose
<strong>Item2</strong> is <code>v</code> will be a key in this dictionary if there is an edge
from node <code>u</code> to node <code>v</code>. The value associated with this key will be
the data associated with this edge. Thus, looking up an edge consists of
a single dictionary lookup.</p>
<p>The two dictionaries described above are the only <strong>private</strong> fields our
implementation needs. We will refer to them as <code>_adjacencyLists</code> and
<code>_edges</code>, respectively. Because we can initialize both fields to new
dictionaries, there is no need to define a constructor. Furthermore,
given these two dictionaries, most of the <strong>public</strong> methods and
properties (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/graphs/intro">&ldquo;Introduction to
Graphs&rdquo;</a>) can be
implemented using a single call to one of the members of one of these
dictionaries:</p>
<ul>
<li><strong>void AddNode(TNode node)</strong>: We can implement this method using the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.add?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Add</strong></a>
method of <code>_adjacencyLists</code>. We associate an empty linked list with
this node.</li>
<li><strong>void AddEdge(TNode source, TNode dest, TEdgeData value)</strong>: See
below.</li>
<li><strong>bool TryGetEdge(TNode source, TNode dest, out TEdgeData value)</strong>:
We can implement this method using the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.trygetvalue?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>TryGetValue</strong></a>
method of <code>_edges</code>.</li>
<li><strong>int NodeCount</strong>: Because <code>_adjacencyLists</code> contains all of the
nodes as keys, we can implement this property using this
dictionary&rsquo;s


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.count?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Count</strong></a>
property.</li>
<li><strong>int EdgeCount</strong>: We can implement this property using the
<strong>Count</strong> property of <code>_edges</code>.</li>
<li><strong>bool ContainsNode(TNode node)</strong>: We can implement this method
using the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.containskey?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>ContainsKey</strong></a>
method of <code>_adjacencyLists</code>.</li>
<li><strong>bool ContainsEdge(TNode source, TNode dest)</strong>: We can implement
this method using the <strong>ContainsKey</strong> method of <code>_edges</code>.</li>
<li><strong>IEnumerable&lt;TNode&gt; Nodes</strong>: We can implement this property using
the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.keys?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Keys</strong></a>
property of <code>_adjacencyLists</code>.</li>
<li><strong>IEnumerable&lt;Edge&lt;TNode,Â TEdgeData&gt;&gt; OutgoingEdges(TNode
source)</strong>: See below.</li>
</ul>
<p>Let&rsquo;s now consider the implementation of the <strong>AddEdge</strong> method. Recall
from 

<a href="https://ksu-cs-textbooks.github.io/cis300/graphs/intro">&ldquo;Introduction to
Graphs&rdquo;</a> that this method
adds an edge from <code>source</code> to <code>dest</code> with data item <code>value</code>. If either
<code>source</code> or <code>dest</code> is not already in the graph, it will be added. If
either <code>source</code> or <code>dest</code> is <strong>null</strong>, it will throw an
<strong>ArgumentNullException</strong>. If <code>source</code> and <code>dest</code> are the same, or if
the edge already exists in the graph, it will throw an
<strong>ArgumentException</strong>.</p>
<p>In order to avoid changing the graph if the parameters are bad, we
should do the error checking first. However, there is no need to check
whether the edge already exists, provided we update <code>_edges</code> using its


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.add?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Add</strong></a>
method, and that we do this before making any other changes to the
graph. Because a dictionary&rsquo;s <strong>Add</strong> method will throw an
<strong>ArgumentException</strong> if the given key is already in the dictionary, it
takes care of this error checking for us. The key that we need to add
will be a <strong>(TNode,Â TNode)</strong> containing the two nodes, and the value
will be the <code>value</code>.</p>
<p>After we have updated <code>_edges</code>, we need to update <code>_adjacencyLists</code>. To
do this, we first need to obtain the linked list associated with the key
<code>source</code> in <code>_adjacencyLists</code>; however, because <code>source</code> may not exist
as a key in this dictionary, we should use the


<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.trygetvalue?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>TryGetValue</strong></a>
method to do this lookup (note that if <code>source</code> is not a key in this
dictionary, the <strong>out</strong> parameter will be set to <strong>null</strong>, which we can
interpret as an empty list). We then construct a new linked list cell,
in which we place <code>dest</code>. We then insert this cell at the beginning of
the linked list we retrieved, and set this linked list as the new value
associated with <code>source</code> in <code>_adjacencyLists</code>. Finally, if
<code>_adjacencyLists</code> doesn&rsquo;t already contain <code>dest</code> as a key, we need to
add it with <strong>null</strong> as its associated value.</p>
<p>Finally, we need to implement the <strong>OutgoingEdges</strong> method. Because this
method returns an <strong>IEnumerable&lt;Edge&lt;TNode,Â TEdgeData&gt;&gt;</strong>, it
needs to iterate through the cells of the linked list associated with
the given node in <code>_adjacencyLists</code>. For each of these cells, it will
need to <strong>yield return</strong> (see
&ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerators">Enumerators</a>&rdquo;)
an <strong>Edge&lt;TNode,Â TEdgeData&gt;</strong> describing the edge represented by
that cell. The source node for this edge will be the node given to this
method. The destination node will be the node stored in the cell. The
edge data can be obtained from the dictionary <code>_edges</code>.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Sorting</h1></div>
<h2 id="sorting">Sorting</h2>
<p>We conclude this text with a look at a common activity in computing, namely, sorting data. While the .NET Framework provides several methods for sorting data, it is instructive to examine the implementation details of different techniques. While there is one sorting algorithm
that is used more commonly than the others, none is best for all
situations. An understanding of which algorithms perform better in
different situations can help us to make better choices and thereby
achieve better performance for the software we build. Furthermore,
because there are so many different approaches to sorting, studying the
various techniques can help us to see how different approaches can be
used for the same problem in order to obtain different algorithms.</p>
<p>In this chapter, we will consider several sorting algorithms, but not
nearly all of them. In the first four sections, we will focus on
algorithms that can be applied to any data type that can sorted; thus,
we will only consider algorithms that operate by comparing data elements
to each other. Most of these algorithms can be divided into four general
approaches. We consider each of these approaches separately. We then
conclude with an algorithm designed specifically for sorting strings.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Select Sorts</h1></div>
<h2 id="select-sorts">Select Sorts</h2>
<p>A select sort operates by repeatedly selecting the smallest data element
of an unsorted portion of the array and moving it to the end of a sorted
portion. Thus, at each step, the data items will be arranged into two
parts:</p>
<ol>
<li>A sorted part; and</li>
<li>An unsorted part in which each element is at least as large as all
elements in the sorted part.</li>
</ol>
<p>The following figure illustrates this arrangement.</p>
<p><img src="select-sorts.jpg" alt="The arrangement at each step of a select sort."></p>
<p>Initially, the sorted part will be empty. At each step, the unsorted
part is rearranged so that its smallest element comes first. As a
result, the sorted part can now contain one more element, and the
unsorted part one fewer element. After 
<span class="math align-center">$ nÂ -Â 1 $</span> steps, where 
<span class="math align-center">$ n $</span> is
the number of elements in the array, the sorted part will have all but
one of the elements. Because the one element in the unsorted part must
be at least as large as all elements in the sorted part, the entire
array will be sorted at this point.</p>
<p>The approach outlined above can be implemented in various ways. The main
difference in these implementations is in how we rearrange the unsorted
part to bring its smallest element to the beginning of that part. The
most straightforward way to do this is to find the smallest element in
this part, then swap it with the first element in this part. The
resulting algorithm is called <em>selection sort</em>. It requires nested
loops. The outer loop index keeps track of how many elements are in the
sorted part. The unsorted part then begins at this index. The inner loop
is responsible for finding the smallest element in the unsorted part.
Once the inner loop has finished, the smallest element is swapped with
the first element in the unsorted part.</p>
<p>Note that the inner loop in selection sort iterates once for every
element in the unsorted part. On the first iteration of the outer loop,
the unsorted part contains all 
<span class="math align-center">$ n $</span> elements. On each successive
iteration, the unsorted part is one element smaller, until on the last
iteration, it has only 
<span class="math align-center">$ 2 $</span> elements. If we add up all these values, we
find that the inner loop iterates a total of exactly

<span class="math align-center">$ (nÂ -Â 1)(nÂ +Â 2)/2 $</span> times. This value is
proportional to 
<span class="math align-center">$ n^2 $</span> as 
<span class="math align-center">$ n $</span> increases; hence, the running
time of the algorithm is in 
<span class="math align-center">$ O(n^2) $</span>. Furthermore, this
performance occurs no matter how the data items are initially arranged.</p>
<p>As we will see in what follows, 
<span class="math align-center">$ O(n^2) $</span> performance is not
very good if we want to sort a moderately large data set. For example,
sorting 
<span class="math align-center">$ 10,000 $</span> elements will require about 
<span class="math align-center">$ 5 $</span> billion iterations of the
inner loop. On the positive side, the only time data items are moved is
when a swap is made at the end of the outer loop; hence, this number is
proportional to 
<span class="math align-center">$ n $</span>. This could be advantageous if we are sorting large
value types, as we would not need to write these large data elements
very many times. However, for general performance reasons, large data
types shouldn&rsquo;t be value types &mdash; they should be reference types to avoid
unnecessary copying of the values. For this reason, selection sort isn&rsquo;t
a particularly good sorting algorithm.</p>
<p><span id="stable"></span> Performance issues aside, however, there is
one positive aspect to selection sort. This aspect has to do with
sorting by keys. Consider, for example, the rows of a spreadsheet. We
often want to sort these rows by the values in a specific column. These
values are the sort keys of the elements. In such a scenario, it is
possible that two data elements are different, but their sort keys are
the same. A sorting algorithm might reverse the order of these elements,
or it might leave their order the unchanged. In some cases, it is
advantageous for a sorting algorithm to leave the order of these
elements unchanged. For example, if we sort first by a secondary key,
then by a primary key, we would like for elements whose primary keys are
equal to remain sorted by their secondary key. Therefore, a sorting
algorithm that always maintains the original order of equal keys is said
to be <em>stable</em>. If we are careful how we implement the inner loop of
selection sort so that we always select the first instance of the
smallest key, then this algorithm is stable.</p>
<p><span id="bubble-sort"></span> Another implementation of a select sort
is <em>bubble sort</em>. It rearranges the unsorted part by swapping adjacent
elements that are out of order. It starts with the last two elements
(i.e., the elements at locations 
<span class="math align-center">$ nÂ -Â 1 $</span> and <span style="white-space:nowrap">
<span class="math align-center">$ nÂ -Â 2 $</span>)</span>, then
the elements at locations 
<span class="math align-center">$ nÂ -Â 2 $</span> and <span style="white-space:nowrap">
<span class="math align-center">$ nÂ -Â 3 $</span>,</span> etc.
Proceeding in this way, the smallest element in the unsorted part will
end up at the beginning of the unsorted part. While the inner loop is
doing this, it keeps track of whether it has made any swaps. If the loop
completes without having made any swaps, then the array is sorted, and
the algorithm therefore stops.</p>
<p>Like selection sort, bubble sort is stable. In the worst case, however,
the performance of bubble sort is even worse than that of selection
sort. It is still in <span style="white-space:nowrap">
<span class="math align-center">$ O(n^2) $</span>,</span> but in the worst case, its
inner loop performs the same number of iterations, but does a lot more
swaps. Bubble sort does outperform selection sort on some inputs, but
describing when this will occur isn&rsquo;t easy. For example, in an array in
which the largest element occurs in the first location, and the
remaining locations are sorted, the performance ends up being about the
same as selection sort &mdash; even though this array is nearly sorted. Like
selection sort, it is best to avoid bubble sort.</p>
<p><span id="heap-sort"></span> A select sort that significantly
outperforms selection sort is known as <em>heap sort</em>. This algorithm is
based on the idea that a priority queue can be used to sort data &mdash; we
first place all items in a priority queue, using the values themselves
as priorities (if we are sorting by keys, then we use the keys as
priorities). We then repeatedly remove the element with largest
priority, filling the array from back to front with these elements.</p>
<p>We can optimize the above algorithm by using a priority queue
implementation called a <em>binary heap</em>, whose implementation details we
will only sketch. The basic idea is that we can form a binary tree from
the elements of an array by using their locations in the array. The
first element is the root, its children are the next two elements, their
children are the next four elements, etc. Given an array location, we
can then compute the locations of its parent and both of its children.
The priorities are arranged so that the root of each subtree contains
the maximum priority in that subtree. It is possible to arrange the
elements of an array into a binary heap in 
<span class="math align-center">$ O(n) $</span> time, and to remove
an element with maximum priority in 
<span class="math align-center">$ O(\lg n) $</span> time.</p>
<p>Heap sort then works by pre-processing the array to arrange it into a
binary heap. The binary heap then forms the unsorted part, and it is
followed by the sorted part, whose elements are all no smaller than any
element in the unsorted part. While this arrangement is slightly
different from the arrangement for the first two select sorts, the idea
is the same. To rearrange the unsorted part, it:</p>
<ol>
<li>Copies the first (i.e., highest-priority) element to a temporary
variable.</li>
<li>Removes the element with maximum priority (i.e., the first element).</li>
<li>Places the copy of the first element into the space vacated by its
removal at the beginning of the sorted part.</li>
</ol>
<p>Heap sort runs in 
<span class="math align-center">$ O(nÂ \lgÂ n) $</span> time in the worst case.
Information theory can be used to prove that any sorting algorithm that
sorts by comparing elements must make at least 
<span class="math align-center">$ \lg(n!) $</span> comparisons on
some arrays of size <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>.</span> Because 
<span class="math align-center">$ \lg(n!) $</span> is proportional to
<span style="white-space:nowrap">
<span class="math align-center">$ nÂ \lgÂ n $</span>,</span> we cannot hope to do any better than

<span class="math align-center">$ O(nÂ \lgÂ n) $</span> in the worst case. While this performance is a
significant improvement over selection sort and bubble sort, we will see
in 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/split">a later section</a> that
there is an algorithm (quick sort) that does even better in practice.
Furthermore, heap sort is not stable.</p>
<p>On the other hand, we will also see that in spite of the fact that quick
sort usually outperforms heap sort, there are rare cases that cause it
to perform badly. In order to avoid this bad behavior, a hybrid
algorithm using both quick sort and heap sort has been developed. We
will examine this approach in &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/hybrid">Hybrid
Sorts</a>&rdquo;.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Insert Sorts</h1></div>
<h2 id="insert-sorts">Insert Sorts</h2>
<p>An insert sort operates by repeatedly inserting an element into a sorted
portion of the array. Thus, as for select sorts, at each step the data
items will be arranged into a sorted part, followed by an unsorted part;
however, for insert sorts, there is no restriction on how elements in
the unsorted part compare to elements in the sorted part. The following
figure illustrates this arrangement.</p>
<p><img src="insert-sorts.jpg" alt="The arrangement at each step of an insert sort."></p>
<p>Initially, the sorted part will contain the first element, as a single
element is always sorted. At each step, the first element in the
unsorted part is inserted into its proper location in the sorted part.
As a result, the sorted part now contains one more element, and the
unsorted part one fewer element. After 
<span class="math align-center">$ nÂ -Â 1 $</span> steps, where 
<span class="math align-center">$ n $</span> is
the number of elements in the array, the sorted part will contain all
the elements, and the algorithm will be done.</p>
<p>Again, this approach can be implemented in various ways. The main
difference in these implementations is in how we insert an element. The
most straightforward way is as follows:</p>
<ol>
<li>Copy the first element of the unsorted part to a temporary variable.</li>
<li>Iterate from the location of the first element of the unsorted part
toward the front of the array as long as we are at an index greater
than 0 and the element to the left of the current index is greater
than the element in the temporary variable. On each iteration:
<ul>
<li>Copy the element to the left of the current index to the current
index.</li>
</ul>
</li>
<li>Place the value in the temporary variable into the location at which
the above loop stopped.</li>
</ol>
<p>The algorithm that uses the above insertion technique is known as
<em>insertion sort</em>. Like selection sort, it requires an outer loop to keep
track of the number of elements in the sorted part. Each iteration of
this outer loop performs the above insertion algorithm. It is not hard
to see that this algorithm is


<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#stable">stable</a>.</p>
<p>The main advantage insertion sort has over 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select">selection
sort</a> is that the inner
loop only iterates as long as necessary to find the insertion point. In
the worst case, it will iterate over the entire sorted part. In this
case, the number of iterations is the same as for selection sort; hence,
the worst-case running time is in 
<span class="math align-center">$ O(n^2) $</span> &mdash; the same as
selection sort and 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#bubble-sort">bubble
sort</a>. At the other
extreme, however, if the array is already sorted, the inner loop won&rsquo;t
need to iterate at all. In this case, the running time is in <span style="white-space:nowrap">
<span class="math align-center">$ O(n) $</span>,</span>
which is the same as the running time of bubble sort on an array that is
already sorted.</p>
<p>Unlike bubble sort, however, insertion sort has a clean characterization
of its performance based on how sorted the array is. This
characterization is based on the notion of an <em>inversion</em>, which is a
pair of array locations 
<span class="math align-center">$ iÂ \ltÂ j $</span> such that the value at location

<span class="math align-center">$ i $</span> is greater than the value at location <span style="white-space:nowrap">
<span class="math align-center">$ j $</span>;</span> i.e., these two values
are out of order with respect to each other. A sorted array has no
inversions, whereas in an array of distinct elements in reverse order, every pair of
locations is an inversion, for a total of 
<span class="math align-center">$ n(nÂ -Â 1)/2 $</span>
inversions. In general, we can say that the fewer inversions an array
has, the more sorted it is.</p>
<p>The reason why inversions are important to understanding the performance
of insertion sort is that each iteration of the inner loop (i.e., step 2
of the insertion algorithm above) removes exactly one inversion.
Consequently, if an array initially has 
<span class="math align-center">$ k $</span> inversions, the inner loop
will iterate a total of 
<span class="math align-center">$ k $</span> times. If we combine this with the

<span class="math align-center">$ nÂ -Â 1 $</span> iterations of the outer loop, we can conclude that
the running time of insertion sort is in <span style="white-space:nowrap">
<span class="math align-center">$ O(nÂ +Â k) $</span>.</span> Thus, if
the number of inversions is relatively small in comparison to 
<span class="math align-center">$ n $</span> (i.e.,
the array is nearly sorted), insertion sort runs in 
<span class="math align-center">$ O(n) $</span> time. (By
contrast, 
<span class="math align-center">$ nÂ -Â 2 $</span> inversions can be enough to cause the inner loop
of bubble sort to iterate its worst-case number of times.) For this
reason, insertion sort is the algorithm of choice when we expect the
data to be nearly sorted &mdash; a scenario that occurs frequently in
practice. This fact is exploited by an efficient hybrid algorithm that
combines insertion sort with two other sorting algorithms - see &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/hybrid">Hybrid
Sorts</a>&rdquo; for more
details.</p>
<p>Before we consider another insert sort, there is one other advantage to
insertion sort that we need to consider. Because the algorithm is simple
(like selection sort and bubble sort), it performs well on small arrays.
More complex algorithms like 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#heap-sort">heap
sort</a>, while providing much
better worst-case performance for larger arrays, don&rsquo;t tend to perform
as well on small arrays. In many cases, the performance difference on
small arrays isn&rsquo;t enough to matter, as pretty much any algorithm will
perform reasonably well on a small array. However, this performance
difference can become significant if we need to sort many small arrays
(in a later section, we will see an application in which this scenario
occurs). Because insertion sort tends to out-perform both selection sort
and bubble sort, it is usually the best choice when sorting small
arrays.</p>
<p><span id="tree-sort"></span> Another way to implement an insert sort is
to use a balanced binary search tree, such as an 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl">AVL
tree</a>, to store the sorted
part. In order to do this, we need to modify 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/intro">the definition of a binary
search tree</a> to allow
multiple instances of the same key. In order to achieve stability, if we
are inserting a key that is equal to a key already in the tree, we would
treat the new key as being greater than the pre-existing key - i.e., we
would recursively insert it into the right child. Once all the data
items are inserted, we would then copy them back into the array in
sorted order using an 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/inorder">inorder
traversal</a>. We call
this algorithm <em>tree sort</em>.</p>
<p>This algorithm doesn&rsquo;t exactly match the above description of an insert
sort, but it is not hard to see that it follows the same general
principles. While the sorted portion is not a part of the array, but
instead is a separate data structure, it does hold an initial part of
the array in sorted order, and successive elements from the unsorted
portion are inserted into it.</p>
<p>Because insertions into an AVL tree containing 
<span class="math align-center">$ k $</span> elements can be done
in 
<span class="math align-center">$ O(\lg k) $</span> time in the worst case, and because an inorder traversal
can be done in 
<span class="math align-center">$ O(k) $</span> time, it follows that tree sort runs in $O(n
\lg n)
<span class="math align-center">$  time in the worst case, where  $</span>n$ is the number of elements in
the array. However, because maintaining an AVL tree requires more
overhead than maintaining a binary heap, heap sort tends to give better
performance in practice. For this reason, tree sort is rarely used.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Merge Sorts</h1></div>
<h2 id="merge-sorts">Merge Sorts</h2>
<p>A merge sort works by merging together two sorted parts of an array.
Thus, we should focus our attention on an array that is partitioned into
two sorted parts, as shown in the following figure.</p>
<p><img src="merge-sorts.jpg" alt="The arrangement at a step of a merge sort."></p>
<p>The different ways of implementing a merge sort depend both on how the
above arrangement is achieved, and also on how the two parts are merged
together. The simplest implementation is an algorithm simply called
<em>merge sort</em>.</p>
<p>Merge sort uses recursion to arrange the array into two sorted parts. In
order to use recursion, we need to express our algorithm, not in terms
of sorting an array, but instead in terms of sorting a part of an array.
If the part we are sorting has more than one element, then we can split
it into two smaller parts of roughly equal size (if it doesn&rsquo;t have more
than one element, it is already sorted). Because both parts are smaller,
we can recursively sort them to achieve the arrangement shown above.</p>
<p>The more complicated step in merge sort is merging the two sorted parts
into one. While it is possible to do this without using another array
(or other data structure), doing so is quite complicated. Merge sort
takes a much simpler approach that uses a temporary array whose size is
the sum of the sizes of the two sorted parts combined. It first
accumulates the data items into the new array in sorted order, then
copies them back into the original array.</p>
<p>In order to understand how the merging works, let&rsquo;s consider a snapshot
of an arbitrary step of the algorithm. If we&rsquo;ve accumulated an initial
portion of the result, these elements will be the smallest ones. Because
both of the parts we are merging are sorted, these smallest elements
must come from initial portions of these two parts, as shown below.</p>
<p><img src="merging.jpg" alt="A snapshot of the merge."></p>
<p>Initially, the three shaded areas above are all empty. In order to
proceed, we need local variables to keep track of the first index in
each of the three unshaded areas. We then iterate as long as <em>both</em> of
the unshaded areas are nonempty. On each iteration, we want to place the
next element into the temporary array. This element needs to be the
smallest of the unmerged elements. Because both parts of the given array
are sorted, the smallest unmerged element will be the first element from
one of the two unshaded parts of this array &mdash; whichever one is smaller
(for stability, we use the first if they are equal). We copy that
element to the beginning of the unshaded portion of the temporary array,
then update the local variables to reflect that we have another merged
item.</p>
<p>The above loop will terminate as soon as we have merged all the data
items from one of the two sorted parts; however, the other sorted part
will still contain unmerged items. To finish merging to the temporary
array, we just need to copy the remaining items to the temporary array.
We can do this by first copying all remaining items from the first
sorted part, then copying all remaining items from the second sorted
part (one of these two copies will copy nothing because there will be no
remaining items in one of the two sorted parts). Once all items have
been merged into the temporary array, we copy all items back to the
original array to complete the merge.</p>
<p>We won&rsquo;t do a running time analysis here, but merge sort runs in $O(n
\lg n)$ time in the worst case. Furthermore, unlike 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#heap-sort">heap
sort</a>, it is stable.
Because it tends to perform better in practice than 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert/#tree-sort">tree
sort</a>, it is a better
choice when we need a stable sorting algorithm. In fact, it is the basis
(along with 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert">insertion
sort</a>) of a stable
hybrid sorting algorithm that performs very well in practice. This
algorithm, called <em>Tim sort</em>, is rather complicated; hence, we won&rsquo;t
describe it here. If we don&rsquo;t need a stable sorting algorithm, though,
there are other alternatives, as we shall see in the next two sections.</p>
<p><span id="external"></span> Another scenario in which a merge sort is
appropriate occurs when we have a huge data set that will not fit into
an array. In order to sort such a data set, we need to keep most of the
data in files while keeping a relatively small amount within internal
data structures at any given time. Because merging processes data items
sequentially, it works well with files. There are several variations on
how we might do this, but the basic algorithm is called <em>external merge
sort</em>.</p>
<p>External merge sort uses four temporary files in addition to an input
file and an output file. Each of these files will alternate between
being used for input and being used for output. Furthermore, at any
given time, one of the two files being used for input will be designated
as the <em>first</em> input file, and the other will designated as the <em>second</em>
input file. Similarly, at any given time, one of the two files being
used for output will be designated as the <em>current</em> output file, and the
other will be designated as the <em>alternate</em> output file.</p>
<p>The algorithm begins with an initialization step that uses the given
unsorted data file as its input, and two of the temporary files as its
output. We will need two variables storing references to the current
output file and the alternate output file, respectively. At this point
we begin a loop that iterates until we reach the end of the input. Each
iteration of this loop does the following:</p>
<ol>
<li>Fill a large array with data items from the input (if there aren&rsquo;t
enough items to fill this array, we just use part of it).</li>
<li>Sort this array using whatever sorting algorithm is appropriate.</li>
<li>Write each element of the sorted array to the current output file.</li>
<li>Write a special end marker to the output file.</li>
<li>Swap the contents of the variables referring to the current output
file and the alternate output file.</li>
</ol>
<p>After the above loop terminates, the two output files are closed. Thus,
the initialization writes several sorted sequences, each terminated by
end markers, to the two output files. Furthermore, either the two output
files will contain the same number of sorted sequences or the one that
was written to first will contain one more sorted sequence than the
other. The following figure illustrates these two files.</p>
<p><img src="external-merge-sort.jpg" alt="Two files written by external merge sort"></p>
<p>The algorithm then enters the main loop. Initially the output file first
written in the initialization is designated as the first input file, and
the other file written in the initialization is designated as the second
input file. The other two temporary files are arbitrarily designated as
the current output file and the alternate output file. The loop then
iterates as long as the second input file is nonempty. Each iteration
does the following:</p>
<ol>
<li>While there is data remaining in the second input file: <ol type="a">
<li />  Merge the next sorted sequence in the first input file with the
    next sorted sequence in the second input file, writing the
    result to the current output file (see below for details).
<li />  Write an end marker to the current output file.
<li />  Swap the current output file and the alternate output file.</ol>
</li>
<li>If there is data remaining in the first input file:<ol type="a">
<li />  Copy the remaining data from the first input file to the current
    output file
<li />  Write an end marker to the current output file.
<li />  Swap the current output file and the alternate output file.</ol>
</li>
<li>Close all four temporary files.</li>
<li>Swap the first input file with the alternate output file.</li>
<li>Swap the second input file with the current output file.</li>
</ol>
<p>Each iteration therefore combines pairs of sorted sequences from the two
input files, thus reducing the number of sorted sequences by about half.
Because it alternates between the two output files, as was done in the
initialization, either the two output files will end up with the same
number of sequences, or the last one written (which will be the
alternate output file following step 2) will have one more than the
other. The last two steps therefore ensure that to begin the next
iteration, if the the number of sequences in the two input files is
different, the first input file has the extra sequence.</p>
<p>The loop described above finishes when the second input file is empty.
Because the first input file will have no more than one more sorted
sequence than the second input file, at the conclusion of the loop, it
will contain a single sorted sequence followed by an end marker. The
algorithm therefore concludes by copying the data from this file, minus
the end marker, to the output file.</p>
<p>Let&rsquo;s now consider more carefully the merge done in step 1a above. This
merge is done in essentially the same way that the merge is done in the
original merge sort; however, we don&rsquo;t need to read in the entire sorted
sequences to do it. Instead, all we need is the next item from each
sequence. At each step, we write the smaller of the two, then read the
next item from the appropriate input file. Because we only need these
two data items at any time, this merge can handle arbitrarily long
sequences.</p>
<p>For an external sorting algorithm, the most important measure of
performance is the number of file I/O operations it requires, as these
operations are often much more expensive than any other (depending, of
course, on the storage medium). Suppose the initial input file has 
<span class="math align-center">$ n $</span>
data items, and suppose the array we use in the initialization step can
hold 
<span class="math align-center">$ m $</span> data items. Then the number of sorted sequences written by the
initialization is  <span style="white-space:nowrap">
<span class="math align-center">$ n/m $</span>,</span> with any fractional part rounded up. Each
iteration of the main loop then reduces the number of sorted sequences
by half, with any fractional part again rounded up. The total number of
iterations of the main loop is therefore  <span style="white-space:nowrap">
<span class="math align-center">$ \lgÂ (n/m) $</span>,</span> rounding
upward again. Each iteration of this loop makes one pass through the
entire data set. In addition, the initialization makes one pass, and the
final copying makes one pass. The total number of passes through the
data is therefore  <span style="white-space:nowrap">
<span class="math align-center">$ \lgÂ (n/m)Â +Â 2 $</span>.</span> For example, if we are
sorting 
<span class="math align-center">$ 10 $</span> billion data items using an array of size 
<span class="math align-center">$ 1 $</span> million, we need

<span class="math align-center">$ \lgÂ 10,000Â +Â 2 $</span> passes, rounded up; i.e., we need 
<span class="math align-center">$ 16 $</span> passes
through the data.</p>
<p>Various improvements can be made to reduce the number of passes through
the data. For example, we can avoid the final file copy if we use
another mechanism for denoting the end of a sorted sequence. One
alternative is to keep track of the length of each sequence in each file
in a <strong>List&lt;long&gt;</strong>. If the temporary files are within the same
directory as the output file, we can finish the sort by simply renaming
the first input file, rather than copying it.</p>
<p>A more substantial improvement involves using more temporary files.
<em>
<span class="math align-center">$ k $</span>-way external merge sort</em> uses 
<span class="math align-center">$ k $</span> input and 
<span class="math align-center">$ k $</span> output files. Each
merge then merges 
<span class="math align-center">$ k $</span> sorted sequences into  <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>.</span> This reduces the number
of iterations of the main loop to  <span style="white-space:nowrap">
<span class="math align-center">$ \log_kÂ (n/m) $</span>.</span> Using
the fact that
<span style="white-space:nowrap">
<span class="math align-center">$ \log_{k^2}Â nÂ =Â (\log_kÂ n)/2 $</span>,</span>
we can conclude that squaring 
<span class="math align-center">$ k $</span> will reduce the number of passes
through the data by about half. Thus, 
<span class="math align-center">$ 4 $</span>-way external merge sort will
make about half as many passes through the data as 
<span class="math align-center">$ 2 $</span>-way external merge
sort. The gain diminishes quickly after that, however, as we must
increase 
<span class="math align-center">$ k $</span> to 
<span class="math align-center">$ 16 $</span> to cut the number of passes in half again.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Split Sorts</h1></div>
<h2 id="split-sorts">Split Sorts</h2>
<p>A <em>split sort</em> operates by splitting the array into three parts:</p>
<ul>
<li>An unsorted part containing elements less than or equal to some
<em>pivot element p</em>.</li>
<li>A nonempty part containing elements equal to <em>p</em>.</li>
<li>An unsorted part containing elements greater than or equal to <em>p</em>.</li>
</ul>
<p>This arrangement is illustrated in the following figure.</p>
<p><img src="split-sorts.jpg" alt="The arrangement attained by a split sort."></p>
<p>To complete the sort, it then sorts the two unsorted parts. Note that
because the second part is nonempty, each of the two unsorted parts is
smaller than the original data set; hence, the algorithm will always
make progress.</p>
<p>The various implementations of a split sort are collectively known as
<em>quick sort</em>. They differ in how many elements are placed in the middle
part (only one element or all elements equal to the pivot), how the
pivot is chosen, how the elements are partitioned into three parts, and
how the two sub-problems are sorted. We will examine only two
variations, which differ in how the pivot element is chosen.</p>
<p>Let&rsquo;s start with how we do the partitioning. Let <em>p</em> denote the pivot
element. Because most of the split sort implementations use recursion to
complete the sort, we&rsquo;ll assume that we are sorting a portion of an
array. At each stage of the partitioning, the array portion we are
sorting will be arranged into the following four segments:</p>
<ol>
<li><strong>Segment L:</strong> Elements less than <em>p</em>.</li>
<li><strong>Segment U:</strong> Elements we haven&rsquo;t yet examined (i.e., unknown
elements).</li>
<li><strong>Segment E:</strong> Elements equal to <em>p</em>.</li>
<li><strong>Segment G:</strong> Elements greater than <em>p</em>.</li>
</ol>
<p>Initially, segments L, E, and G will be empty, and each iteration will
reduce the size of segment U. The partitioning will be finished when
segment U is empty. We will need three local variables to keep track of
where one segment ends and another segment begins, as shown in the
following figure:</p>
<p><img src="quick-sort-partitioning.jpg" alt="The arrangement for partitioning in quicksort."></p>
<p>We have worded the descriptions of the three local variables so that
they make sense even if some of the segments are empty. Thus, because
all segments except U are initially empty, the location following
segment L will initially be the first location in the array portion that
we are sorting, and the other two variables will initially be the last
location in this portion. We then need a loop that iterates as long as
segment U is nonempty &mdash; i.e., as long as the location following segment
L is no greater than the location preceding segment E. Each iteration of
this loop will compare the last element in segment U (i.e., the element
at the location preceding segment E) with <em>p</em>. We will swap this element
with another depending on how it compares with <em>p</em>:</p>
<ul>
<li>If it is less than <em>p</em>, we swap it with the element following
segment L, and adjust the end of segment L to include it.</li>
<li>If it is equal to <em>p</em>, we leave it where it is, and adjust the
beginning of segment E to include it.</li>
<li>If it is greater than <em>p</em>, we swap it with the element preceding
segment G, adjust the beginning of segment G to include it, and
adjust the beginning of segment E to account for the fact that we
are shifting this segment to the left by 1.</li>
</ul>
<p>Once this loop completes, the partitioning will be done. Furthermore, we
can determine the two parts that need to be sorted from the final values
of the local variables.</p>
<p>The first split sort implementation we will consider is fairly
straightforward, given the above partitioning scheme. If we are sorting
more than one element (otherwise, there is nothing to do), we will use
as the pivot element the first element of the array portion to be
sorted. After partitioning, we then sort the elements less than the
pivot using a recursive call, and sort the elements greater than the
pivot with another.</p>
<p>Though we won&rsquo;t give an analysis here, the above algorithm runs in

<span class="math align-center">$ O(n^2) $</span> time in the worst case, where 
<span class="math align-center">$ n $</span> is the number of
elements being sorted. However, as we saw with 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert">insertion
sort</a>, the worst-case
running time doesn&rsquo;t always tell the whole story. Specifically, the
expected running time of quick sort (this implementation and others) on
random arrays is in <span style="white-space:nowrap">
<span class="math align-center">$ O(nÂ \lgÂ n) $</span>.</span></p>
<p>However, we don&rsquo;t often need to sort random data. Let&rsquo;s therefore take a
closer look at what makes the worst case bad. In some ways this
algorithm is like merge sort &mdash; it does two recursive calls, and the
additional work is proportional to the number of elements being sorted.
The difference is that the recursive calls in merge sort are both on
array portions that are about half the size of the portion being sorted.
With this quick sort implementation, on the other hand, the sizes of the
recursive calls depend on how the first element (i.e., the pivot
element) compares to the other elements. The more elements that end up
in one recursive call, the slower the algorithm becomes. Consequently,
the worst case occurs when the array is already sorted, and is still bad
if the array is nearly sorted. For this reason, this is a particularly
bad implementation.</p>
<p>Before we look at how we can improve the performance, we need to
consider one other aspect of this implementation&rsquo;s performance. For a
recursive method, the amount of data pushed on the runtime stack is
proportional to the depth of the recursion. In the worst cases (i.e., on
a sorted array), the recursion depth is <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>.</span> Thus, for large <span style="white-space:nowrap">
<span class="math align-center">$ n $</span>,</span> if the
array is sorted or nearly sorted, a <strong>StackOverflowException</strong> is
likely. <span id="median-of-3"></span></p>
<p>The most important thing we can do to improve the performance, in terms
of both running time and stack usage, is to be more careful about how we
choose the pivot element. We want to choose an element that partitions
the data elements roughly in half. The median element (i.e., the element
that belongs in the middle after the array is sorted) will therefore
give us the optimal split. It is possible to design an

<span class="math align-center">$ O(nÂ \lgÂ n) $</span> algorithm that uses the median as the
pivot; however, the time it takes to find the median makes this
algorithm slower than merge sort in practice. It works much better to
find a quick approximation for the median.</p>
<p>The main technique for obtaining such an approximation is to examine
only a few of the elements. For example, we can use <em>median-of-three
partitioning</em>, which uses as its pivot element the median of the first,
middle, and last elements of the array portion we are sorting. An easy
way to implement this strategy is to place these three elements in an
array of size 3, then sort this array using 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert">insertion
sort</a>. The element that
ends up at location 1 is then the used as the pivot.</p>
<p>We can improve on the above strategy by doing a case analysis of the
three values. If we do this, we don&rsquo;t need a separate array &mdash; we just
find the median of three values, <span style="white-space:nowrap">
<span class="math align-center">$ a $</span>,</span> <span style="white-space:nowrap">
<span class="math align-center">$ b $</span>,</span> and <span style="white-space:nowrap">
<span class="math align-center">$ c $</span>,</span> as follows:</p>
<ul>
<li>If <span style="white-space:nowrap">
<span class="math align-center">$ aÂ \ltÂ b $</span>:</span>
<ul>
<li>If <span style="white-space:nowrap">
<span class="math align-center">$ bÂ \ltÂ c $</span>,</span> then 
<span class="math align-center">$ b $</span> is the median.</li>
<li>Otherwise, because 
<span class="math align-center">$ b $</span> is the largest:
<ul>
<li>If <span style="white-space:nowrap">
<span class="math align-center">$ aÂ \ltÂ c $</span>,</span> then 
<span class="math align-center">$ c $</span> is the median.</li>
<li>Otherwise, 
<span class="math align-center">$ a $</span> is the median.</li>
</ul>
</li>
</ul>
</li>
<li>Otherwise, because <span style="white-space:nowrap">
<span class="math align-center">$ b \leqÂ a $</span>:</span>
<ul>
<li>If <span style="white-space:nowrap">
<span class="math align-center">$ aÂ \ltÂ c $</span>,</span> then 
<span class="math align-center">$ a $</span> is the median.</li>
<li>Otherwise, because 
<span class="math align-center">$ a $</span> is the largest:
<ul>
<li>If <span style="white-space:nowrap">
<span class="math align-center">$ bÂ \ltÂ c $</span>,</span> then 
<span class="math align-center">$ c $</span> is the median.</li>
<li>Otherwise, 
<span class="math align-center">$ b $</span> is the median.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The above algorithm is quite efficient, using at most three comparisons
and requiring no values to be copied other than the result if we
implement it in-line, rather than as a separate method (normally an
optimizing compiler can do this method inlining for us). It also
improves the sorting algorithm by tending to make the bad cases less
likely.</p>
<p>This version of quick sort gives good performance most of the time,
typically outperforming either 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#heap-sort">heap
sort</a> or 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/merge">merge
sort</a>. However, it still
has a worst-case running time in 
<span class="math align-center">$ O(n^2) $</span> and a worst-case
stack usage in <span style="white-space:nowrap">
<span class="math align-center">$ O(n) $</span>.</span> Furthermore, it is unstable and does not
perform as well as 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert">insertion
sort</a> on small or nearly
sorted data sets. In 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/hybrid">the next
section</a>, we will show
how quick sort can be combined with some of the other sorting algorithms
to address some of these issues, including the bad worst-case
performance.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Hybrid Sorting Algorithms</h1></div>
<h2 id="hybrid-sorting-algorithms">Hybrid Sorting Algorithms</h2>
<p>The best versions of 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/split">quick
sort</a> are competitive
with both 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#heap-sort">heap sort</a> and


<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/merge">merge sort</a> on the vast
majority of inputs. However, quick sort has a very bad worst case &mdash;

<span class="math align-center">$ O(n^2) $</span> running time and 
<span class="math align-center">$ O(n) $</span> stack usage. By
comparison, both heap sort and merge sort have 
<span class="math align-center">$ O(nÂ \lgÂ n) $</span>
worst-case running time, together with a stack usage of 
<span class="math align-center">$ O(1) $</span> for heap
sort or 
<span class="math align-center">$ O(\lgÂ n) $</span> for merge sort. Furthermore, 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert">insertion
sort</a> performs better
than any of these algorithms on small data sets. In this section, we
look at ways to combine some of these algorithms to obtain a sorting
algorithm that has the advantages of each of them.</p>
<p>We will start with quick sort, which gives the best performance for most
inputs. One way of improving its performance is to make use of the fact
that 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert">insertion sort</a> is
more efficient for small data sets. Improving the performance on small
portions can lead to significant performance improvements for large
arrays because quick sort breaks large arrays into many small portions.
Hence, when the portion we are sorting becomes small enough, rather than
finding a pivot and splitting, we instead call insertion sort.</p>
<p>An alternative to the above improvement is to use the fact that
insertion sort runs in 
<span class="math align-center">$ O(n) $</span> time when the number of inversions is
linear in the number of array elements. To accomplish this, we modify
quick sort slightly so that instead of sorting the array, it brings each
element near where it belongs. We will refer to this modified algorithm
as a <em>partial sort</em>. After we have done the partial sort, we then sort
the array using insertion sort. The modification we make to quick sort
to obtain the partial sort is simply to change when we stop sorting. We
only sort portions that are larger than some threshold &mdash; we leave other
portions unsorted.</p>
<p>Suppose, for example, that we choose a threshold of <span style="white-space:nowrap">
<span class="math align-center">$ 10 $</span>.</span> Once the partial
sort reaches an array portion with nine or fewer elements, we do nothing
with it. Note, however, that these elements are all larger than the
elements that precede this portion, and they are all smaller than the
elements that follow this portion; hence, each element can form an
inversion with at most eight other elements &mdash; the other elements in the
same portion. Because each inversion contains two elements, this means
that there can be no more than 
<span class="math align-center">$ 4n $</span> inversions in the entire array once
the partial sort finishes. The subsequent call to insertion sort will
therefore finish the sorting in linear time.</p>
<p>Both of the above techniques yield performance improvements over quick
sort alone. In fact, for many years, such combinations of an optimized
version of quick sort with insertion sort were so efficient for most
inputs that they were the most commonly-used algorithms for
general-purpose sorting. On modern hardware architectures, the first
approach above tends to give the better performance.</p>
<p>Nevertheless, neither of the above approaches can guarantee

<span class="math align-center">$ O(nÂ \lgÂ n) $</span> performance &mdash; in the worst case, they are all
still in <span style="white-space:nowrap">
<span class="math align-center">$ O(n^2) $</span>.</span> Furthermore, the bad cases still use
linear stack space. To overcome these shortfalls, we can put a limit on
the depth of recursion. Once this limit is reached, we can finish
sorting this portion with an 
<span class="math align-center">$ O(nÂ \lgÂ n) $</span> algorithm such as


<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#heap-sort">heap sort</a>. The idea is to
pick a limit that is large enough that it is rarely reached, but still
small enough that bad cases will cause the alternative sort to be
invoked before too much time is spent. A limit of about <span style="white-space:nowrap">
<span class="math align-center">$ 2Â \lgÂ n $</span>,</span>
where 
<span class="math align-center">$ n $</span> is the size of the entire array, has been suggested. Because
arrays in C# must have fewer than 
<span class="math align-center">$ 2^{31} $</span> elements, this value
is always less than <span style="white-space:nowrap">
<span class="math align-center">$ 62 $</span>;</span> hence, it is also safe to use a constant for the
limit. The resulting algorithm has a worst-case running time in

<span class="math align-center">$ O(nÂ \lgÂ n) $</span> and a worst-case stack usage of <span style="white-space:nowrap">
<span class="math align-center">$ O(\lgÂ n) $</span>.</span>
This logarithmic bound on the stack usage is sufficient to avoid a
<strong>StackOverflowException</strong>.</p>
<p>The combination of 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/split/#median-of-3">quick sort using median-of-three
partitioning</a> with
insertion sort for small portions and heap sort when the recursion depth
limit is reached is known as <em>introsort</em> (short for <em>introspective
sort</em>). Other improvements exist, but we will not discuss them here. The
best versions of introsort are among the best sorting algorithms
available, unless the array is nearly sorted. Of course, if the data
won&rsquo;t fit in an array, we can&rsquo;t use introsort &mdash; we should use 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/merge/#external">external
merge sort</a>
instead. Furthermore, like quick sort and heap sort, introsort is not
stable. When a stable sort is not needed, however, and when none of the
above special cases applies, introsort is one of the best choices
available.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Sorting Strings</h1></div>
<h2 id="sorting-strings">Sorting Strings</h2>
<p>We conclude our discussion of sorting with a look at a sorting algorithm
designed specifically for sorting multi-keyed data. In such data there
is a primary key, a secondary key, and so on. We want to sort the data
so that element <em>a</em> precedes element <em>b</em> if:</p>
<ul>
<li>the primary key of <em>a</em> is less than the primary key of <em>b</em>;</li>
<li>or their primary keys are equal, but the secondary key of <em>a</em> is
less than the secondary key of <em>b</em>;</li>
<li>etc.</li>
</ul>
<p>An example of multi-keyed data is strings. The first character of a
string is its primary key, its second character is its secondary key,
and so on. The only caveat is that the strings may not all have the same
length; hence, they may not all have the same number of keys. We
therefore stipulate that a string that does not have a particular key
must precede all strings that have that key.</p>
<p>One algorithm to sort multi-keyed data is known as <em>multi-key quick
sort</em>. In this section, we will describe multi-key quick sort as it
applies specifically to sorting strings; however, it can be applied to
other multi-keyed data as well.</p>
<p>One problem with sorting strings using a version of quick sort described
in &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/split">Split Sorts</a>&rdquo; is
that string comparisons can be expensive. Specifically, they must
compare the strings a character at a time until they reach either a
mismatch or the end of a string. Thus, comparing strings that have a
long prefix in common is expensive. Now observe that quick sort operates
by splitting the array into smaller and smaller pieces whose elements
belong near each other in the sorted result. It is therefore common to
have some pieces whose elements all begin with the same long prefix.</p>
<p>Multi-key quick sort improves the performance by trying to avoid
comparing prefixes after they have already been found to be the same
(though the suffixes may differ). In order to accomplish this, it uses
an extra <strong>int</strong> parameter <code>k</code> such that all the strings being sorted
match in their first <code>k</code> positions (and by implication, all strings have
length at least <code>k</code>). We can safely use a value of 0 in the initial
call, but this value can increase as recursive calls are made.</p>
<p>Because all strings begin with the same prefix of length <code>k</code>, we can
focus on the character at location <code>k</code> (i.e., following the first <code>k</code>
characters) of each string. We need to be careful, however, because some
of the strings may not have a character at location <code>k</code>. We will
therefore use an <strong>int</strong> to store the value of the character at location
<code>k</code> of a string, letting 
<span class="math align-center">$ -1 $</span> denote the absence of a character at that
location.</p>
<p>The algorithm then proceeds a lot like those described in &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/split">Split
Sorts</a>&rdquo;. If the number of
elements being sorted is greater than <span style="white-space:nowrap">
<span class="math align-center">$ 1 $</span>,</span> a pivot element <code>p</code> is found.
Note that <code>p</code> is not a <strong>string</strong>, but an <strong>int</strong> representing a
character at location <code>k</code>, as described above. The elements are then
partitioned into groups of strings whose character at location <code>k</code> is
less than <code>p</code>, equal to <code>p</code>, or greater than <code>p</code>, respectively.</p>
<p>After these three groups are formed, the first and third group are
sorted recursively using the same value for <code>k</code>. Furthermore, the second
group may not be completely sorted yet &mdash; all we know is that all strings
in this group agree on the first <code>kÂ +Â 1</code> characters. Thus, unless
<code>p</code> is 
<span class="math align-center">$ -1 $</span> (indicating that that these strings all have length <code>k</code>, and
are therefore all equal), we need to recursively sort this group as
well. However, because we know that the strings in this group all agree
on the first <code>kÂ +Â 1</code> characters, we pass <code>kÂ +Â 1</code> as the last
parameter.</p>
<p>One aspect of this algorithm that we need to address is whether the
recursion is valid. Recall that 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/intro/#recursion">when we introduced
recursion</a>, we stated that
in order to guarantee termination, all recursive calls must be on
smaller problem instances, where the size of a problem instance is given
by a nonnegative integer. In the algorithm described above, we might
reach a point at which all of the strings being sorted match in location
<code>k</code>. In such a case, the second recursive call will contain all of the
strings.</p>
<p>By being careful how we define the size of the problem instance,
however, we can show that this recursion is, in fact, valid.
Specifically, we define the size of the problem instance to be the
number of strings being sorted, plus the total number of characters
beginning at location <code>k</code> in all strings being sorted. Because there is
at least one string containing <code>p</code> at location <code>k</code>, the number of
strings in both the first and the third recursive call must be smaller,
while the total number of characters beginning at location <code>k</code> can be no
larger. Because <code>k</code> increases by 
<span class="math align-center">$ 1 $</span> in the second recursive call, the
total number of characters past this location must be smaller, while the
number of strings can be no larger. Hence, the size decreases in all
recursive calls.</p>
<p>The fact that we are doing recursion on the length of strings, however,
can potentially cause the runtime stack to overflow when we are sorting
very long strings. For this reason, it is best to convert the recursive
call on the second group to a loop. We can do this by changing the
<strong>if</strong>-statement that controls whether the splitting will be done into a
<strong>while</strong>-loop that iterates as long as the portion being sorted is
large enough to split. Then at the bottom of the loop, after doing
recursive calls on the first and third parts, we check to see if <code>p</code> is

<span class="math align-center">$ -1 $</span> &mdash; if so, we exit the loop. Otherwise, we do the following:</p>
<ul>
<li>increment <code>k</code>;</li>
<li>change the index giving the start of the portion we are sorting to
the beginning of the second part; and</li>
<li>change the length of the portion we are sorting to the length of the
second part.</li>
</ul>
<p>The next iteration will then sort the second part.</p>
<p>This algorithm can be combined with 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert">insertion
sort</a> and 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/#heap-sort">heap
sort</a>, as was done for
introsort in 

<a href="https://ksu-cs-textbooks.github.io/cis300/sorting/hybrid">the previous
section</a>. However, we
should also modify insertion sort and heap sort to use the information
we already have about equal prefixes when we are comparing elements.
Specifically, rather than comparing entire strings, we should begin
comparing after the equal prefix. Because of the way multi-key quick
sort does comparisons, the result tends to perform better than the
single-key versions, assuming similar optimizations are made; however,
cutoffs for running insertion sort and/or heap sort may need to be
adjusted.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Appendices</h1></div>
<h2 id="appendices">Appendices</h2>
<p>The appendices contain material that does not fit well into the flow
of the main text. They may be used for reference as needed.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>C# Syntax</h1></div>
<h2 id="c-syntax">C# Syntax</h2>
<p>This chapter discusses various C# features that are either unavailable in Java or are unlikely to have been covered in an introductory Java programming class. No attempt has been made to be exhaustive. Instead, we focus mainly on those features that are likely to be needed in CIS 300. In addition, the following topics are covered in the main text, rather than in this appendix:</p>
<ul>
<li>

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stacks/#generic">Generic Types</a></li>
<li>

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl/">Interfaces</a></li>
<li>

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl/#overriding">Overriding <strong>virtual</strong>  Methods</a></li>
<li>

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/equality/#operator-overloading">Operator Overloading</a></li>
<li>

<a href="https://ksu-cs-textbooks.github.io/cis300/io/advanced-text-file/#using">The <strong>using</strong> Statement</a></li>
<li>

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/equality">Equality</a></li>
<li>

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stacks/#cast">Type Casting</a></li>
</ul>
<p>For more information on C#, see the 

<a href="http://msdn.microsoft.com/en-us/library/618ayhy6.aspx" target="_blank" rel="noopener">C# Reference</a> manual and the 

<a href="http://msdn.microsoft.com/en-us/library/67ef8sbd.aspx" target="_blank" rel="noopener">C# Programming Guide</a>.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Reference Types and Value Types</h1></div>
<h2 id="reference-types-and-value-types">Reference Types and Value Types</h2>
<p>Data types in C# come in two distinct flavors: <em>value types</em> and <em>reference types</em>. In order to understand the distinction, it helps to consider how space is allocated in C#. Whenever a method is called, the space needed to execute that method is allocated from a data structure known as the <em>call stack</em>. The space for a method includes its local variables, including its parameters (except for 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/out-ref"><strong>out</strong> or <strong>ref</strong> parameters</a>). The organization of the call stack is shown in the following figure:</p>
<p><img src="../img/call-stack.jpg" alt="A picture of the call stack should appear here"></p>
<p>When the currently-running method makes a method call, space for that method is taken from the beginning of the unused stack space. When the currently-running method returns, its space is returned to the unused space. Thus, the call stack works like 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl">the array-based implementation of a stack</a>, and this storage allocation is quite efficient.</p>
<p>What is stored in the space allocated for a variable depends on whether the variable is for a value type or a reference type. For a value type, the value of the variable is stored directly in the space allocated for it. There are two kinds of value types: 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/structs">structures</a> and 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerations">enumerations</a>. Examples of structures include numeric types such as <strong>int</strong>, <strong>double</strong>, and <strong>char</strong>. An example of an enumeration is 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.dialogresult?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>DialogResult</strong></a> (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/message-boxes">&quot;<strong>MessageBox</strong>es&quot;</a> and 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/file-dialogs">&ldquo;File Dialogs&rdquo;</a>).</p>
<p>Because value types are stored directly in variables, whenever a value is assigned to a variable of a value type, the entire value must be written to the variable. For performance reasons, value types therefore should be fairly small.</p>
<p>For reference types, the values are not stored directly into the space allocated for the variable. Instead, the variable stores a <em>reference</em>, which is like an address where the value of the variable can actually be found. When a reference type is constructed with a <strong>new</strong> expression, space for that instance is allocated from a large data structure called the <em>heap</em> (which is unrelated to a 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/heaps">heap used to implement a priority queue</a>). Essentially, the heap is a large pool of available memory from which space of different sizes may be allocated at any time. We will not go into detail about how the heap is implemented, but suffice it to say that it is more complicated and less efficient than the stack. When space for a reference type is allocated from the heap, a reference to that space is stored in the variable. Larger data types are more efficiently implemented as reference types because an assignment to a variable of a reference type only needs to write a reference, not the entire data value.</p>
<p>There are three kinds of reference types: classes, 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl">interfaces</a>, 

<a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/record" target="_blank" rel="noopener">records</a>, and 

<a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/reference-types#the-delegate-type" target="_blank" rel="noopener">delegates</a>. Records and delegates are beyond the scope of this course.</p>
<p>Variables of a reference type do not need to refer to any data value. In this case, they store a value of <strong>null</strong> (variables of a value type cannot store <strong>null</strong>). Any attempt to access a method, property, or other member of a <strong>null</strong> or to apply an index to it will result in a <strong>NullReferenceException</strong>.</p>
<p>The fields of classes or structures are stored in a similar way, depending on whether the field is a value type or a reference type. If it is a value type, the value is stored directly in the field, regardless of whether that field belongs to an object allocated from the stack or the heap. If it is a reference type, it stores either <strong>null</strong> or a reference to an object allocated from the heap.</p>
<p>The difference between value types and reference types can be illustrated with the following code example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span>[] DoSomething(<span style="color:#66d9ef">int</span> i, <span style="color:#66d9ef">int</span> j)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Point a = <span style="color:#66d9ef">new</span>(i, j);
</span></span><span style="display:flex;"><span>    Point b = a;
</span></span><span style="display:flex;"><span>    a.X = i + j;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span>[] c = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span>[] d = c;
</span></span><span style="display:flex;"><span>    c[<span style="color:#ae81ff">0</span>] = b.X;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> d;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Suppose this method is called as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span>[] values = DoSomething(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>);
</span></span></code></pre></div><p>The method contains six local variables: <code>i</code>, <code>j</code>, <code>a</code>, <code>b</code>, <code>c</code>, and <code>d</code>. <strong>int</strong> is a structure, and hence a value type. 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.drawing.point?view=net-6.0" target="_blank" rel="noopener"><strong>Point</strong></a> is a structure (and hence a value type) containing <strong>public int</strong> properties <strong>X</strong> and <strong>Y</strong>, each of which can be read or modified. <strong>int[ ]</strong>, however, is a reference type. Space for all six of these variables is allocated from the stack, and the space for the two <strong>Point</strong>s includes space to store two <strong>int</strong> fields for each. The values 1 and 2 passed for <code>i</code> and <code>j</code>, respectively, are stored directly in these variables.</p>
<p>The constructor in the first line of the method above sets the <strong>X</strong> property of <code>a</code> to 1 and the <strong>Y</strong> property of <code>a</code> to 2. The next statement simply copies the value of <code>a</code> - i.e., the point (1,Â 2) - to <code>b</code>. Thus, when the <strong>X</strong> property of <code>a</code> is then changed to 3, <code>b</code> is unchanged - it still contains the point (1,Â 2).</p>
<p>On the other hand, consider what happens when something similar is done with array variables. When <code>c</code> is constructed, it is assigned a new array allocated from the heap and containing 10 locations. These 10 locations are automatically initialized to 0. However, because an array is a reference type, the variable <code>c</code> contains a reference to the actual array object, not the array itself. Thus, when <code>c</code> is copied to <code>d</code>, the array itself is not copied - the reference to the array is copied. Consequently, <code>d</code> and <code>c</code> now refer to the same array object, not two different arrays that look the same. Hence, after we assign <code>c[0]</code> a value of 1, <code>d[0]</code> will also contain a value of 1 because <code>c</code> and <code>d</code> refer to the same array object. (If we want <code>c</code> and <code>d</code> to refer to different array objects, we need to construct a new array for each variable and make sure each location of each array contains the value we want.) The array returned therefore resides on the heap, and contains 1 at index 0, and 0 at each of its other nine locations. The six local variables are returned to unused stack space; however, because the array was allocated from the heap, the calling code may continue to use it.</p>
<p><span id="nullable-types"></span>It is sometimes convenient to be able to store a <strong>null</strong> in a variable of a value type. For example, we may want to indicate that an <strong>int</strong> variable contains no meaningful value. In some cases, we can reserve a specific <strong>int</strong> value for this purpose, but in other cases, there may be no <strong>int</strong> value that does not have some other meaning within the context. In such cases, we can use the <code>?</code> operator to define a <em>nullable</em> version of a value type; e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int?</span> i = <span style="color:#66d9ef">null</span>;
</span></span></code></pre></div><p>We can do this with any value type. Nullable value types such as <strong>int?</strong> are the only value types that can store <strong>null</strong>.</p>
<p>Beginning with C# version 8.0, similar annotations using the <code>?</code> operator are allowed for reference types. In contrast to its use with value types, this operator has no effect on the code execution when it is used with a reference type. Instead, such annotations are used to help programmers to avoid <strong>NullReferenceException</strong>s. For example, the type <strong>string</strong> is used for variables that should never be <strong>null</strong>, but <strong>string?</strong> is used for variables that might be <strong>null</strong>. Assigning <strong>null</strong> to a <strong>string</strong> variable will not throw an exception (though it might lead to a <strong>NullReferenceException</strong> later); however, starting with .NET 6, the compiler will generate a warning whenever it cannot determine that a value assigned to a non-nullable variable is not <strong>null</strong>. One way to avoid this warning is to use the nullable version of the type; e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">string?</span> s = <span style="color:#66d9ef">null</span>;
</span></span></code></pre></div><p>The compiler uses a technique called <em>static analysis</em> to try to determine whether a value assigned to a variable of a non-nullable reference type is non-<strong>null</strong>. This technique is limited, resulting in many cases in which the value assigned cannot be <strong>null</strong>, but the compiler gives a warning anyway. (This technique is especially limited in its ability to analyze arrays.) In such cases, the <strong>null</strong>-forgiving operator <code>!</code> can be used to remove the warning. Whenever you use this operator, the CIS 300 style requirements specify that you must include a comment explaining why the value assigned cannot be <strong>null</strong> (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/comments/">&ldquo;Comments&rdquo;</a>).</p>
<p>For example, a 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader?view=net-6.0" target="_blank" rel="noopener"><strong>StreamReader</strong></a>&rsquo;s 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.readline?view=net-6.0" target="_blank" rel="noopener"><strong>ReadLine</strong></a> method returns <strong>null</strong> when there are no more lines left in the stream, but otherwise returns a non-<strong>null</strong> <strong>string</strong> (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/advanced-text-file/">&ldquo;Advanced Text File I/O&rdquo;</a>). We can use the <strong>StreamReader</strong>&rsquo;s 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.endofstream?view=net-6.0" target="_blank" rel="noopener"><strong>EndOfStream</strong></a> property to determine whether all lines have been read; for example, if <code>input</code> is a <strong>StreamReader</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (!input.EndOfStream)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> line = input.ReadLine();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Process the line</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>However, because <strong>ReadLine</strong> has a return type of <strong>string?</strong> and the type of <code>line</code> is <strong>string</strong>, the compiler generates a warning - even though <strong>ReadLine</strong> will never return <strong>null</strong> in this context. We can eliminate the warning as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (!input.EndOfStream)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Because input is not at the end of the stream, ReadLine won&#39;t return null.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> line = input.ReadLine()!;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Process the line</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Because classes are reference types, it is possible for the definition of a class <strong>C</strong> to contain one or more fields of type <strong>C</strong> or, more typically, type <strong>C?</strong>; for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> C? _nextC;
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Such circularity would be impossible for a value type because there would not be room for anything else if we tried to include a value of type <strong>C?</strong> within a value of type <strong>C</strong>. However, because <strong>C</strong> is a class, and hence a reference type, <code>_nextC</code> simply contains either <strong>null</strong> or a reference to some object of type <strong>C</strong>. When the runtime system constructs an instance of type <strong>C</strong>, it just needs to make it large enough to hold a reference, along with any other fields defined within <strong>C</strong>. Such recursive definitions are a powerful way to link together many instances of a type. See &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists">Linked Lists</a>&rdquo; and &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/trees">Trees</a>&rdquo; for more information.</p>
<p>Because all types in C# are subtypes of <strong>object</strong>, which is a reference type, every value type is a subtype of at least one reference type (however, value types cannot themselves have subtypes). It is therefore possible to assign an instance of a value type to a variable of a reference type; for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">object</span> x = <span style="color:#ae81ff">3</span>;
</span></span></code></pre></div><p>When this is done, a <em>boxed</em> version of the value type is constructed,
and the value copied to it. The boxed version of the value type is
just like the original value type, except that it is allocated from
the heap and accessed by reference, not by value. A reference to this boxed version is then assigned to the variable of the reference type. Note that multiple variables of the reference type may refer to the same boxed instance of the value type.
Note also that boxing may also occur when passing parameters. For example, suppose we have a method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">object</span> F(<span style="color:#66d9ef">object</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If we call <strong>F</strong> with a parameter of 3, then 3 will need to be copied to a boxed <strong>int</strong>, and a reference to this boxed <strong>int</strong> will be assigned to <code>x</code> within <strong>F</strong>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Enumerations</h1></div>
<h2 id="enumerations">Enumerations</h2>
<p>An <em>enumeration</em> is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">value type</a> containing a set of named constants. An example of an enumeration is 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.dialogresult?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>DialogResult</strong></a> (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/message-boxes">&quot;<strong>MessageBox</strong>es&quot;</a> and 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/file-dialogs">&ldquo;File Dialogs&rdquo;</a>). The <strong>DialogResult</strong> type contains the following members:</p>
<ul>
<li><strong>DialogResult.Abort</strong></li>
<li><strong>DialogResult.Cancel</strong></li>
<li><strong>DialogResult.Ignore</strong></li>
<li><strong>DialogResult.No</strong></li>
<li><strong>DialogResult.None</strong></li>
<li><strong>DialogResult.OK</strong></li>
<li><strong>DialogResult.Retry</strong></li>
<li><strong>DialogResult.Yes</strong></li>
</ul>
<p>Each of the above members has a different constant value. In many cases, we are not interested in the specific value of a given member. Instead, we are often only interested in whether two expressions of this type have the same value. For example, the following code fragment is given in the 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/message-boxes">&quot;<strong>MessageBox</strong>es&quot;</a> section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>DialogResult result = MessageBox.Show(<span style="color:#e6db74">&#34;The file is not saved. Really quit?&#34;</span>, <span style="color:#e6db74">&#34;Confirm Quit&#34;</span>, MessageBoxButtons.YesNo);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (result == DialogResult.Yes)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Application.Exit();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In the <strong>if</strong>-statement above, we are only interested in whether the user closed the <strong>MessageBox</strong> with the &ldquo;Yes&rdquo; button; i.e., we want to know whether the <strong>Show</strong> method returned the same value as <strong>DialogResult.Yes</strong>. For this purpose, we don&rsquo;t need to know anything about the value of <strong>DialogResult.Yes</strong> or any of the other <strong>DialogResult</strong> members.</p>
<p>However, there are times when it is useful to know that the values in an enumeration are always integers. Using a 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stacks/#cast">cast</a>, we can assign a member of an enumeration to an <strong>int</strong> variable or otherwise use it as we would an <strong>int</strong>; for example, after the code fragment above, we can write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i = (<span style="color:#66d9ef">int</span>)result;
</span></span></code></pre></div><p>As a more involved example, we can loop through the values of an enumeration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (DialogResult r = <span style="color:#ae81ff">0</span>; (<span style="color:#66d9ef">int</span>)r &lt; <span style="color:#ae81ff">8</span>; r++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    MessageBox.Show(r.ToString());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The above loop will display 8 <strong>MessageBox</strong>es in sequence, each displaying the name of a member of the enumeration (i.e., &ldquo;None&rdquo;, &ldquo;OK&rdquo;, etc.).</p>
<p>Variables of an enumeration type may be assigned any value of the enumeration&rsquo;s underlying type (usually <strong>int</strong>, as we will discuss below). For example, if we had used the condition <code>(int)rÂ &lt;Â 10</code> in the above <strong>for</strong> statement, the loop would continue two more iterations, showing 8 and 9 in the last two <strong>MessageBox</strong>es.</p>
<p>An enumeration is defined using an 

<a href="http://msdn.microsoft.com/en-us/library/sbbt4032.aspx" target="_blank" rel="noopener"><strong>enum</strong></a> statement, which is similar to a <strong>class</strong> statement except that in the simplest case, the body of an <strong>enum</strong> is simply a listing of the members of the enumeration. For example, the <strong>DialogResult</strong> enumeration is defined as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> DialogResult
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    None, OK, Cancel, Abort, Retry, Ignore, Yes, No
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This definition defines <strong>DialogResult.None</strong> as having the value 0, <strong>DialogResult.OK</strong> as having the value 1, etc.</p>
<p>As mentioned above, each enumeration has underlying type. By default, this type is <strong>int</strong>, but an <strong>enum</strong> statement may specify another underlying type, as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> Beatles : <span style="color:#66d9ef">byte</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    John, Paul, George, Ringo
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The above construct defines the underlying type for the enumeration <strong>Beatles</strong> to be <strong>byte</strong>; thus, a variable of type <strong>Beatles</strong> may be assigned any <strong>byte</strong> value. The following integer types may be used as underlying types for enumerations:</p>
<ul>
<li><strong>byte</strong> (0 through 255)</li>
<li><strong>sbyte</strong> (-128 through 127)</li>
<li><strong>short</strong> (-32,768 through 32,767)</li>
<li><strong>ushort</strong> (0 through 65,535)</li>
<li><strong>int</strong> (-2,147,483,648 through 2,147,483,647)</li>
<li><strong>uint</strong> (0 through 4,294,967,295)</li>
<li><strong>long</strong> (-9,223,372,036,854,775,808 through 9,223,372,036,854,775,807)</li>
<li><strong>ulong</strong> (0 through 18,446,744,073,709,551,615)</li>
</ul>
<p>It is also possible to define members of an enumeration so that they are not simply the values 0, 1, etc. For example, we might alter the <strong>Beatles</strong> enumeration as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> Beatles : <span style="color:#66d9ef">byte</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    John = <span style="color:#ae81ff">1</span>, Paul, George = <span style="color:#ae81ff">5</span>, Ringo
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This defines the following values for the members:</p>
<ul>
<li><strong>Beatles.John</strong>: 1</li>
<li><strong>Beatles.Paul</strong>: 2</li>
<li><strong>Beatles.George</strong>: 5</li>
<li><strong>Beatles.Ringo</strong>: 6</li>
</ul>
<p>Thus, if a value is explicitly assigned to a member, that member takes
on that value; otherwise, that member takes on the next value greater
than the previous member listed, or 0 if that member is the first
listed. Note that using this technique, it is possible to define two
members with the same value, although this is usually undesirable. If
assigning values in this way would lead to a value outside the range of
the underlying type, a syntax error results (for example, if <strong>George</strong>
were assigned 255 in the above definition, thus causing <strong>Ringo</strong> to have a value outside the range of a <strong>byte</strong>).</p>
<p>One reason we might want to define explicit values for members of an
enumeration is if we want to use the members as flags. For example, one
of the


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messagebox.show?view=windowsdesktop-6.0#system-windows-forms-messagebox-show%28system-string-system-string-system-windows-forms-messageboxbuttons-system-windows-forms-messageboxicon-system-windows-forms-messageboxdefaultbutton-system-windows-forms-messageboxoptions%29" target="_blank" rel="noopener"><strong>MessageBox.Show</strong></a>
methods takes as one of its parameters a


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.messageboxoptions?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>MessageBoxOptions</strong></a>,
which is an enumeration containing the following members:</p>
<ul>
<li><strong>MessageBoxOptions.DefaultDesktopOnly</strong></li>
<li><strong>MessageBoxOptions.RightAlign</strong></li>
<li><strong>MessageBoxOptions.RtlReading</strong></li>
<li><strong>MessageBoxOptions.ServiceNotification</strong></li>
</ul>
<p>The meaning of each of these members is unimportant for the purposes of
this discussion. The point is that the values of these members are
chosen in such a way that more than one of them can be combined into a
single value. The way this is done is to define each member as a
different power of 2. The binary representation of a power of 2 contains
exactly one bit with a value of 1. Thus, these values can be combined
using a <em>logical OR</em> operator, and the original values can be retrieved
using a <em>logical AND</em> operator.</p>
<p>For example, suppose the <strong>MessageBoxOptions</strong> enumeration is defined as
follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> MessageBoxOptions
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    DefaultDesktopOnly = <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    RightAlign = <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    RtlReading = <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>    ServiceNotification = <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>The definition in .NET 6 uses different powers of 2, but
the priciple is the same.</p>
    </div>
</div>
<p>Now suppose we want to create a
<strong>MessageBox</strong> that will be displayed on the default desktop with
right-aligned text. We can combine these options using the expression</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>MessageBoxOptions.DefaultDesktopOnly | MessageBoxOptions.RightAlign
</span></span></code></pre></div><p>This expression combines corresponding bits of the two operands using a
logical OR. Recall that the logical OR of two bits is 1 if at least one
of the two bits is 1. If both operands are 0, the result is 0. In this
example, the operands have a 1 in different bit locations. When we
combine them using logical OR, both of these bit positions will contain
a 1:</p>
<pre>
0000 0000 0000 0000 0000 0000 0000 0001
0000 0000 0000 0000 0000 0000 0000 0010
---------------------------------------
0000 0000 0000 0000 0000 0000 0000 0011
</pre>
<p>We can therefore specify both of these options to the <strong>Show</strong> method as
folows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>MessageBox.Show(<span style="color:#e6db74">&#34;Hello\nworld!&#34;</span>, <span style="color:#e6db74">&#34;Hello&#34;</span>, MessageBoxButtons.OK,
</span></span><span style="display:flex;"><span>    MessageBoxIcon.Information, MessageBoxDefaultButton.Button1, 
</span></span><span style="display:flex;"><span>    MessageBoxOptions.DefaultDesktopOnly |
</span></span><span style="display:flex;"><span>    MessageBoxOptions.RightAlign);
</span></span></code></pre></div><p>The <code>\n</code> in the above example specifies the end of a line; hence,
&ldquo;Hello&rdquo; and &ldquo;world!&rdquo; will be displayed on separate lines, aligned on
the right:</p>
<img src="message-box-options.jpg" alt="A picture of a dialog should appear here." style="zoom:67%;" />
<p>The <strong>Show</strong> method determines which bits are 1 in the
<strong>MessageBoxOptions</strong> parameter using a logical AND. Recall that a
logical AND of two bits is 1 only if both bits are 1. In all othercases,
the result is 0. Suppose, then, that <code>options</code> is a
<strong>MessageBoxOptions</strong> variable with an unknown value. Because each named
member of the <strong>MessageBoxOptions</strong> enumeration (e.g.,
<strong>MessageBoxOptions.RightAlign</strong>) has exactly one bit with a value of 1,
an expression like</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>options &amp; MessageBoxOptions.RightAlign
</span></span></code></pre></div><p>can have only two possible values:</p>
<ul>
<li>If the bit position containing the 1 in
<strong>MessageBoxOptions.RightAlign</strong> also contains a 1 in <code>options</code>,
then the expression&rsquo;s value is <strong>MessageBoxOptions.RightAlign</strong>.</li>
<li>Otherwise, the expression&rsquo;s value is 0.</li>
</ul>
<p>Thus, the <strong>Show</strong> method can use code like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> ((options &amp; MessageBoxOptions.RightAlign) == MessageBoxOptions.RightAlign)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Code to right-align the text</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Code to left-align the text</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Defining enumerations to be used as flags in this way can be made easier
by writing the powers of 2 in hexadecimal, or base 16. Each hex digit
contains one of 16 possible values: the ten digits 0-9 or the six
letters a-f (in either lower or upper case). A hex digit is exactly four
bits; hence, the hex values containing one occurrence of either 1, 2, 4,
or 8, with all other digits 0, are exactly the powers of 2. To write a
number in hex in a C# program, start with <code>0x</code>, then give the hex
digits. For example, we can define the following enumeration to
represent the positions a baseball player is capable of playing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> Positions
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Pitcher = <span style="color:#ae81ff">0x1</span>,
</span></span><span style="display:flex;"><span>    Catcher = <span style="color:#ae81ff">0x2</span>,
</span></span><span style="display:flex;"><span>    FirstBase = <span style="color:#ae81ff">0x4</span>,
</span></span><span style="display:flex;"><span>    SecondBase = <span style="color:#ae81ff">0x8</span>,
</span></span><span style="display:flex;"><span>    ThirdBase = <span style="color:#ae81ff">0x10</span>,
</span></span><span style="display:flex;"><span>    Shortstop = <span style="color:#ae81ff">0x20</span>,
</span></span><span style="display:flex;"><span>    LeftField = <span style="color:#ae81ff">0x40</span>,
</span></span><span style="display:flex;"><span>    CenterField = <span style="color:#ae81ff">0x80</span>,
</span></span><span style="display:flex;"><span>    RightField = <span style="color:#ae81ff">0x100</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We can then encode that a player is capable of playing 1st base, left
field, center field, or right field with the expression:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>Positions.FirstBase | Positions.LeftField | Positions.CenterField | Positions.RightField
</span></span></code></pre></div><p>This expression would give a value having four bit positions containing
1:</p>
<pre>
0000 0000 0000 0000 0000 0001 1100 0100
</pre>
<p>For more information on enumerations, see the section,


<a href="http://msdn.microsoft.com/en-us/library/sbbt4032.aspx" target="_blank" rel="noopener">Enumeration Types</a> in the
<em>C# Reference</em>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Structures</h1></div>
<h2 id="structures">Structures</h2>
<p>A structure is similar to a class, except that it is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">value type</a>, whereas a class is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference type</a>. A structure definition looks a lot like a class definition; for example, the following defines a structure for storing information associated with a name:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Stores a frequency and a rank.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">FrequencyAndRank</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the Frequency.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> Frequency { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the Rank.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Rank { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initializes a FrequencyAndRank with the given values.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;freq&#34;&gt;The frequency.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;rank&#34;&gt;The rank.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> FrequencyAndRank(<span style="color:#66d9ef">float</span> freq, <span style="color:#66d9ef">int</span> rank)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Frequency = freq;
</span></span><span style="display:flex;"><span>        Rank = rank;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Obtains a string representation of the frequency and rank.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The string representation.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">string</span> ToString()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Frequency + <span style="color:#e6db74">&#34;, &#34;</span> + Rank;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Note that the above definition looks just like a class definition, except that the keyword <strong>struct</strong> is used instead of the keyword <strong>class</strong>, and the <strong>readonly</strong> modifier is used. The <strong>readonly</strong> modifier cannot be used with a class definition, but is often used with a structure definition to indicate that the structure is <em>immutable</em>. The compiler then verifies that the structure definition does not allow any fields to be changed; for example, it verifies that no property has a <strong>set</strong> accessor.</p>
<p>A structure can be defined anywhere a class can be defined. However, one important restriction on a structure definition is that no field can be of the same type as the structure itself. For example, the following definition is not allowed:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">S</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> S _nextS;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The reason for this restriction is that because a structure is a value type, each instance would need to contain enough space for another instance of the same type, and this instance would need enough space for another instance, and so on forever. This type of circular definition is prohibited even if it is indirect; for example, the following is also illegal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">S</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> T NextT { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">T</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> S? NextS { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Because the <strong>NextT</strong> 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">property</a> uses the default implementation, each instance of <strong>S</strong> contains a hidden field of type <strong>T</strong>. Because <strong>T</strong> is a value type, each instance of <strong>S</strong> needs enough space to store an instance of <strong>T</strong>. Likewise, because the <strong>NextS</strong> property uses the default implementation, each instance of <strong>T</strong> contains a hidden field of type <strong>S?</strong>. Because <strong>S</strong> is a value type, each instance of <strong>T</strong> - and hence each instance of <strong>S</strong> - needs enough space to store an instance of <strong>S?</strong>, which in turn needs enough space to store an instance of <strong>S</strong>. Again, this results in circularity that is impossible to satisfy.</p>
<p>Any structure must have a constructor that takes no parameters. If one is not explicitly provided, a default constructor containing no statements is included. If one is explicitly provided, it must be <strong>public</strong>. Thus, an instance of a structure can always be constructed using a no-parameter constructor. If no code for such a constructor is provided, each field that does not contain an initializer is set to its default value.</p>
<p>If a variable of a structure type is assigned its 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl/#default-value">default value</a>, each of its fields is set to its default value, regardless of any initializers in the structure definition. For example, if <strong>FrequencyAndRank</strong> is defined as above, then the following statement will set both <code>x.Frequency</code> and <code>x.Rank</code> to 0:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>FrequencyAndRank x = <span style="color:#66d9ef">default</span>;
</span></span></code></pre></div>
  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Because the default value of a type can always be assigned to a variable of that type, care should be taken when including fields of reference types within a structure definition. Because the default instance of this structure will contain <strong>null</strong> values for all fields of reference types, these fields should be defined to be 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value#nullable-types">nullable</a>. The compiler provides no warnings about this.</p>
    </div>
</div>
<p>For more information on structures, see the section, 

<a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/struct" target="_blank" rel="noopener">&ldquo;Structure types&rdquo;</a> in the <em>C# Language Reference</em>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The decimal Type</h1></div>
<h2 id="the-decimal-type">The <strong>decimal</strong> Type</h2>
<p>A


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.decimal?view=net-6.0" target="_blank" rel="noopener"><strong>decimal</strong></a>
is a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/structs">structure</a> representing
a floating-point decimal number. The main difference between a
<strong>decimal</strong> and a <strong>float</strong> or a <strong>double</strong> is that a <strong>decimal</strong> can
store any value that can be written using no more than 28 decimal
digits, a decimal point, and optionally a &lsquo;-&rsquo;, without rounding. For
example, the value 0.1 cannot be stored exactly in either a <strong>float</strong> or
a <strong>double</strong> because its binary representation is infinite
(0.000110011&hellip;); however, it can be stored exactly in a <strong>decimal</strong>.
Various types, such as <strong>int</strong>, <strong>double</strong>, or <strong>string</strong>, may be
converted to a <strong>decimal</strong> using a <strong>Convert.ToDecimal</strong> method; for
example, if <code>i</code> is an <strong>int</strong>, we can convert it to a decimal with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">decimal</span> d = Convert.ToDecimal(i);
</span></span></code></pre></div><p>A decimal is represented internally with the following three components:</p>
<ul>
<li>A 96-bit value <em>v</em> storing the digits
(0 â¤ <em>v</em> â¤ 79,228,162,514,264,337,593,543,950,335).</li>
<li>A sign bit <em>s</em>, where 1 denotes a negative value.</li>
<li>A scale factor <em>d</em> to indicate where the decimal point is
(0 â¤ <em>d</em> â¤ 28).</li>
</ul>
<p>The value represented is then (-1)<sup><em>s</em></sup><em>v</em>/10<sup><em>d</em></sup>.
For example, 123.456 can be represented by setting <em>v</em> to 123,456,
<em>s</em> to 0, and <em>d</em> to 3.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Read-Only and Constant Fields</h1></div>
<h2 id="read-only-and-constant-fields">Read-Only and Constant Fields</h2>
<p>Field declarations may contain one of the the keywords <strong>readonly</strong> or  <strong>const</strong> to indicate that these fields will always contain the same values. Such declarations are useful for defining a value that is to be used throughout a class or 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/structs">structure</a> definition, or throughout an entire program. For example, we might define:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ConstantsExample</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">int</span> VerticalPadding = <span style="color:#ae81ff">12</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">string</span> _humanPlayer = <span style="color:#e6db74">&#34;X&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    . . .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Subsequently throughout the above class, the identifier <code>_humanPlayer</code> will refer to the string, &ldquo;X&rdquo;. Because <code>VerticalPadding</code> is <strong>public</strong>, the <code>VerticalPadding</code> field of any instance of this <strong>ConstantsExample</strong> will contain the value 12 throughout the program. Such definitions are useful for various reasons, but perhaps the most important is that they make the program more maintainable. For example, <code>VerticalPadding</code> may represent some distance within a graphical layout. At some point in the lifetime of the software, it may be decided that this distance should be changed to 10 in order to give a more compact layout. Because we are using a <strong>readonly</strong> field rather than a literal 12 everywhere this distance is needed, we can make this change by simply changing the 12 in the above definition to 10.</p>
<p>When defining a <strong>const</strong> field, an initializer is required. The value assigned by the initializer must be a value that can be computed at compile time. For this reason, a constant field of a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference type</a> can only be a <strong>string</strong> or <strong>null</strong>. The assigned value may be an expression, and this expression may contain other <strong>const</strong> fields, provided these definitions don&rsquo;t mutually depend on each other. Thus, for example, we could add the following to the above definition:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">string</span> _paddedHumanPlayer = <span style="color:#e6db74">&#34; &#34;</span> + _humanPlayer + <span style="color:#e6db74">&#34; &#34;</span>;
</span></span></code></pre></div><p><strong>const</strong> fields may not be declared as 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/static-this"><strong>static</strong></a>, as they are already implicitly <strong>static</strong>.</p>
<p>A <strong>readonly</strong> field differs from a <strong>const</strong> field mainly in that it is initialized at runtime, whereas a <strong>const</strong> field is initialized at compile time. This difference has several ramifications. First, a <strong>readonly</strong> field may be initialized in a constructor as an alternative to using an initializer. Second, a <strong>readonly</strong> field may be either <strong>static</strong> or non-<strong>static</strong>. These differences imply that in different instances of the same class or structure, a <strong>readonly</strong> field may have different values.</p>
<p>One final difference between a <strong>readonly</strong> field and a <strong>const</strong> field is that a <strong>readonly</strong> field may be of any type and contain any value. Care must be taken, however, when defining a <strong>readonly</strong> reference type. For example, suppose we define the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span>[] _names = { <span style="color:#e6db74">&#34;Peter&#34;</span>, <span style="color:#e6db74">&#34;Paul&#34;</span>, <span style="color:#e6db74">&#34;Mary&#34;</span> };
</span></span></code></pre></div><p>Defining <code>_names</code> to be <strong>readonly</strong> guarantees that this field will always refer to the same array after its containing instance is constructed. However, it does <em>not</em> guarantee that the three array locations will always contain the same values. For this reason, the use of <strong>readonly</strong> for <strong>public</strong> fields of mutable reference types is discouraged.</p>
<p><strong>readonly</strong> is preferred over <strong>const</strong> for a <strong>public</strong> field whose value may change later in the software lifecycle. If the value of a <strong>public const</strong> field is changed by a code revision, any code using that field will need to be recompiled to incorporate that change.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Properties</h1></div>
<h2 id="properties">Properties</h2>
<p>A property is used syntactically like a field of a class or structure,
but provides greater flexibility in implementation. For example, the
<strong>string</strong> class contains a <strong>public</strong> property called


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.length?view=net-6.0" target="_blank" rel="noopener"><strong>Length</strong></a>. This
property is accessed in code much as if it were a <strong>public int</strong>
field; i.e., if <code>s</code> is a <strong>string</strong> variable, we can access its
<strong>Length</strong> property with the expression <code>s.Length</code>,
which evaluates to an <strong>int</strong>. If <strong>Length</strong> were a <strong>public int</strong> field, we would access it in just the same way. However, it turns out that we cannot assign a value to this property, as we can to a <strong>public</strong> field; i.e., the statement,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>s.Length = <span style="color:#ae81ff">0</span>;
</span></span></code></pre></div><p>is not allowed. The reason for this limitation is that properties can be defined to restrict whether they can be read from or written to. The <strong>Length</strong> property is defined so that it can be read from, but not written to. This flexibility is one of the two main differences between a field and a property. The other main difference has to do with maintainability and is therefore easier to understand once we see how to define a property.</p>
<p>Suppose we wish to provide full read/write access to a <strong>double</strong> value. Rather than defining a <strong>public double</strong> field, we can define a simple <strong>double</strong> property as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span></code></pre></div><p>This property then functions just like a <strong>public</strong> field - the <strong>get</strong> keyword allows code to read from the property, and the <strong>set</strong> keyword allows code to write to the property. A property definition requires at least one of these keywords, but one of them may be omitted to define a read-only property (if <strong>set</strong> is omitted) or a write-only property (if <strong>get</strong> is omitted). For example, the following defines <strong>X</strong> to be a read-only property:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X { <span style="color:#66d9ef">get</span>; }
</span></span></code></pre></div><p>Although this property is read-only, the constructor for the class or structure containing this definition is allowed to initialize it. Sometimes, however we want certain methods of the containing class or structure to be able to modify the property&rsquo;s value without allowing user code to do so. To accomplish this, We can define <strong>X</strong> in this way:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>; }
</span></span></code></pre></div><p>The above examples are the simplest ways to define properties. They all rely on the <em>default implementation</em> of the property. Unlike a field, the name of the property is not actually a variable; instead, there is a <em>hidden</em> variable that is automatically defined. The only way this hidden variable can be accessed is through the property.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Don&rsquo;t define a <strong>private</strong> property using the default implementation. Use a <strong>private</strong> field instead.</p>
    </div>
</div>
<p>The distinction between a property and its hidden variable may seem artificial at first. However, the real flexibility of a property is revealed by the fact that we can define our own implementation, rather than relying on the default implementation. For example, suppose a certain data structure stores a <strong>StringBuilder</strong> called <code>_word</code>, and we want to provide read-only access to its length. We can facilitate this by defining the following property:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> WordLength
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> =&gt; _word.Length;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In fact, we can abbreviate this definition as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> WordLength =&gt; _word.Length;
</span></span></code></pre></div><p>In this case, the <strong>get</strong> keyword is implied. In either case, the code to the right of the &ldquo;=&gt;&rdquo; must be an expression whose type is the same as the property&rsquo;s type. Note that when we provide such an expression, there is no longer a hidden variable, as we have provided explicit code indicating how the value of the property is to be computed.</p>
<p>We can also provide an explicit implementation for the <strong>set</strong> accessor. Suppose, for example, that we want to allow the user read/write access to the length of <code>_word</code>. In order to be able to provide write access, we must be able to acquire the value that the user wishes to assign to the length. C# provides a keyword <strong>value</strong> for this purpose - its type is the same as the type of the property, and it stores the value that user code assigns to the property. Hence, we can define the property as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> WordLength
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> =&gt; _word.Length;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">set</span> =&gt; _word.Length = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>It is this flexibility in defining the implementation of a property that makes <strong>public</strong> properties more maintainable than <strong>public</strong> fields. Returning to the example at the beginning of this section, suppose we had simply defined <strong>X</strong> as a <strong>public double</strong> field. As we pointed out above, such a field could be used by user code in the same way as the first definition of the property <strong>X</strong>. However, a field is part of the implementation of a class or structure. By making it <strong>public</strong>, we have exposed part of the implementation to user code. This means that if we later change this part of the implementation, we will potentially break user code that relies on it. If, instead, we were to use a property, we can then change the implementation by modifying the <strong>get</strong> and/or <strong>set</strong> accessors. As long as we don&rsquo;t remove either accessor (or make it <strong>private</strong>), such a change is invisible to user code. Due to this maintainability, good programmers will never use <strong>public</strong> fields (unless they are 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/const">constants</a>); instead, they will use <strong>public</strong> properties.</p>
<p>In some cases, we need more than a single to expression to define a <strong>get</strong> or <strong>set</strong> accessor. For example, suppose a data structure stores an <strong>int[Â ]</strong> <code>_elements</code>, and we wish to provide read-only access to this array. In order to ensure read-only access, we don&rsquo;t want to give user code a reference to the array, as the code would then be able to modify its contents. We therefore wish to make a copy of the array, and return that array to the user code (though a better solution might be to define an 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/indexers">indexer</a>). We can accomplish this as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span>[ ] Elements
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span>[] temp = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[_elements.Length];
</span></span><span style="display:flex;"><span>        _elements.CopyTo(temp, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> temp;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Thus, arbitrary code may be included within the <strong>get</strong> accessor, provided it returns a value of the appropriate type; however, it is good programming practice to avoid changing the fields of a class or structure within the <strong>get</strong> accessor of one of its properties. In a similar way, arbitrary code may be used to implement a <strong>set</strong> accessor. As we can see from this most general way of defining properties, they are really more like methods than fields.</p>
<p>Given how similar accessors are to methods, we might also wonder why we don&rsquo;t just use methods instead of properties. In fact, we can do just that - properties don&rsquo;t give any functional advantage over methods, and in fact, some object-oriented languages don&rsquo;t have properties. The advantage is stylistic. Methods are meant to perform actions, whereas properties are meant to represent entities. Thus, we could define methods <strong>GetX</strong> and <strong>SetX</strong> to provide access to the <strong>private</strong> field <code>_x</code>; however, it is stylistically cleaner to define a property called <strong>X</strong>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Indexers</h1></div>
<h2 id="indexers">Indexers</h2>
<p>Recall that the <code>System.Collections.Generic.Dictionary&lt;TKey,Â TValue&gt;</code> class (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/dictionary-tkey-tvalue">&ldquo;The <strong>Dictionary&lt;TKey,Â TValue&gt;</strong> Class&rdquo;</a>) allows keys to be used as indices for the purpose of adding new keys and values, changing the value associated with a key, and retrieving the value associated with a key in the table. In this section, we will discuss how to implement this functionality.</p>
<p>An indexer in C# is defined using the following syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> TValue <span style="color:#66d9ef">this</span>[TKey k]
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code to retrieve the value with key k</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">set</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code to associate the given value with key k</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Note the resemblance of the above code to the definition of a property. The biggest differences are:</p>
<ul>
<li>In place of a property name, an indexer uses the keyword <code>this</code>.</li>
<li>The keyword <code>this</code> is followed by a nonempty parameter list enclosed in square brackets.</li>
</ul>
<p>Thus, an indexer is like a property with parameters. The parameters are the indices themselves; i.e., if <code>d</code> is a <strong>Dictionary&lt;TKey,Â TValue&gt;</strong> and <code>key</code> is a <strong>TKey</strong>, <code>d[key]</code> invokes the indexer with parameter <code>key</code>. In general, either the <strong>get</strong> accessor or the <strong>set</strong> accessor may be omitted, but at least one of them must be included. As in a property definition, the <strong>set</strong> accessor can use the keyword <strong>value</strong> for the value being assigned - in this case, the value to be associated with the given key. The <strong>value</strong> keyword and the return type of the <strong>get</strong> accessor will both be of type <strong>TValue</strong>, the type given prior to the keyword <strong>this</strong> in the above code.</p>
<p>We want to implement the indexer to behave in the same way as the indexer for <strong>System.Collections.Generic.Dictionary&lt;TKey,Â TValue&gt;</strong>. Thus, the <strong>get</strong> accessor is similar to the <strong>TryGetValue</strong> method, as outlined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/simple">&ldquo;A Simple Hash Table Implementation&rdquo;</a>, with a few important differences. First, the <strong>get</strong> accessor has no <strong>out</strong> parameter. Instead, it returns the value that <strong>TryGetValue</strong> assigns to its <strong>out</strong> parameter when the key is found. When the key is not found, because it can&rsquo;t return a <strong>bool</strong> to indicate this, it instead throws a <strong>KeyNotFoundException</strong>.</p>
<p>Likewise, the <strong>set</strong> accessor is similar to the <strong>Add</strong> method, as outlined in 

<a href="https://ksu-cs-textbooks.github.io/cis300/hashing/simple">&ldquo;A Simple Hash Table Implementation&rdquo;</a>. However, whereas the <strong>Add</strong> method has a <strong>TValue</strong> parameter through which to pass the value to be associated with the given key, the <strong>set</strong> accessor gets this value from the <strong>value</strong> keyword. Furthermore, we don&rsquo;t want the <strong>set</strong> accessor to throw an exception if the key is found. Instead, we want it to replace the <strong>Data</strong> of the cell containing this key with a new <strong>KeyValuePair</strong> containing the key with the new value.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The Keywords static and this</h1></div>
<h2 id="the-keywords-static-and-this">The Keywords <strong>static</strong> and <strong>this</strong></h2>
<p>Object-oriented programming languages such as C# are centered on the concept of an object. Class and structure definitions give instructions for constructing individual objects of various types, normally by using the <strong>new</strong> keyword. When an object is constructed, it has its own fields in which values may be stored. Specifically, if type <strong>T</strong> has an <strong>int</strong> field called <code>_length</code>, then each object of type <strong>T</strong> will have have such a field, and each of these fields may store a different <strong>int</strong>. Thus, for example, if <code>x</code> and <code>y</code> are instances of type <strong>T</strong>, then <code>x._length</code> may contain 7, while <code>y._length</code> may contain 12.</p>
<p>Likewise, we can think of each object as having its own methods and properties, as when any of these methods or properties use the fields of the containing class or structure, they will access the fields belonging to a specific object. For example, if type <strong>T</strong> contains an <strong>Add</strong> method that changes the value stored in the <code>_length</code> filed, then a call <strong>x.Add</strong> will potentially change the value stored in <code>x._length</code>.</p>
<p>However, there are times when we want to define a field, method, or property, but we don&rsquo;t want it associated with any specific object. For example, suppose we want to define a unique <strong>long</strong> value for each instance of some class <strong>C</strong>. We can define a <strong>private long</strong> field <code>_id</code> within this class and give it a value within its constructor. But how do we get this value in a way that ensures that it is unique? One way is to define a <strong>private static long</strong> field <code>_nextId</code>, as in the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> _nextId = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">long</span> _id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> C()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _id = _nextId;
</span></span><span style="display:flex;"><span>        _nextId++;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Other members could also be defined.</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>By defining <code>_nextId</code> to be <strong>static</strong>, we are specifying that each instance of <strong>C</strong> will not contain a <code>_nextId</code> field, but instead, there is a single <code>_nextId</code> field belonging to the entire class. As a result, code belonging to any instance of <strong>C</strong> can access this one field. Thus, each time an instance of <strong>C</strong> is constructed, this one field is incremented. This field therefore acts as a counter that keeps track of how many instances of <strong>C</strong> have been constructed. On the other hand, because <code>_id</code> is not <strong>static</strong>, each instance of <strong>C</strong> contains an <code>_id</code> field. Thus, when the assignment,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span>_id = _nextId;
</span></span></code></pre></div><p>is done, the value in the single <code>_nextId</code> field is copied to the value of the <code>_id</code> field belonging to the instance being constructed. Because the single <code>_nextId</code> field is incremented every time a new instance of <strong>C</strong> is constructed, each instance receives a different value for <code>_id</code>.</p>
<p>We can also define <strong>static</strong> methods or properties. For example, the 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.messagebox.show?view=windowsdesktop-6.0#system-windows-messagebox-show%28system-string%29" target="_blank" rel="noopener"><strong>MessageBox.Show(string text)</strong></a> method is <strong>static</strong>. Because it is <strong>static</strong>, we don&rsquo;t need a <strong>MessageBox</strong> object in order to call this method - we simply call something like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span>MessageBox.Show(<span style="color:#e6db74">&#34;Hello world!&#34;</span>);
</span></span></code></pre></div><p><strong>static</strong> methods can also be useful for avoiding <strong>NullReferenceException</strong>s. For example, there are times when we want to determine whether a variable <code>x</code> contains <strong>null</strong>, but <code>x</code> is of an unknown type (perhaps its type is defined by some 

<a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stacks/#generic">type parameter</a> <strong>T</strong>). In such a case, we cannot use == to make the comparison because == is not defined for all types. Furthermore, the following will never work:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (x.Equals(<span style="color:#66d9ef">null</span>))
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Such code will compile, but if <code>x</code> is <strong>null</strong>, then calling its <strong>Equals</strong> method will throw a <strong>NullReferenceException</strong>. In all other cases, the <strong>if</strong>-condition will evaluate to <strong>false</strong>. Fortunately, a 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.equals?view=net-6.0#system-object-equals%28system-object-system-object%29" target="_blank" rel="noopener"><strong>static Equals</strong></a> method is available to handle this situation:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (Equals(x, <span style="color:#66d9ef">null</span>))
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Because this method is defined within the <strong>object</strong> class, which is a supertype of every other type in C#, we can refer to this method without specifying the containing class, just as if we had defined it in the class or structure we are writing. Because this method does not belong to individual objects, we don&rsquo;t need any specific object available in order to call it. It therefore avoids a <strong>NullReferenceException</strong>.</p>
<p>Because a <strong>static</strong> method or property does not belong to any instance of its type, it cannot access any non-<strong>static</strong> members directly, as they all belong to specific instances of the type. If however, the code has access to a specific instance of the type (for example, this instance might be passed as a parameter), the code may reference non-<strong>static</strong> members of that instance. For example, suppose we were to add to the class <strong>C</strong> above a method such as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> DoSomething(C x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Code inside this method would be able to access <code>_nextID</code>, but not <code>_id</code>. Furthermore, it would be able to access any <strong>static</strong> methods or properties contained in the class definition, as well as all constructors, but no non-<strong>static</strong> methods or properties. However, it may access <code>x._id</code>, as well as any other members of <code>x</code>.</p>
<p>Code within a constructor or a non-<strong>static</strong> method or property can also access the object that contains it by using the keyword <strong>this</strong>. Thus, in the constructor code above, we could have written the line</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span>_id = _nextId;
</span></span></code></pre></div><p>as</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">this</span>._id = _nextId;
</span></span></code></pre></div><p>In fact, the way we originally wrote the code is simply an abbreviation of the above line. Another way of thinking of the restrictions on code within a <strong>static</strong> method or property is that this code cannot use <strong>this</strong>, either explicitly or implicitly.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>out and ref Parameters</h1></div>
<h2 id="out-and-ref-parameters"><strong>out</strong> and <strong>ref</strong> Parameters</h2>
<p>Normally, when a method is called, the <em>call-by-value</em> mechanism is used. Suppose, for example, we have a method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> DoSomething(<span style="color:#66d9ef">int</span> k)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We can call this method with a statement like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>DoSomething(n);
</span></span></code></pre></div><p>provided <code>n</code> is an initialized variable consistent with the <strong>int</strong> type. For example, suppose <code>n</code> is an <strong>int</strong> variable containing a value of 28. The call-by-value mechanism works by copying the value of <code>n</code> (i.e., 28) to <code>k</code>. Whatever the <strong>DoSomething</strong> method may do to <code>k</code> has no effect on <code>n</code> &mdash; they are different variables. The same can be said if we had instead passed a variable <code>k</code> &mdash; the <code>k</code> in the calling code is still a different variable from the <code>k</code> in the <strong>DoSomething</strong> method. Finally, if we call <strong>DoSomething</strong> with an expression like <code>9 + n</code>, the mechanism is the same.</p>
<p>If a parameter is of a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value">reference type</a>, the same mechanism is used, but it is worth considering that case separately to see exactly what happens. Suppose, for example, that we have the following method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> DoSomethingElse(<span style="color:#66d9ef">int</span>[] a)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    a[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    a = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span>    a[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Further suppose that we call this method with</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span>[] b = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[<span style="color:#ae81ff">5</span>];
</span></span><span style="display:flex;"><span>DoSomethingElse(b);
</span></span></code></pre></div><p>The initialization of <code>b</code> above assigns to <code>b</code> a reference to an array containing five 0s. The call to <strong>DoSomethingElse</strong> copies the value of <code>b</code> to <code>a</code>. Note, however, that the value of <code>b</code> is a reference; hence, after this value is copied, <code>a</code> and <code>b</code> refer to the same five-element array. Therefore, when <code>a[0]</code> is assigned <code>1</code>, <code>b[0]</code> also becomes <code>1</code>. When <code>a</code> is assigned a new array, however, this does not affect <code>b</code>, as <code>b</code> is a different variable &mdash; <code>b</code> still refers to the same five-element array. Furthermore, when <code>a[1]</code> is assigned a value of 2, because <code>a</code> and <code>b</code> now refer to different arrays, the contents of <code>b</code> are unchanged. Thus, when <strong>DoSomethingElse</strong> completes, <code>b</code> will refer to a five-element array whose element at location 0 is 1, and whose other elements are 0.</p>
<p>While the call-by-value mechanism is used by default, another mechanism, known as the <em>call-by-reference</em> mechanism, can be specified. When call-by-reference is used, the parameter passed in the calling code must be a variable, not a property or expression. Instead of copying the value of this variable into the corresponding parameter within the method, this mechanism causes the variable within the method to be an <em>alias</em> for the variable being passed. In other words, the two variables are simply different names for the same underlying variable (consequently, the types of the two variables must be identical). Thus, whatever changes are made to the parameter within the method are reflected in the variable passed to the method in the calling code as well.</p>
<p>One case in which this mechanism is useful is when we would like to have a method return more than one value. Suppose, for example, that we would like to find both the maximum and minimum values in a given <strong>int[Â ]</strong>. A <strong>return</strong> statement can return only one value. Although there are ways of packaging more than one value together in one object, a cleaner way is to use two parameters that use the call-by-reference mechanism. The method can then change the values of these variables to the maximum and minimum values, and these values would be available to the calling code.</p>
<p>Specifically, we can define the method using <strong>out</strong> parameters:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> MinimumAndMaximum(<span style="color:#66d9ef">int</span>[] array, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">int</span> min, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">int</span> max)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    min = array[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>    max = array[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">1</span>; i &lt; array.Length; i++)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (array[i] &lt; min)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            min = array[i];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (array[i] &gt; max)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            max = array[i];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <strong>out</strong> keyword in the first line above specifies the call-by-reference mechanism for <code>min</code> and <code>max</code>. We could then call this code as follows, assuming <code>a</code> is an <strong>int[Â ]</strong> containing at least one element:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> minimum;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> maximum;
</span></span><span style="display:flex;"><span>MinimumAndMaximum(a, <span style="color:#66d9ef">out</span> minimum, <span style="color:#66d9ef">out</span> maximum);
</span></span></code></pre></div><p>When this code completes, <code>minimum</code> will contain the minimum element in <code>a</code> and <code>maximum</code> will contain the maximum element in <code>a</code>.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>When using <strong>out</strong> parameters, it is important that the keyword
<strong>out</strong> is placed prior to the variable name in both the method call
and the method definition. If you omit this keyword in one of these
places, then the parameter lists won&rsquo;t match, and you&rsquo;ll get a syntax
error to this effect.</p>
    </div>
</div>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>As a shorthand, you can declare an <strong>out</strong> parameter in the parameter
list of the method call. Thus, the above example could be shortened
to the following single line of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>MinimumAndMaximum(a, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">int</span> minimum, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">int</span> maximum);
</span></span></code></pre></div>    </div>
</div>
<p>Note that <strong>out</strong> parameters do not need to be initialized prior to the method call in which they are used. However, they need to be assigned a value within the method to which they are passed. Another way of using the call-by-reference mechanism places a slightly different requirement on where the variables need to be initialized. This other way is to use <strong>ref</strong> parameters. The only difference between <strong>ref</strong> parameters and <strong>out</strong> parameters is that <strong>ref</strong> parameters must be initialized prior to being passed to the method. Thus, we would typically use an <strong>out</strong> parameter when we expect the method to assign it its first value, but we would use a <strong>ref</strong> parameter when we expect the method to change a value that the variable already has (the method may, in fact, use this value prior to changing it).</p>
<p>For example, suppose we want to define a method to swap the contents of two <strong>int</strong> variables. We use <strong>ref</strong> parameters to accomplish this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> Swap(<span style="color:#66d9ef">ref</span> <span style="color:#66d9ef">int</span> i, <span style="color:#66d9ef">ref</span> <span style="color:#66d9ef">int</span> j)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> temp = i;
</span></span><span style="display:flex;"><span>    i = j;
</span></span><span style="display:flex;"><span>    j = temp;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We could then call this method as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> m = <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> n = <span style="color:#ae81ff">12</span>;
</span></span><span style="display:flex;"><span>Swap(<span style="color:#66d9ef">ref</span> m, <span style="color:#66d9ef">ref</span> n);
</span></span></code></pre></div><p>After this code is executed, <code>m</code> will contain 12 and <code>n</code> will contain 10.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The foreach Statement</h1></div>
<h2 id="the-foreach-statement">The <strong>foreach</strong> Statement</h2>
<p>C# provides a <strong>foreach</strong> statement that is often useful for iterating through the elements of certain data structures. A <strong>foreach</strong> can be used when all of the following conditions hold:</p>
<ol>
<li>The data structure is a subtype of either 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-6.0" target="_blank" rel="noopener"><strong>IEnumerable</strong></a> or 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1?view=net-6.0" target="_blank" rel="noopener"><strong>IEnumerable&lt;T&gt;</strong></a> for some type <strong>T</strong>.</li>
<li>You do not need to know the locations in the data structure of the individual elements.</li>
<li>You do not need to modify the data structure with this loop.</li>
</ol>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Many of the data structures provided to you in CIS 300, as well as
many that you are to write yourself for this class, are not subtypes
of either of the types mentioned in 1 above. Consequently, we cannot
use a <strong>foreach</strong> loop to iterate through any of these data
structures. However, most of the data structures provided in the .NET
Framework, as well as all arrays, are subtypes of one of these types.</p>
    </div>
</div>
<p>For example, the <strong>string</strong> class is a subtype of both <strong>IEnumerable</strong>
and <strong>IEnumerable&lt;Char&gt;</strong>. To see that this is the case, look in


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string?view=net-6.0" target="_blank" rel="noopener">the documentation for the <strong>string</strong>
class</a>. In
the &ldquo;Implements&rdquo; section, we see all of the


<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl">interfaces</a> implemented by <strong>string</strong>.
Because <strong>string</strong> implements both of these interfaces, it is a
subtype of each.  We can therefore iterate through the elements (i.e., the characters) of a <strong>string</strong> using a <strong>foreach</strong> statement, provided we don&rsquo;t need to know the location of each character in the <strong>string</strong> (because a <strong>string</strong> is immutable, we can&rsquo;t change its contents).</p>
<p>Suppose, for example, that we want to find out how many times the letter &lsquo;i&rsquo; occurs in a <strong>string</strong> <code>s</code>. Because we don&rsquo;t need to know the locations of these occurrences, we can iterate through the characters with a <strong>foreach</strong> loop, as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> count = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">char</span> c <span style="color:#66d9ef">in</span> s)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (c == <span style="color:#e6db74">&#39;i&#39;</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        count++;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <strong>foreach</strong> statement requires three pieces of information:</p>
<ul>
<li>The type of the elements in the data structure (<strong>char</strong> in the above example).</li>
<li>The name of a new variable (<code>c</code> in the above example). The type of this variable will be the type of the elements in the data structure (i.e., <strong>char</strong> in the above example). It will take on the values of the elements as the loop iterates.</li>
<li>Following the keyword <strong>in</strong>, the data structure being traversed (<code>s</code> in the above example).</li>
</ul>
<p>The loop then iterates once for each element in the data structure (unless a statement like <strong>return</strong> or <strong>break</strong> causes it to terminate prematurely). On each iteration, the variable defined in the <strong>foreach</strong> statement stores one of the elements in the data structure. Thus, in the above example, <code>c</code> takes the value of a different character in <code>s</code> on each iteration. Note, however, that we have no access to the location containing <code>c</code> on any particular iteration - this is why we don&rsquo;t use a <strong>foreach</strong> loop when we need to know the locations of the elements. Because <code>c</code> takes on the value of each character in <code>s</code>, we are able to count how many of them equal &lsquo;i&rsquo;.</p>
<p>Occasionally, it may not be obvious what type to use for the
<strong>foreach</strong> loop variable. In such cases, if the data structure is a
subtype of <strong>IEnumerable&lt;T&gt;</strong>, then the type should be whatever type
is used for <strong>T</strong>. Otherwise, it is safe to use <strong>object</strong>. Note,
however, that if the data structure is not a subtype of
<strong>IEnumerable&lt;T&gt;</strong>, but you know that the elements are some specific
subtype of <strong>object</strong>, you can use that type for the loop variable -
the type will not be checked until the code is executed. For example,


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.listbox?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>ListBox</strong></a>
is a class that implements a GUI control displaying a list of
elements. The elements in the <strong>ListBox</strong> are accessed via its


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.listbox.items?view=windowsdesktop-6.0#system-windows-forms-listbox-items" target="_blank" rel="noopener"><strong>Items</strong></a>
property, which gets a data structure of type


<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.listbox.objectcollection?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>ListBox.ObjectCollection</strong></a>. Any
<strong>object</strong> can be added to this data structure, but we often just add <strong>string</strong>s. <strong>ListBox.ObjectCollection</strong> is a subtype of <strong>IEnumerable</strong>; however, it is permissible to set up a <strong>foreach</strong> loop as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">string</span> s <span style="color:#66d9ef">in</span> uxList.Items)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>where <code>uxList</code> is a <strong>ListBox</strong> variable. As long as all of the elements in <strong>uxList.Items</strong> are <strong>string</strong>s, no exception will be thrown.</p>
<p>While the <strong>foreach</strong> statement provides a clean way to iterate through a data structure, it is important to keep in mind its limitations. First, it can&rsquo;t even be used on data structures that aren&rsquo;t subtypes of <strong>IEnumerable</strong> or <strong>IEnumerable&lt;T&gt;</strong>. Second, there are many cases, especially when iterating through arrays, where the processing we need to do on the elements depends on the locations of the elements. For example, consider the problem of determining whether two arrays contain the same elements in the same order. For each element of one array, we need to know if the element <em>at the same location</em> in the other array is the same. Because the locations are important, a <strong>foreach</strong> loop isn&rsquo;t appropriate - we should use a <strong>for</strong> loop instead. Finally, a <strong>foreach</strong> should never be used to modify a data structure, as this causes unpredictable results.</p>
<p>Even when a <strong>foreach</strong> would work, it is not always the best choice. For example, in order to determine whether a data structure contains a given element, we could iterate through the structure with a <strong>foreach</strong> loop and compare each element to the given element. While this would work, most data structures provide methods for determining whether they contain a given element. These methods are often far more efficient than using a <strong>foreach</strong> loop.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Enumerators</h1></div>
<h2 id="enumerators">Enumerators</h2>
<p>As we saw in 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/foreach">the previous section</a>, in order for a data structure to support a <strong>foreach</strong> loop, it must be a subtype of either 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-6.0" target="_blank" rel="noopener"><strong>IEnumerable</strong></a> or 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1?view=net-6.0" target="_blank" rel="noopener"><strong>IEnumerable&lt;T&gt;</strong></a>, where <strong>T</strong> is the type of the elements in the data structure. Thus, because 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=net-6.0" target="_blank" rel="noopener"><strong>Dictionary&lt;TKey, TValue&gt;</strong></a> is a subtype of <strong>IEnumerable&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;</strong>, we can use a <strong>foreach</strong> loop to iterate through the key-value pairs that it stores. Likewise, because its 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.keys?view=net-6.0#system-collections-generic-dictionary-2-keys" target="_blank" rel="noopener"><strong>Keys</strong></a> and 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.values?view=net-6.0#system-collections-generic-dictionary-2-values" target="_blank" rel="noopener"><strong>Values</strong></a> properties get objects that are subtypes of <strong>IEnumerable&lt;TKey&gt;</strong> and <strong>IEnumerable&lt;TValue&gt;</strong>, respectively, <strong>foreach</strong> loops may be used to iterate through these objects as well, in order to process all the keys or all the values stored in the dictionary. <strong>IEnumerable</strong> and <strong>IEnumerable&lt;T&gt;</strong> are 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl">interfaces</a>; hence, we must define any subtypes so that they implement these interfaces. In this section, we will show how to implement the <strong>IEnumerable&lt;T&gt;</strong> interface to support a <strong>foreach</strong> loop.</p>
<p>The <strong>IEnumerable&lt;T&gt;</strong> interface requires two methods:</p>
<ul>
<li><strong>public IEnumerator&lt;T&gt; GetEnumerator()</strong></li>
<li><strong>IEnumerator IEnumerable.GetEnumerator()</strong></li>
</ul>
<p>The latter method is required only because <strong>IEnumerable&lt;T&gt;</strong> is a subtype of <strong>IEnumerable</strong>, and that interface requires a <strong>GetEnumerator</strong> method that returns a non-generic <strong>IEnumerator</strong>. Both of these methods should return the same object; hence, because <strong>IEnumerator&lt;T&gt;</strong> is also a subtype of <strong>IEnumerator</strong>, this method can simply call the first method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>IEnumerator IEnumerable.GetEnumerator()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> GetEnumerator();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <strong>public GetEnumerator</strong> method returns an <strong>IEnumerator&lt;T&gt;</strong>. In order to get instances of this interface, we could define a class that implements it; however, C# provides a simpler way to define a subtype of this interface, or, when needed, the <strong>IEnumerable&lt;T&gt;</strong> interface.</p>
<p>Defining such an enumerator is as simple as writing code to iterate through the elements of the data structure. As each element is reached, it is enumerated via a <strong>yield return</strong> statement. For example, suppose a dictionary implementation uses a <strong>List&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;</strong> called <code>_elements</code> to store its key-value pairs. We can then define its <strong>GetEnumerator</strong> method as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> IEnumerator&lt;KeyValuePair&lt;TKey, TValue&gt;&gt; GetEnumerator()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span> (KeyValuePair&lt;TKey, TValue&gt; p <span style="color:#66d9ef">in</span> _elements)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> p;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Suppose user code contains a <strong>Dictionary&lt;string, int&gt;</strong> called <code>d</code> and a <strong>foreach</strong> loop structured as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span> (KeyValuePair&lt;<span style="color:#66d9ef">string</span>, <span style="color:#66d9ef">int</span>&gt; x <span style="color:#66d9ef">in</span> d)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then the <strong>GetEnumerator</strong> method is executed until the <strong>yield return</strong> is reached. The state of this method is then saved, and the value <code>p</code> is used as the value for <code>x</code> in the first iteration of the <strong>foreach</strong> in the user code. When this loop reaches its second iteration, the <strong>GetEnumerator</strong> method resumes its execution until it reaches the <strong>yield return</strong> a second time, and again, the current value of <code>p</code> is used as the value of <code>x</code> in the second iteration of the loop in user code. This continues until the <strong>GetEnumerator</strong> method finishes; at this point, the loop in user code terminates.</p>
<p>Before continuing, we should mention that there is a simpler way of implementing the <strong>public GetEnumerator</strong> method in the above example. Because <strong>List&lt;T&gt;</strong> implements <strong>IEnumerable&lt;T&gt;</strong>, we can simply use its enumerator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> IEnumerator&gt; GetEnumerator()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> _elements.GetEnumerator();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>However, the first solution illustrates a more general technique that can be used when we don&rsquo;t have the desired enumerator already available. For instance, continuing the above example, suppose we wish to define a <strong>Keys</strong> property to get an <strong>IEnumerable&lt;TKey&gt;</strong> that iterates through the keys in the dictionary. Because the dictionary now supports a <strong>foreach</strong> loop, we can define this code to iterate through the key-value pairs in the dictionary, rather than the key-value pairs stored in the <strong>List&lt;KeyVauePair&lt;TKey, TValue&gt;&gt;</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> IEnumerable&lt;TKey&gt; Keys
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (KeyValuePair&lt;TKey, TValue&gt; p <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">this</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> p.Key;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The above code is more maintainable than iterating through the <strong>List&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;</strong> as it doesn&rsquo;t depend on the specific implementation of the dictionary.</p>
<p>While this technique usually works best with iterative code, it can also be used with recursion, although the translation usually ends up being less direct and less efficient. Suppose, for example, our dictionary were implemented as in 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst">&ldquo;Binary Search Trees&rdquo;</a>, where a binary search tree is used. The idea is to adapt the 

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/inorder">inorder traversal</a> algorithm. However, we can&rsquo;t use this directly to implement a recursive version of the <strong>GetEnumerator</strong> method because this method does not take any parameters; hence, we can&rsquo;t apply it to arbitrary subtrees. Instead, we need a separate recursive method that takes a <strong>BinaryTreeNode&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;</strong> as its parameter and returns the enumerator we need. Another problem, though, is that the recursive calls will no longer do the processing that needs to be done on the children - they will simply return enumerators. We therefore need to iterate through each of these enumerators to include their elements in the enumerator we are returning:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;
</span></span><span style="display:flex;"><span>    GetEnumerable(BinaryTreeNode&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;? t)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (t != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (KeyValuePair&lt;TKey, TValue&gt; p <span style="color:#66d9ef">in</span> GetEnumerable(t.LeftChild))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> p;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> t.Data;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (KeyValuePair&lt;TKey, TValue&gt; p <span style="color:#66d9ef">in</span> GetEnumerable(t.RightChild))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> p;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Note that we&rsquo;ve made the return type of this method <strong>IEnumerable&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;</strong> because we need to use a <strong>foreach</strong> loop on the result of the recursive calls. Then because any instance of this type must have a <strong>GetEnumerator</strong> method, we can implement the <strong>GetEnumerator</strong> method for the dictionary as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> IEnumerator&lt;KeyValuePair&lt;TKey, TValue&gt;&gt; GetEnumerator()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> GetEnumerable(_elements).GetEnumerator();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In transforming the inorder traversal into the above code, we have introduced some extra loops. These loops lead to less efficient code. Specifically, if the binary search tree is an AVL tree or other balanced binary tree, the time to iterate through this enumerator is in <span style="white-space:nowrap">
<span class="math align-center">$ O(n \lg n) $</span>,</span> where 
<span class="math align-center">$ n $</span> is the number of nodes in the tree. The inorder traversal, by contrast, runs in 
<span class="math align-center">$ O(n) $</span> time. In order to achieve this running time with an enumerator, we need to translate the inorder traversal to iterative code using a stack. However, this code isn&rsquo;t easy to understand:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> IEnumerator&lt;KeyValuePair&lt;TKey, TValue&gt;&gt; GetEnumerator()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Stack&lt;BinaryTreeNode&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;&gt; s = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span>    BinaryTreeNode&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;? t = _elements;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (t != <span style="color:#66d9ef">null</span> || s.Count &gt; <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (t != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            s.Push(t);
</span></span><span style="display:flex;"><span>            t = t.LeftChild;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        t = s.Pop();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> t.Data;
</span></span><span style="display:flex;"><span>        t = t.RightChild;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The switch Statement</h1></div>
<h2 id="the-switch-statement">The <strong>switch</strong> Statement</h2>
<p>The <strong>switch</strong> statement provides an alternative to the <strong>if</strong> statement for certain contexts. It is used when different cases must be handled based on the value of an expression that can have only a few possible results.</p>
<p>For example, suppose we want to display a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/message-boxes"><strong>MessageBox</strong></a> containing &ldquo;Abort&rdquo;, &ldquo;Retry&rdquo;, and &ldquo;Ignore&rdquo; buttons. The user can respond in only three ways, and we need different code in each case. Assuming <code>message</code> and <code>caption</code> are <strong>string</strong>s, we can use the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> (MessageBox.Show(message, caption, MessageBoxButtons.AbortRetryIgnore))
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> DialogResult.Abort:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code for the &#34;Abort&#34; button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> DialogResult.Retry:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code for the &#34;Retry&#34; button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> DialogResult.Ignore:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code for the &#34;Ignore&#34; button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The expression to determine the case (in this example, the call to <strong>MessageBox.Show</strong>) is placed within the parentheses following the keyword <strong>switch</strong>. Because the value returned by this method is of the 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerations">enumeration</a> type 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.dialogresult?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>DialogResult</strong></a>, it will be one of a small set of values; in fact, given the buttons placed on the <strong>MessageBox</strong>, this value must be one of three possibilities. These three possible results are listed in three <em>case labels</em>. Each of these case labels must begin with the keyword <strong>case</strong>, followed by a constant expression (i.e., one that can be fully evaluated by the compiler, as explained in the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/const">&ldquo;Constant Fields&rdquo;</a>), followed by a colon (<code>:</code>). When the expression in the <strong>switch</strong> statement is evaluated, control jumps to the code following the case label containing the resulting value. For example, if the result of the call to <strong>MessageBox.Show</strong> is <strong>DialogResult.Retry</strong>, control jumps to the code following the second case label. If there is no case label containing the value of the expression, control jumps to the code following the <strong>switch</strong> statement. The code following each case label must be terminated by a statement like <strong>break</strong> or <strong>return</strong>, which causes control to jump elsewhere. (This arcane syntax is a holdover from C, except that C allows control to continue into the next case.) A <strong>break</strong> statement within a <strong>switch</strong> statement causes control to jump to the code following the <strong>switch</strong> statement.</p>
<p>The last case in a <strong>switch</strong> statement may optionally have the case label:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">default</span>:
</span></span></code></pre></div><p>This case label is analogous to an <strong>else</strong> on an <strong>if</strong> statement in that if the value of the <strong>switch</strong> expression is not found, control will jump to the code following the <strong>default</strong> case label. While this case is not required in a <strong>switch</strong> statement, there are many instances when it is useful to include one, even if you can explicitly enumerate all of the cases you expect. For example, if each case ends by returning a value, but no <strong>default</strong> case is included, the compiler will detect that not all paths return a value, as any case that is not enumerated will cause control to jump past the entire <strong>switch</strong> statement. There are various ways of avoid this problem:</p>
<ul>
<li>Make the last case you are handling the <strong>default</strong> case.</li>
<li>Add a <strong>default</strong> case that explicitly throws an exception to handle any cases that you don&rsquo;t expect.</li>
<li>Add either a <strong>return</strong> or a <strong>throw</strong> following the <strong>switch</strong> statement (the first two options are preferable to this one).</li>
</ul>
<p>It is legal to have more than one case label on the same code block. For example, if <code>i</code> is an <strong>int</strong> variable, we can use the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> (i)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code for i = 1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">5</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">7</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code for i = 2, 3, 5, or 7</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">4</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">6</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">8</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code for i = 4, 6, or 8</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Code for all other values of i</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If the value of the <strong>switch</strong> expression matches any one of the case labels on a block, control jumps to that block. The same case label may not appear more than once.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The Remainder Operator</h1></div>
<h2 id="the-remainder-operator">The Remainder Operator</h2>
<p>The remainder operator <code>%</code> computes the remainder that results when one number is divided by another. Specifically, suppose <tt>m</tt> and <tt>n</tt> are of some numeric type, where <tt>nÂ â Â 0</tt>. We can then define a <em>quotient</em> <tt>q</tt> and a <em>remainder</em> <tt>r</tt> as the unique values such that:</p>
<ul>
<li><tt>qnÂ +Â rÂ =Â m</tt>;</li>
<li><tt>q</tt> is an integer;</li>
<li><tt>|qn|Â â¤Â |m|</tt>; and</li>
<li><tt>|r|Â &lt;Â |n|</tt>.</li>
</ul>
<p>Then <tt>mÂ %Â n</tt> gives <tt>r</tt>, and we can compute <tt>q</tt> by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>(m - r) / n
</span></span></code></pre></div><p>Another way to think about <tt>mÂ %Â n</tt> is through the following algorithm to compute it:</p>
<ol>
<li>Compute <tt>|m|Â /Â |n|</tt>, and remove any fractional part.</li>
<li>If <tt>m</tt> and <tt>n</tt> have the same sign, let <tt>q</tt> be the above result; otherwise, let <tt>q</tt> be the negative of the above result.</li>
<li><tt>mÂ %Â n</tt> is <tt>mÂ -Â qn</tt>.</li>
</ol>
<p>Examples:</p>
<ul>
<li><tt>7Â %Â 3Â =Â 1</tt></li>
<li><tt>-9Â %Â 5Â =Â -4</tt></li>
<li><tt>8Â %Â -3Â =Â 2</tt></li>
<li><tt>-10Â %Â -4Â =Â -2</tt></li>
<li><tt>6.4Â %Â 1.3Â =Â 1.2</tt></li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Visual Studio</h1></div>
<h2 id="visual-studio">Visual Studio</h2>
<p>This chapter will guide you through the use of Visual Studio 2022 and
GitHub to obtain start code for your assignments, build, test, and debug
graphical applications and class libraries, and submit assignment
solutions. No attempt is meant to be exhaustive, as many of the features
of Visual Studio are beyond the scope of CIS 300.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>This guide is based on Visual Studio Community 2022, version 17.6.1, released May 22, 2023. The user interface may have some differences in other versions.</p>
    </div>
</div>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>Installing Visual Studio</h1></div>
<h2 id="installing-visual-studio">Installing Visual Studio</h2>
<p>Visual Studio Community 2022 is available on the machines we use
for CIS 300 labs, as well as on machines in other lab classrooms. Students can also access Visual Studio via a remote desktop server &mdash; see 

<a href="https://support.cs.ksu.edu/CISDocs/wiki/Remote_Access#Remote_Windows_Access" target="_blank" rel="noopener">the CS Department Support
Wiki</a>
for details. This edition of Visual Studio is also freely available for installation on your own PC for your personal and classroom use. This section provides instructions for obtaining this software
from Microsoft and installing
it on your PC.</p>
<p>While Microsoft also produces a version of Visual Studio for Mac, we recommend the Windows version. If you don&rsquo;t have a Microsoft operating system, you can
obtain one for free from the Azure Portal &mdash; see 

<a href="https://support.cs.ksu.edu/CISDocs/wiki/FAQ#I_need_some_software_by_Microsoft_for_a_project.2C_can_you_give_it_to_me.3F" target="_blank" rel="noopener">the CS Department Support Wiki</a> for details. You will need to install
the operating system either on a separate bootable partition or using
an emulator such as VMware Fusion. VMware Fusion is also available for
free through the VMware Academic Program &mdash; see 

<a href="https://support.cs.ksu.edu/CISDocs/wiki/FAQ#VMWare" target="_blank" rel="noopener">the CS Department
Support Wiki</a> for
details.</p>
<p>To download Visual Studio Community 2022, go to 

<a href="https://visualstudio.microsoft.com/" target="_blank" rel="noopener">Microsoft&rsquo;s Visual Studio Site</a>, and from the &ldquo;Download Visual Studio&rdquo; dropdown, select &ldquo;Community 2022&rdquo;. This should normally begin downloading an installation file; if not, click the &ldquo;click here to retry&rdquo; link near the top of the page. When the download has completed, run the
file you downloaded. This will start the installation process.</p>
<p>As the installation is beginning, you will be shown a window
asking for the components to be installed. Click the &ldquo;Workloads&rdquo; tab
in this window, and select &ldquo;.NET desktop development&rdquo; (under &ldquo;Desktop
&amp; Mobile&rdquo;). You can select other workloads or components if you wish,
but this workload will install all you need for CIS 300.</p>
<p>The first time you run Visual Studio, you will be asked to sign in to
your Microsoft account. You can either do this or skip it by clicking,
&ldquo;Not now, maybe later.&rdquo; You will
then be shown a window resembling the following:</p>
<p><img src="VisualStudioSetup.png" alt="A picture of a configuration window should appear
here" style="zoom:67%;" /></p>
<p>Next to &ldquo;Development Settings:&rdquo;, select &ldquo;Visual C#&rdquo;. You can select
whichever color scheme you prefer. At this point, Visual Studio should be fully installed and ready to
use.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Git Repositories</h1></div>
<h2 id="git-repositories">Git Repositories</h2>
<p>In CIS 300, start code for each assignment will be distributed via a <em>Git repository</em>. Git is a <em>source control</em> system integrated into Visual Studio 2022. Source control systems are powerful mechanisms for teams of programmers and other collaborators to manage multiple copies of various source files and other documents that all collaborators may be modifying. While CIS 300 does not involve teamwork, source control provides a convenient mechanism for distribution of code and submission of assignment solutions. In addition, as we will discuss later, source control provides mechanisms for 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/multiple/">accessing your code on multiple machines</a> and for 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/checkpointing/">&ldquo;checkpointing&rdquo; your code</a>.</p>
<p>At the heart of Git is the concept of a Git repository. A Git
repository is essentially a folder on your local machine. As you make
changes within this folder, Git tracks these changes. From time to
time, you will <em>commit</em> these changes. If you see that you have gone
down a wrong path, you can revert to an earlier commit. Git
repositories may be hosted on a server such as GitHub. Various users
may have copies of a Git repository on their own local machines. Git
provides tools for synchronizing local repositories with the
repository hosted on the server in a consistent way.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>The above description is a bit of an oversimplification, as the folder
comprising a local copy of a repository typically contains some files
and/or folders that are not part of the repository. One example of
such &ldquo;extra&rdquo; files might be
executables that are generated whenever source code within the
repository is compiled. However, when Visual Studio is managing a Git
repository, it does a good job of including within the repository any
files the user
places within the folder comprising the repository.</p>
    </div>
</div>
<p>For each lab and homework assignment in CIS 300, you will be provided a URL that will create your own private Git repository on GitHub. The only people who will have access to your GitHub repositories are you, the CIS 300 instructors, and the CIS 300 lab assistants. These repositories will initially contain start code and perhaps data files for the respective assignments. You will copy the repository to your local machine by cloning it. When you are finished with the assignment, you will push the repository back to GitHub and submit its URL for grading. In what follows, we will explain how to create and clone a GitHub repository. Later in this chapter, we will explain how to commit changes, push a repository, and use some of the other features of Git.</p>
<p>Before you can access GitHub, you will need a GitHub account. If you don&rsquo;t already have one, you can sign up for one at 

<a href="https://github.com" target="_blank" rel="noopener">github.com</a>. At some point after you have completed the sign-up process, GitHub will send you an email asking you to verify the email address you provided during the sign-up process. After you have done this, you will be able to set up GitHub repositories.</p>
<p>For each assignment in CIS 300, you will be given an invitation URL, such as:</p>
<ul>
<li><a href="https://classroom.github.com/a/nI3CHScF" target="_blank"> <code>https://classroom.github.com/a/nI3CHScF</code></a></li>
</ul>
<p>Over the next few sections, we will be working through a simple example based on the above invitation link. If you wish to work through this example, click on the above link. You may be asked to sign in to GitHub, but once you are signed in, you will be shown a page asking you to accept the assignment. Clicking the &ldquo;Accept this assignment&rdquo; button will create a GitHub repository for you. You will be given a link that will take you to that repository. From that page you will be able to view all of the files in the repository.</p>
<p>In order to be able to use this repository, you will need to clone it
to your local machine. To do this, first open Visual Studio 2022, and
click on the &ldquo;Clone a Repository&rdquo; button on the right.  In your web
browser, navigate to the GitHub repository that you wish to clone, and
click on the &ldquo;Code&rdquo; button. This will display a URL - click on the
button to its right to copy this URL to your clipboard. Then go back
to Visual Studio and paste this URL into the text
box labeled, &ldquo;Repository location&rdquo;. In the text box below that, fill
in a new folder you want to use for this repository on your machine,
then click the &ldquo;Clone&rdquo; button (if you are asked to sign in to GitHub, click the link to sign in through your web browser). This will copy the Git repository from
GitHub into the folder you selected, and open the solution it contains.</p>
<p>The following sections give an overview of how to use Visual Studio to edit and debug an application, as well as how to use Git within Visual Studio to maintain the local Git repository and synchronize it with the GitHub repository.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Visual Studio Solutions</h1></div>
<h2 id="visual-studio-solutions">Visual Studio Solutions</h2>
<p>All code developed within Visual Studio 2022 must belong to one or more <em>solutions</em>. When you are using Visual Studio to develop a program, you will be working with a single solution. A solution will contain one or more <em>projects</em>. Each of these projects may belong to more than one solution. Each project typically contains several files, including source code files. Each file will typically belong to only one project. The following figure illustrates some of the possible relationships between solutions, projects, and files.</p>
<p><img src="solutions.jpg" alt="Relationships between solutions, projects, and files"></p>
<p>Note that in the above figure, Project4 is contained in both Solution2 and Solution3. In this section, we will focus on solutions that contain exactly one project, which in turn belongs to no other solutions (e.g., Solution1 in the above figure).</p>
<p>Whenever you open a solution in Studio 2022, the Solution Explorer
(which you can always find on the &ldquo;View&rdquo; menu) will give you a view of
the structure of your solution; for example, opening the solution in
the repository given in 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/repos/">the previous section</a> may result in the
following being shown in the Solution Explorer:</p>
<img src="initial-solution-explorer.jpg" alt="A picture of a Solution Explorer should appear here" style="zoom:67%;" />
<p>If you see the above, you will need to change to the Solution view, which you can get by double clicking the line that ends in &ldquo;.sln&rdquo;. This will give you the following view:</p>
<p><img src="solution-explorer1.png" alt="A picture of a Solution Explorer should appear
here" style="zoom:67%;" /></p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>You ordinarily will not want to use Folder view, as this will cause files to be edited without any syntax or consistency checking. As a result, you can end up with a solution that is unusable. If your Solution Explorer ever looks like this:</p>
<img src="folder-view1.png" alt="A picture of a Solution Explorer in folder view should appear here" style="zoom:60%;" />
<p>(note the indication &ldquo;Folder View&rdquo; at the top and the absence of any boldface line), then it is in Folder view. To return to Solution view, click the icon indicated by the arrow in the above figure. This will return the Solution Explorer to the initial view shown above, where you can double-click the solution to select Solution view.</p>
    </div>
</div>
<p>If you click on the small triangle to the left of
&ldquo;Ksu.Cis300.HelloWorld&rdquo;, you will get a more-detailed view:</p>
<img src="solution-explorer2.png" alt="A picture of a Solution Explorer should appear here" style="zoom:67%;" />
<p>Near the top, just under the search box, is the name of the solution with an indication of how many projects it contains. Listed under the name of the solution is each project, together with the various components of the project. One of the projects is always shown in bold face. The bold face indicates that this project is the startup project; i.e., it is the project that the debugger will attempt to execute whenever it is invoked (for more details, see the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/debugger">&ldquo;The Debugger&rdquo;</a>).</p>
<p>The project components having a suffix of &ldquo;.cs&rdquo; are C# source code files. When a Windows Forms App is created, its project will contain the following three source code files:</p>
<ul>
<li>
<p><strong>Form1.cs:</strong> This file contains code that you will write in order to implement the main GUI for the application. It will be discussed in more detail in 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/code-window">&ldquo;The Code Window&rdquo;</a>.</p>
</li>
<li>
<p><strong>Form1.Designer.cs:</strong> You will need to click the triangle to the
left of &ldquo;Form1.cs&rdquo; in the Solution Explorer in order to reveal this
file name. This contains automatically-generated code that completes
the definition of the main GUI. You will build this code indirectly
by laying out the graphical components of the GUI in the design window (see the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/design-window">&ldquo;The Design Window&rdquo;</a> for more details). Ordinarily, you will not need to look at the contents of this file.</p>
</li>
<li>
<p><strong>Program.cs:</strong> This file will contain something like the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Ksu.Cis300.HelloWorld
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Program</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">///  The main entry point for the application.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">        [STAThread]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> Main()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// To customize application configuration such as set high DPI settings or default font,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// see https://aka.ms/applicationconfiguration.</span>
</span></span><span style="display:flex;"><span>            ApplicationConfiguration.Initialize();
</span></span><span style="display:flex;"><span>            Application.Run(<span style="color:#66d9ef">new</span> Form1());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <strong>Main</strong> method is where the application code begins. The last line of this method constructs a new instance of the class that implements the GUI. The call to 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.application.run?view=windowsdesktop-6.0" target="_blank" rel="noopener"><strong>Application.Run</strong></a> displays the GUI and starts a loop that processes events such as mouse clicks and keystrokes. Ordinarily, there is no need to look at this code.</p>
</li>
</ul>
<p>One of the first things you will need to do when starting a new Windows Forms App is to change the name of Form1.cs, as this name (without the &ldquo;.cs&rdquo; suffix) is also the name of the class implementing the GUI. Therefore, it will need to be changed in order to conform to the 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/naming">naming convention</a> for classes. To do this, right-click on its name in the Solution Explorer, and select &ldquo;Rename&rdquo; from the resulting popup menu. You will then be able to edit the name in the Solution Explorer - change it to &ldquo;UserInterface.cs&rdquo;. When you have entered the new name, the following window will be displayed:</p>
<img src="rename-prompt.jpg" alt="The prompt to rename all occurrences of a file name." style="zoom:67%;" />
<p>You should click the &ldquo;Yes&rdquo; button in order to make the renaming consistent - particularly to rename the class as well.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The Design Window</h1></div>
<h2 id="the-design-window">The Design Window</h2>
<p>The Design Window in Visual Studio is a window used to build graphical components. To open the Design Window for a graphical component, double-click on the component&rsquo;s file name in the Solution Explorer. If you are working through the example from the previous two sections, double-click &ldquo;UserInterface.cs&rdquo; to open its Design Window. It will initially contain a blank form:</p>
<img src="blank-form.png" alt="A picture of a portion of the design window should appear here." style="zoom:67%;" />
<p>You can resize the form by dragging the handles on the right and
bottom edges. You can also change the title of the form (&ldquo;Form1&rdquo; in the picture above) as follows:</p>
<ol>
<li>
<p>Click on the form.</p>
</li>
<li>
<p>If the Properties window isn&rsquo;t showing on the right, select &ldquo;Properties Window&rdquo; from the &ldquo;View&rdquo; menu.</p>
</li>
<li>
<p>Look at the row of buttons near the top of the properties window,
and make sure the second and third buttons are highlighted:</p>
<img src="properties.jpg" alt="A picture of a portion of a Properties window should appear here." />
<p>If either of these buttons isn&rsquo;t highlighted, click it to
highlight it. The first two buttons on this row toggle whether the
information is arranged by category (the first button) or
alphabetically (the second button). The next two buttons toggle
whether the control&rsquo;s properties (the third button) or events (the
fourth button &mdash; we&rsquo;ll discuss these below) are shown.</p>
</li>
<li>
<p>Find &ldquo;Text&rdquo; in the left column of the Properties window - it will
probably be highlighted. Click on the space to its right, and edit
the text to give your desired title. If you are working through
the example, give it a title of &ldquo;Hello&rdquo;.</p>
</li>
</ol>
<p>For example, after resizing and changing the title, we might have a form that looks like this:</p>
<img src="hello-start.png" alt="A picture of a portion of the design window should appear here." style="zoom:67%;" />
<p>To add various graphical controls to the form, we use the Toolbox, which is normally available via a tab on the left edge (if not, you can always access it via the &ldquo;View&rdquo; menu). For example, let&rsquo;s add a box that will contain text generated by the program. We open the Toolbox and click on the <strong>TextBox</strong> control, which can be found in the &ldquo;Common Controls&rdquo; section. We can then click on the design window (outside of the form) to bring it to the front, and drag an area on the form that we would like the <strong>TextBox</strong> to fill. After doing so, there will be a handle on the right and left edges to allow horizontal resizing (don&rsquo;t worry about vertical resizing yet). You can also drag the <strong>TextBox</strong> to adjust its location. If you do this, as the edges of the <strong>TextBox</strong> approach the edges of the frame, struts will appear, helping you to leave an appropriate margin.</p>
<p>After adding a control, we usually need to customize it to some degree. To do this, click on it, then open the Properties window again. This window will now display the properties of the <strong>TextBox</strong>. The first property we will always want to change is the name of the variable that the program will use to refer to this control. This property is called &ldquo;(Name)&rdquo;, and will be near the top. You will need to change this name so that it follows the 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/naming">naming convention</a> for controls on forms.</p>
<p>There are various properties that can be changed to customize the
appearance and behavior of a control. For example, we can change the
font of a <strong>TextBox</strong> by changing its <strong>Font</strong> property. This in turn
will affect the height of the <strong>TextBox</strong>. We can prevent the user
from editing it by setting its <strong>ReadOnly</strong> property to <strong>True</strong>. If
we want to allow multiple lines, we can set its <strong>Multiline</strong> property
to <strong>True</strong>. This in turn will add handles to the top and bottom edges
so that we can adjust its height. All of the properties of a GUI
control are documented in that control&rsquo;s API documentation within the


<a href="https://learn.microsoft.com/en-us/dotnet/api/?view=windowsdesktop-6.0" target="_blank" rel="noopener">.NET API browser</a>.</p>
<p>Thus, continuing the above example, if we modify the <strong>TextBox</strong>&rsquo;s variable name to <code>uxDisplay</code>, its <strong>Font</strong> property to <strong>Microsoft Sans Serif, 12pt</strong> and its <strong>ReadOnly</strong> property to <strong>True</strong>, we would have the following form:</p>
<img src="hello-textbox.png" alt="A picture of a portion of the design window should appear here." style="zoom:67%;" />
<p>Using a similar process, we can now add a <strong>Button</strong> to the form and name it <code>uxGo</code>. To change the text in the <strong>Button</strong>, we will need to change its <strong>Text</strong> property. This might give us the following:</p>
<img src="hello-button.png" alt="A picture of a portion of the design window should appear here." style="zoom:67%;" />
<p>Now that we have a <strong>Button</strong> on our form, it would be appropriate to provide some functionality for that <strong>Button</strong>. Clicking on a <strong>Button</strong> signals an <em>event</em> to which our program may respond. In order to cause our program to respond to such an event, we need to provide an <em>event handler</em> for it. Because a click is the default event for a <strong>Button</strong>, we can create an event handler for this event by simply double-clicking on the <strong>Button</strong>. Doing so will open a <em>code window</em> containing the contents of the source code file defining the current form. Furthermore, if the name of the <strong>Button</strong> is <code>uxGo</code>, the following method will have been added:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> uxGo_Click(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This method will be called whenever the <strong>Button</strong> is clicked (code causing this behavior will have been automatically added to the file containing the automatically-generated code for the form). Thus, to provide the appropriate functionality for the <strong>Button</strong> we just need to add code providing this functionality to this method. We will discuss this in more detail in 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/code-window">the next section</a>.</p>
<p>Before we leave the design window entirely, however, we need to talk about a more general way of accessing the event handlers associated with controls. Going back to the Properties window for a control, clicking the fourth button in the row of buttons near the top (the one that looks like a lightning bolt) will cause all of the possible events for that control to be displayed, and any event handler that has been created for that event. For example, if we have created the event handler described above, then the list of events for the <strong>Button</strong> looks like this:</p>
<p><img src="event-list.jpg" alt="A picture of a portion of a Properties window should appear here."></p>
<p>This list is useful for two reasons. The more obvious reason is that we sometimes might want to handle an event that is not the default event for a control. For example, we might want a <strong>Button</strong> to react in some way (perhaps by changing color, for example) whenever the mouse enters or leaves it. In order to implement this functionality, we would need event handlers for the <strong>MouseEnter</strong> and <strong>MouseLeave</strong> events. We can add these event handlers by double-clicking these events in this list.</p>
<p>The less obvious use for this list is to remove an event handler. Often we find that we have added an event handler that we don&rsquo;t need, perhaps by double-clicking in the wrong place. When this happens, shouldn&rsquo;t just delete the code, because there is other automatically-generated code that refers to it. Deleting the code for an event handler would therefore lead to a syntax error. Instead, the proper way to remove an event handler is to go to the list of events, right-click on the name of the event, and select &ldquo;Reset&rdquo; from the resulting popup menu. This safely deletes the code and all automatically-generated references to it. (Sometimes it doesn&rsquo;t delete the code, but if not, it is now safe to delete it.)</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The Code Window</h1></div>
<h2 id="the-code-window">The Code Window</h2>
<p>In 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/design-window">the previous section</a>, we designed the following GUI:</p>
<img src="hello-button.png" alt="The GUI designed in the previous section." style="zoom:67%;" />
<p>We also indicated briefly how functionality could be added to the button by double-clicking it in the design window to create an event handler. Creating this event handler also opens the <em>code window</em> to display it. The code window for this file can also be displayed by pressing F7 in the design window or by right-clicking the source code file name in the Solution Explorer and selecting &ldquo;View Code&rdquo;. Once a code window has been opened, it can be brought to the front by clicking the tab containing its file name near the top of the Visual Studio window. This window should look something like this:</p>
<p><img src="code-window.png" alt="A picture of a window should appear here."></p>
<p>

<a href="PracticeAssignment.zip">Here is a ZIP archive containing the entire Visual Studio
solution</a>. After downloading and expanding it, you may need to navigate through a folder or two, but you should be able to find a file, <strong>Ksu.Cis300.HelloWorld.sln</strong> (the &ldquo;.sln&rdquo; suffix may not be visible, but it should show as type &ldquo;Microsoft Visual Studio Solution&rdquo;). If you double-click on this file, Visual Studio 2022 should open the solution (if you have an older version of Visual Studio on your machine, you may need to right-click the file and select &ldquo;Open with -&gt;Â Microsoft Visual Studio 2022&rdquo;).</p>
<p>Note in the <strong>class</strong> statement the keyword, <strong>partial</strong>. This indicates that not all of this class definition is in this file. The remainder of the definition is in the file, <strong>UserInterface.Design.cs</strong>. Recall that this file contains code for laying out the GUI and making the <strong>uxGo_Click</strong> method an event handler for the &ldquo;Go&rdquo; button. One of the method definitions that it contains is the <strong>InitializeComponent</strong> method, which does the layout of the GUI and sets up the event handlers. Recall also that the <strong>Main</strong> method in <strong>Program.cs</strong> constructs an instance of this class, then displays it and begins processing events for it. Because the constructor (see the code window above) calls the <strong>InitializeComponent</strong> method, everything will be set up to run the application - all that is needed is code for the event handler. This code will then be executed every time the &ldquo;Go&rdquo; button is clicked.</p>
<p>Before we add code to the event handler, let&rsquo;s first take care of a couple of other issues. Note that in the code window shown above, lines 3 and 10 contain code underlined in green. These underlines indicate compiler warnings. While code containing warnings will execute, one of the requirements of CIS 300 is that all code submitted for grading be free of warnings (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/">Programming Style Requirements</a>).</p>
<p>We can see each warning by hovering the mouse over the underlined code. For example, hovering over &ldquo;UserInterface&rdquo; in line 3 displays the following:</p>
<img src="warning.png" alt="A warning message." style="zoom:67%;" />
<p>This warning refers to the CIS 300 style requirement that each class, structure, enumeration, field, property, and method be preceded by an appropriate comment (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/comments/">Comments</a>). To remove this warning, insert a new line prior to line 3, and type <code>///</code> on this new line. This will cause an XML comment to be inserted:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserInterface</span> : Form
</span></span></code></pre></div><p>This is not quite enough to remove the warning. To accomplish this, text must be entered between <code>&lt;summary&gt;</code> and <code>&lt;/summary&gt;</code>. Any non-blank text will remove the warning, but in order for the comment to be useful, the text should summarize the purpose of the class; for example,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A GUI for a Hello World program.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserInterface</span> : Form
</span></span></code></pre></div><p>Line 10 actually contains four warnings. Three of them can be removed by adding an appropriate comment, including descriptions of the two parameters (all event handlers in CIS 300 will have similar parameter lists, though the type of the second parameter will vary depending on the type of event that is being handled):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Handles a Click event on the &#34;Go&#34; button.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object signaling the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;Information about the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> uxGo_Click(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span></code></pre></div><p>These, comments, however, do not take care of the last warning, which states that <code>uxGo_Click</code> is not in Pascal case. This refers to the 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/naming/">naming convention</a> for methods. To fix this warning, we need to rename this event handler by removing <code>ux</code> and <code>_</code>.</p>
<p><span id="renaming"></span>
  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Care must be taken when renaming an identifier, as all occurrences of the identifier need to be changed. In this case, some occurrences of this name are in the automatically-generated code in <strong>UserInterface.Designer.cs</strong>. Because the Design window relies on this code, failing to change these occurrences will cause the Design window to fail to open due to syntax errors in this file.</p>
<p>The safe way to change any identifier name within Visual Studio is to use its Rename feature. First, right-click on the name to be changed, and select &ldquo;Rename&hellip;&rdquo; from the resulting popup menu. This will open a dialog within which the name can be changed. Once the name is changed, press <code>Enter</code> to cause the identifier to be renamed globally.</p>
    </div>
</div></p>
<p>All warnings should now be gone. However, the CIS 300 style requirements specify two other comments that need to be added (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/comments/">Comments</a>). First, an XML comment needs to be added to the constructor. Second, a comment containing the file name and the author&rsquo;s name needs to be inserted at the top of the file, after inserting these comments, your code should resemble the following (with &ldquo;Rod Howell&rdquo; replaced by your name):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/* UserInterface.cs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Author: Rod Howell
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Ksu.Cis300.HelloWorld
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// A GUI for a Hello World program.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserInterface</span> : Form
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Constructs the GUI.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> UserInterface()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Handles a Click event on the &#34;Go&#34; button.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object signaling the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;Information about the event.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> GoClick(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now we can finally turn our attention to providing functionality to the &ldquo;Go&rdquo; button; i.e., we will add code to the <code>GoClick</code> event handler. In order for this code to provide meaningful functionality, it will need to interact with the controls on the GUI. It needs to use their variable names to do this. The name of the <strong>TextBox</strong> in this code is <code>uxDisplay</code> (recall that you can find this variable name by 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/design-window">opening the design window</a>, clicking on the control, and finding its &ldquo;(Name)&rdquo; property in its Properties window). Suppose we want to respond to the event by placing the text, &ldquo;Hello world!&rdquo;, in this <strong>TextBox</strong>. We therefore need to change its 

<a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.textbox.text?view=windowsdesktop-6.0#system-windows-forms-textbox-text" target="_blank" rel="noopener"><strong>Text</strong></a> 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">property</a> to contain this string; i.e.:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> GoClick(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    uxDisplay.Text = <span style="color:#e6db74">&#34;Hello world!&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Notice that when you type a quote mark, a matching quote is automatically added following the text cursor. As long as you don&rsquo;t reposition the text cursor, you can just type the closing quote as you normally would after typing the text string &mdash; Visual Studio won&rsquo;t insert another quote mark, but will move the text cursor past the one it inserted automatically. The same behavior occurs when you type open parentheses, brackets, or braces.</p>
<p>The code window has several features that help with code writing. One of these features is auto-completion. Often while you are typing code, an auto-complete list appears, often with an entry highlighted. When an entry is highlighted (either automatically or by your selecting it manually), pressing &ldquo;Enter&rdquo; or typing a code element that can&rsquo;t be part of the name (such as &ldquo;.&rdquo; or &ldquo;+&rdquo;) will insert the completion into your code. Once you get used to this feature, it can greatly speed up your code entry. Furthermore, it can be a helpful reminder of what you might need to type next. If you don&rsquo;t want a name to auto-complete (perhaps because it is a name you haven&rsquo;t defined yet), you can press &ldquo;Esc&rdquo;, and the auto-complete list will disappear.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>If you are not using a lab machine, you might notice that as you type text, Visual Studio often provides auto-completions for the entire line. In some cases, the auto-completion is what you need, but in other cases, it is not. This feature can speed up the code-writing process for experienced programmers who use an auto-completion when they see that it matches what they were going to type. For inexperienced programmers, however, it can actually slow both the coding process and the learning process by making bad suggestions. If you find yourself using the auto-complete suggestions as hints, it would make sense to disable them, as these &ldquo;hints&rdquo; are often misleading. To disable this feature:</p>
<ol>
<li>From the &ldquo;Tools&rdquo; menu, select &ldquo;Options&hellip;&rdquo;.</li>
<li>From the list on the left, select &ldquo;IntelliCode&rdquo;.</li>
<li>In the large box in the upper-right, uncheck &ldquo;Show whole line completions&rdquo;.</li>
<li>Save any changes, and restart Visual Studio.</li>
</ol>
<p>This feature has been disabled on the lab machines.</p>
    </div>
</div>
<p>Another feature of the code window is parameter information that shows as a popup box when you are typing a parameter list in a method call; for example:</p>
<img src="parameter-info.png" alt="A picture of part of a code window should appear here." style="zoom:50%;" />
<p>This popup box gives the return type of the method, followed by the name of the method, followed by the parameter list, with the type of each parameter shown and the current parameter in bold face. When there are more than one method with the same name, this is indicated in the upper-left corner of the popup box (&ldquo;1 of 21&rdquo; in the figure above &mdash; the method shown is the first of 21 methods having that name). You can use either the arrows in the popup box or the up and down arrows on the keyboard to scroll through these different methods.</p>
<p>A related feature allows certain information to be obtained by hovering the mouse over different code elements. For example, hovering the mouse over an identifier will display the declaration and documentation for that identifier in a popup box. Also, hovering the mouse over a syntax error (indicated by a red underline, as shown under &ldquo;Show&rdquo; in the above figure) will display an explanation of the error, in addition to any information on the code element.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>The Debugger</h1></div>
<h2 id="the-debugger">The Debugger</h2>
<p>In previous sections, we discussed how a Windows Forms Application can be built using Visual Studio. Having built an application, we need to be able to run and test it. To do this, we use the Visual Studio Debugger. When an application is loaded into Visual Studio, we can invoke the debugger by clicking the &ldquo;Start Debugging&rdquo; button near the top:</p>
<p><img src="start-button.jpg" alt="A picture of part of a Visual Studio Window should appear
here." style="zoom:67%;" /></p>
<p>When the debugger starts, it attempts to do the following things:</p>
<ul>
<li>Save any unsaved files.</li>
<li>Compile the source code into executable code.</li>
<li>Run the compiled code as an application.</li>
</ul>
<p>If everything works correctly, the application is complete. Rarely, however, does everything work correctly the first time. Through the remainder of this section, we will discuss some of the ways the debugger can be used to find and fix errors.</p>
<p>One of the problems that can occur is that the compiler can fail to produce executable code because the source code contains syntax errors. When this happens, the following dialog is displayed:</p>
<p><img src="syntax-error-dialog.jpg" alt="A picture of a dialog should appear here."></p>
<p>Usually the best thing to do at this point is to click the &ldquo;No&rdquo; button. This will stop the debugger and display the error list. This error list can be displayed at any time by clicking the error list button at the bottom of the Visual Studio window:</p>
<img src="error-list.png" alt="The error list button." style="zoom:50%;" />
<p>Double-clicking on a syntax error within the error list will highlight the error in the code window. Normally, fixing the error will cause the corresponding entry in the error list to disappear; however, there are times when the entry won&rsquo;t disappear until the debugger is started again (i.e., by clicking the &ldquo;Start Debugging&rdquo; button).</p>
<p>Once the syntax errors are removed, the debugger will be able to generate executable code and run it. However, more problems can occur at this point. One common problem is that an exception is thrown. For example, the GitHub repository created by 

<a href="https://classroom.github.com/a/a9s4MdIv" target="_blank" rel="noopener">this invitation link</a> (see &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/repos">Git Repositories</a>&rdquo;) contains a Visual Studio solution for a program to convert decimal numbers to base-16. Don&rsquo;t worry about understanding the code, although the numerous comments may help you to do that. Instead, note that an exception is thrown when we try to convert 256:</p>
<p><img src="exception.png" alt="A picture of a window should appear here."></p>
<p>This message gives us quite a bit of information already. First, it tells us which line threw the exception - the line highlighted in green. The arrow in the left margin tells us the same thing, but more generally, when the debugger is running, it indicates the line that is currently being executed or that is ready to be executed. The popup window indicates what kind of exception was thrown: an <strong>ArgumentOutOfRangeException</strong>. It also provides the additional information that a length was less than zero when it should not have been.</p>
<p>Having this information, we can now use the debugger to investigate further the cause of the exception. First, in order to see the code more clearly, we might want to close the popup window (we can always get it back by clicking the red circle containing the white &lsquo;X&rsquo;). We can now examine the values of any of the variables at the time the exception was thrown by hovering the mouse over them. For example, if we hover over <code>lowOrder</code>, a popup appears indicating that it has a value of &ldquo;0&rdquo;. If we move the mouse to hover over its <strong>Length</strong> property, we can see that it has a value of 1. Hovering over <code>power</code> shows that it has a value of 2. Thus, we can see that the exception was thrown because we gave the <strong>Substring</strong> method a length of 1Â -Â 2Â =Â -1. This can be confirmed by hovering the mouse over the &ldquo;-&rdquo; in the expression - the popup indicates that the value of the expression is, in fact, -1.</p>
<p>Actually fixing the error requires a little more understanding of the code. In this case, however, the comment immediately above the line in question helps us out. It tells us that the low-order part of the hex string we are building may need to be padded with 0s - this padding is what we are constructing. Furthermore, it tells us that the number of hex digits we need is the value of <code>power</code>. In order to get this many digits, we need to subtract the number of hex digits we already have in <code>lowOrder</code> from <code>power</code>; i.e., we need to reverse the order of the subtraction.</p>
<p><a name="debugger-buttons"></a>
To stop the debugger, notice the buttons that are available at the top of the Visual Studio window while the debugger is running:</p>
<img src="debugger-buttons.png" alt="Buttons used within the debugger." style="zoom:50%;" />
<p>As you might guess, the &ldquo;Stop&rdquo; button stops the debugger. In what follows, we will discuss each of the other buttons indicated in the above figure, as well as other features of the debugger.</p>
<p><a name="breakpoints"></a>When debugging code, it is often useful to be able to pause execution at a particular place in order to be able to examine the values of variables as we did above. To accomplish this, we can set a <em>breakpoint</em> by clicking in the left margin of the code window at the line where we would like execution to pause. This places a large red dot in the margin where we clicked and colors the line red:</p>
<p><img src="breakpoint.png" alt="A picture of part of a code window should appear here."></p>
<p>Whenever execution reaches a breakpoint, execution stops prior to executing that line. At this point, we can examine the values of variables as we described above. When we are ready to continue execution of the program, we click the &ldquo;Continue&rdquo; button. A breakpoint can be deleted by clicking on the red dot, or all breakpoints may be deleted by selecting &ldquo;Delete All Breakpoints&rdquo; from the &ldquo;Debug&rdquo; menu. A breakpoint may be disabled, but not deleted, by hovering over the large red dot and selecting &ldquo;Disable&rdquo; from the resulting popup. All breakpoints may be disabled by selecting &ldquo;Disable All Breakpoints&rdquo; from the &ldquo;Debug&rdquo; menu.</p>
<p>Sometimes we only want the execution to pause at a breakpoint when a certain condition is met. Such a situation might occur if we have a bug that only surfaces after the code containing it has already executed many times. Rather than letting the program stop and clicking &ldquo;Continue&rdquo; until we reach the point we are interested in, we can instead specify a condition on the breakpoint. To do this, right-click on the breakpoint in the left margin, and select &ldquo;Conditions&hellip;&rdquo; from the resulting popup menu. This causes a large box to be inserted into to the code below this line:</p>
<p><img src="breakpoint-condition.png" alt="A picture of a Visual Studio window should appear here."></p>
<p>In this box, we can type an expression using variables visible at that program location. We can also choose whether we want execution to pause when that expression is true or whenever that expression has changed.</p>
<p>For example, we could add to the above breakpoint the condition:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>power == <span style="color:#ae81ff">8</span>
</span></span></code></pre></div><p>Then when we run the debugger, execution will only pause at this breakpoint when <code>power</code> reaches a value of 8. Note that this line is executed at the top of each iteration of the loop; hence, the breakpoint condition is checked on each iteration.</p>
<p>While hovering the mouse over variable names is a useful way to
discover their current values, there are other mechanisms for doing
this as well. For example, while the debugger is paused, you can go to
the &ldquo;Debug&rdquo; menu and select &ldquo;Windows -&gt; Locals&rdquo;. This will open a window displaying all of the local variables for the current method, property, or constructor, together with their current values. If the debugger is paused within a constructor or a non-<strong>static</strong> method or property, this window also contains <strong>this</strong>, which refers to the object that contains the constructor, method, or property. From <strong>this</strong>, you can access the non-<strong>static</strong> fields of this object.</p>
<p>Another mechanism for examining values of variables is through the &ldquo;Immediate&rdquo; window, which can also be accessed from the &ldquo;Debug&rdquo; menu via its &ldquo;Windows&rdquo; sub-menu. Within the Immediate window, you may type an expression involving the variables that are currently visible, press &ldquo;Enter&rdquo;, and it will display the value of that expression. This can be particularly useful when you have a large data structure, and you need to know a particular element in that structure. For example, suppose <code>array</code> is a large <strong>int[Â ]</strong>, and suppose <code>i</code> is an <strong>int</strong>. Using the &ldquo;Locals&rdquo; window, it might be rather tedious to find the value of <code>array[i]</code>. Using the Immediate window, however, you can just type in</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>array[i]
</span></span></code></pre></div><p>and it will display its value.</p>
<p>When debugging, it is often useful to be able to step through the
execution of a piece of code so that you can see exactly what it is
doing. Three buttons are available for this purpose: &ldquo;Step Into&rdquo;,
&ldquo;Step Over&rdquo;, and &ldquo;Step Out&rdquo;. Suppose we were to run the code in the
GitHub repository provided above with the (unconditional) breakpoint shown in the above picture, and suppose we were to enter the value, 12345. Execution will then pause at this breakpoint with <code>divisor</code> equal to 16 and <code>power</code> equal to 1. Clicking either the &ldquo;Step Into&rdquo; button or the &ldquo;Step Over&rdquo; button will cause the debugger to evaluate the loop condition and, because its value is <strong>true</strong>, advance to the &ldquo;{&rdquo; on the next line. We may continue to walk through the execution a step at a time using either of these buttons - as long as we are in this loop, they will have the same effect. If the Locals window is open, whenever a variable changes value, this value will be shown in red.</p>
<p>After one iteration, the loop will terminate, and execution will reach the line where <code>highOrder</code> is defined. At this point, the functionality of the &ldquo;Step Into&rdquo; and &ldquo;Step Over&rdquo; buttons becomes different because this line contains a method call. The &ldquo;Step Over&rdquo; button will cause execution to run normally through the method call, and pause again as soon as the method call returns (however, because this is a recursive call, if the breakpoint is still set, execution will pause when it reaches the breakpoint within the recursive call). Thus, we can see the net effect of this method call without having to walk through it a step at a time. On the other hand, we might want to step through it in order to see what it is doing. We can do this using the &ldquo;Step Into&rdquo; button. If at some point we want to finish executing the method we are in, but pause after it returns, we can click the &ldquo;Step Out&rdquo; button.</p>
<p>When stepping through code, a &ldquo;Watch&rdquo; window is often a convenient way
to keep track of the value of one or more specific variables and/or
expressions. You can open a Watch window from the &ldquo;Debug&rdquo; menu under
&ldquo;Windows -&gt; Watch&rdquo; &mdash; the four choices here are four different Watch windows that you may use (perhaps for debugging different parts of your program). A Watch window combines some of the advantages of the Locals window and the Immediate window. If you type in a value or expression, it will appear in the &ldquo;Name&rdquo; column, and if it can be evaluated in the current context, its value will be displayed in the &ldquo;Value&rdquo; column. Furthermore the value will be updated as the debugger executes code. You may list several values or expressions in the same Watch window, and their values will all be tracked. To delete an entry from a Watch window, right-click on it and select &ldquo;Delete Watch&rdquo;.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Submitting Assignments</h1></div>
<h2 id="submitting-assignments">Submitting Assignments</h2>
<p>To submit a lab or homework assignment in CIS 300, you will need to do the following steps:</p>
<ol>
<li>
<p><strong>Commit</strong> your changes to your local Git repository. You will do this through the &ldquo;Git Changes&rdquo; tab in Visual Studio (if you don&rsquo;t see this tab, click the icon that looks like a pencil at the bottom of the
Visual Studio window). In the &ldquo;Git Changes&rdquo; tab, in the box that says &ldquo;Enter a message &lt;Required&gt;&rdquo;, type in a message to be
associated with the changes you are committing.

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
Do <strong>not</strong> check the &ldquo;Amend&rdquo; box. This causes the previous commit to be changed, rather than creating a new commit. If this commit is already on GitHub, you will be unable to push your amended commit.    </div>
</div>
Then click &ldquo;Commit
All&rdquo;. A message at the top of the &ldquo;Git Changes&rdquo; tab will indicate whether the commit was successful.</p>
</li>
<li>
<p><strong>Push</strong> your committed changes to GitHub. Do this by clicking the
up-arrow icon at the top of the &ldquo;Git Changes&rdquo; tab. Note that <em>only committed changes will be pushed</em>. A message at the top of the &ldquo;Git Changes&rdquo; tab will indicate whether the push was successful.</p>
</li>
<li>
<p><strong>Submit</strong> the URL of the commit you want graded using the submission
form provided in the assignment instructions. This requires the
following steps:</p>
<ul>
<li>Reload the GitHub repository for this assignment in your web
browser, and click on the link showing the number of commits
(this is in the top right corner of the list of files and
folders in the repository). This
will show a list of commits, beginning with the latest. To the
right of each commit is a button labeled &ldquo;&lt;&gt;&rdquo;. This button
links to a web page displaying the entire contents of that
commit. (It&rsquo;s a good idea to check to see that all of your
source code files are present, in case something went wrong.)
The URL of this page will end in a 40-digit hexadecimal number
giving a digital fingerprint of the commit. Copy this <em>entire URL</em> to
the submission form at the bottom of the assignment.</li>
<li>To complete your submission, click the &ldquo;Submit Assignment&rdquo;
button in  the assignment submission form. The time at which
this button was clicked will be the official submission time
for your assignment.</li>
</ul>
</li>
</ol>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>It is important to do all three of these steps in this order. In
particular, if you make any changes between your last commit and the
push, these changes won&rsquo;t be included in the submission. It is also important to include the correct URL.</p>
    </div>
</div>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>You can double-check that all changes have been pushed by looking at
the numbers next to the up-down-arrows and pencil icons at the bottom of the
Visual Studio window. If all changes have been pushed, all numbers
should be 0.</p>
    </div>
</div>
<p>Occasionally, problems can occur with the interface between Visual
Studio and GitHub. These problems can prevent your code from being
pushed to GitHub. While the problems can often be fixed, it is often
easier to bypass Visual Studio altogether, and use GitHub&rsquo;s file
upload mechanism.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>This is not the preferred assignment submission procedure because it
is less automated (and hence more error-prone), and it creates a
commit on GitHub that is not in your local git repository. However, it
can be used if the above procedure doesn&rsquo;t work for you.</p>
    </div>
</div>
<p>To use this alternative submission procedure, do the following steps:</p>
<ol>
<li>
<p>If Visual Studio is running, exit this application, making sure all files are saved.</p>
</li>
<li>
<p>In your web browser, navigate to the repository for the assignment you are submitting. You should see a list of files and folders, including a file whose name ends with &ldquo;.sln&rdquo;.</p>
</li>
<li>
<p>In your Windows file browser, navigate to your project folder for this assignment. You should see the same list of files and folders as is shown in your web browser. (Depending on the settings for your local machine, you may not see file name suffixes such as &ldquo;.sln&rdquo; and &ldquo;.gitignore&rdquo;, and if you&rsquo;ve added any projects that were not in the original repository, their folders may be shown in the file browser but not in the web browser.)</p>
</li>
<li>
<p>In your web browser, click the &ldquo;Add file&rdquo; button in the row of
buttons above the list of files and folders, and select
&ldquo;Upload files&rdquo; from the drop-down menu.</p>
</li>
<li>
<p>In your file browser, type Control-&ldquo;A&rdquo; to select all files and folders, and drag them to the web browser where it says, &ldquo;Drag files here &hellip;&rdquo;. The web browser should indicate a number of files being uploaded.</p>
</li>
<li>
<p>Near the bottom of the web browser window, in the text box below &ldquo;Commit changes&rdquo;, type a commit message, then click the &ldquo;Commit changes&rdquo; at the bottom. It may take a little while to process, but eventually you should see the repository again.</p>
</li>
<li>
<p>Make sure all of your &ldquo;.cs&rdquo; files are present in the GitHub repository, and that they contain the code you want. (If you have removed or renamed any files, the original files may still be in the repository; however, they shouldn&rsquo;t be in the solution, and therefore shouldn&rsquo;t interfere with the program&rsquo;s execution.)</p>
</li>
<li>
<p>Submit the URL of this commit by following Step 3 of the assignment submission process given above.</p>
</li>
</ol>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Unit Testing</h1></div>
<h2 id="unit-testing">Unit Testing</h2>
<p>Some of the lab assignments in CIS 300 use a technique called <em>unit testing</em> for testing the correctness of your code. Unit testing is an automated technique for testing individual <strong>public</strong> methods and properties using a pre-defined set of test cases. We will be using an open-source unit-testing framework called 

<a href="http://nunit.org/" target="_blank" rel="noopener">NUnit</a>.</p>
<p>An NUnit test suite is a separate project contained within the same solution as the project it is to test. The GitHub repositories for lab assignments that utilize unit testing will initially contain these projects, whose names will typically end with &ldquo;.Tests&rdquo;. You should not modify these test projects.</p>
<p>A test project will contain one or more classes having the attribute, <strong>[TestFixture]</strong>. These classes will contain the specific tests, each of which is a method with the attribute, <strong>[Test]</strong>. The name of the method will briefly describe the test, and a more detailed explanation will be provided in comments.</p>
<p>To run the tests, first go to the
&ldquo;Test&rdquo; menu and select &ldquo;Test Explorer&rdquo;. This will open the Test
Explorer, which should resemble the following:</p>
<p><img src="test-explorer.png" alt="A picture of the Test Explorer should appearhere."></p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>Depending on whether the test project has been successfully compiled, the tests in the large panel may or may not be shown.</p>
    </div>
</div>
<p>Then click the &ldquo;Run All Tests in View&rdquo; button in the upper-left corner of the Test Explorer. The Test Explorer should then show the results of all the tests:</p>
<p><img src="test-explorer-results.png" alt="A picture of the Test Explorer should appear here."></p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>To see all of the output, you will need to open all of the elements either by
clicking on the small triangles to the left of each element or by clicking the icon containing the &lsquo;+&rsquo; symbol.</p>
    </div>
</div>
<p>The above output shows that there were two tests in the test suite. The names of the tests are simply the names of the methods comprising the tests. The output further shows that one of the tests, <strong>LengthIsCorrect</strong>, failed, whereas the other test, <strong>FirstElementIs2</strong>, passed.</p>
<p>The goal, of course, is to get all the tests to pass. When a test
fails, you will first want to refer to the comments on the test method
in order to understand what it is testing. Then by clicking on the
failed test in the Test Explorer, you can see exactly what failed in
the test - this will appear in the panel on the right. In some cases,
an unexpected result will have been produced. In such cases, the
message will show what result was expected, and what it actually
was. In other cases, an exception will have been thrown. In such
cases, the exception will be displayed. A stack trace will also be
displayed, so that you can tell what line of code threw the
exception. Finally, you can run the debugger on the test itself by
right-clicking on the test and selecting &ldquo;Debug&rdquo;. This will allow you
to debug your code using the techniques describe in the section, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/debugger">&ldquo;The
Debugger&rdquo;</a>.</p>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>You can dock the Team Explorer into the main Visual Studio window by
clicking on the small triangle in the far upper-right corner of the
window and selecting either &ldquo;Dock&rdquo; or &ldquo;Dock as Tabbed Document&rdquo;.</p>
    </div>
</div>
<p>One potential error deserves special mention. Sometimes code will
throw an exception that cannot be caught by a <strong>try-catch</strong> block. By
far the most common of these exceptions is the
<strong>StackOverflowException</strong>. When this exception is thrown during unit
testing, the test explorer will simply show some or all of the tests
in gray letters. This indicates that these tests were not
completed. To see why the tests were not completed, you can open the
&ldquo;Output&rdquo; window from the &ldquo;View&rdquo; menu and change the drop-down menu at the top to
&ldquo;Tests&rdquo;. This will indicate what error stopped the tests; for example,
the following indicates that a <strong>StackOverflowException</strong> has
occurred:</p>
<p><img src="StackOverflowException.png" alt="A picture of an output window should appear here."></p>
<p>Unfortunately, when this error occurs, it&rsquo;s more difficult to determine which test caused the exception. You can run the debugger on each test individually to see if it throws a <strong>StackOverflowException</strong>. In many cases, however, it is easier to examine each recursive call to make sure the call is made on a smaller problem instance.</p>
<p>When you believe you have fixed any errors in your code, you will
usually want to run all the tests again, as fixing one error can
sometimes introduce another. However, there are times, such as when
some of the tests are slow, when you don&rsquo;t want to run all the
tests. In such cases, you can select an appropriate alternative from
the &ldquo;Run&rdquo; drop-down at the top of the Test Explorer (i.e., from the
drop-down button with the single green triangle on it). A useful option from this menu is &ldquo;Run Failed Tests&rdquo;. Alternatively, you can select one or more tests from the Test Explorer (use Ctrl-Click to select multiple tests), then right-click and select &ldquo;Run&rdquo;.</p>
<p>Whenever you run fewer than all the tests, the tests that were not run
are dimmed in the Test Explorer to indicate that these results are not
up to date. Be sure you always finish by running all the tests to make sure they all pass on the same version of your code.</p>
<p>Each CIS 300 lab assignment that uses unit testing is set up to use GitHub&rsquo;s auto-grading feature, so that whenever the assignment is pushed, the server will run the unit tests. The overall result of the tests is indicated by an icon on the line below the &ldquo;&lt;&gt; Code&rdquo; button on the repository&rsquo;s web page (you may need to refresh the page to show the latest commit). A brown dot indicates that the tests have not yet completed (this usually take a couple of minutes). A green check mark indicates that all tests have passed. A red X indicates that at least one test has failed, or that the tests couldn&rsquo;t be run.</p>
<p>Unit testing will not be done by the GitHub server on any homework assignments in CIS 300. Instead, the auto-grading feature is used for a different purpose - to record push times. Thus, each push will result in an indication that all tests have passed, even if the code doesn&rsquo;t compile.</p>
<p>You may receive emails indicating the results of auto-grading. You can control this behavior as follows:</p>
<ol>
<li>On any GitHub page, click on the icon in the upper-right corner and select &ldquo;Settings&rdquo;.</li>
<li>On the navigation pane on the left, click &ldquo;Notifications&rdquo;.</li>
<li>Scroll down to the &ldquo;System&rdquo; section, and select your desired notification behavior under &ldquo;Actions&rdquo;.</li>
</ol>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Using Multiple Machines</h1></div>
<h2 id="using-multiple-machines">Using Multiple Machines</h2>
<p>Source control provides one way to access your code from multiple machines. Before you decide to do this, however, you should consider whether this is the best approach. For example, if you have a 

<a href="https://selfserv.cs.ksu.edu/" target="_blank" rel="noopener">CS Account</a>, you have a network file system (the U: drive on CS Windows systems) that you can use whenever you have internet access. From off campus, you need to tunnel into campus using a Virtual Private Network, or VPN (see 

<a href="http://www.k-state.edu/its/security/vpn/" target="_blank" rel="noopener">the KSU Information Technology Services page on Virtual Private Networking</a> for instructions). Once on campus, you can mount this file system as a network drive by following the instructions on the CS support page, &ldquo;

<a href="https://support.cs.ksu.edu/CISDocs/wiki/Disk_Usage" target="_blank" rel="noopener">DiskUsage</a>&rdquo;.</p>
<p>As an alternative to the U: drive or some cloud service, you can use your GitHub repositories to store a master copy of each assignment, and clone local copies as needed on the different machines you use. Once you have code in a GitHub repository, you can clone that repository to a local machine as described in &ldquo;

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/repos">Git Repositories</a>&rdquo;. When you are finished working on that machine, commit all changes and push them to GitHub. If at some later point you need to resume working on a machine whose Git repository is out of date, you can update it by clicking the down-arrow icon in the Visual Studio &ldquo;Git Changes&rdquo; tab.</p>
<p>If you are careful about pushing all changes to GitHub and updating each local copy whenever you begin working on it, everything should go smoothly. Problems can occur, however, if you have made changes to a local version that is out of date, then either try to update it by pulling the GitHub copy, or try to push these changes to GitHub. In such cases, the following message will be shown:</p>
<img src="conflict-message.png" alt="An error message should appear here." style="zoom:67%;" />
<p>At this point, you should click the &ldquo;Pull then Push&rdquo; button in the above message. This usually won&rsquo;t fix the problem, as indicated by an error message at the top of the &ldquo;Git Changes&rdquo; tab. In order to resolve the conflicts in the two versions, look in the &ldquo;Unmerged Changes&rdquo; section of the &ldquo;Git Changes&rdquo; tab. This will list the files that are different in the two versions.  To resolve the conflicts in a file, right-click on it, and select &ldquo;Merge&hellip;&rdquo;. Visual Studio will then show the two versions of the file side by side with the conflicts highlighted. If you want the version you are currently trying to push, simply click the &ldquo;Take Current&rdquo; button at the top. Otherwise, you can select individual portions from the two versions - the result will be shown below the two versions. When you are satisfied with the result, click the &ldquo;Accept Merge&rdquo; button. Once you have merged all conflicting files, you will then need to commit and push again.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Checkpointing</h1></div>
<h2 id="checkpointing">Checkpointing</h2>
<p>Sometimes when writing code, we see that we have gone down a wrong path and would like to undo some major changes we have made. Source control can help us with this if we <em>checkpoint</em> by committing our changes from time to time, using commit messages that clearly describe the changes made in that commit.  (Note that it is not necessary to push these commits to GitHub until you are ready to submit the assignment.)  Git&rsquo;s <em>revert</em> feature allows us to undo any of these commits.</p>
<p>Before you access Git&rsquo;s revert feature, you should undo any uncommitted changes. To do this, go to the &ldquo;Git Changes&rdquo; tab, right-click on the first line under &ldquo;&ldquo;Changes&rdquo;, and select &ldquo;Undo Changes&rdquo;. You will be asked to confirm this action. This will undo any changes to that folder. If you have more folders containing changes, repeat this process for each changed folder.</p>
<p>To access Git&rsquo;s revert feature, select &ldquo;View Branch History&rdquo; from the &ldquo;Git&rdquo; menu.  This will reveal a list of all the commits for this local Git repository, with the most recent commit listed at the top.  To undo all of the changes in any commit, right-click on that commit, and select &ldquo;Revert&rdquo; from the popup menu.  The result is automatically committed.</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>You should always revert commits starting with the most recent and working backwards (i.e., from the top of the list toward the bottom). Otherwise, you will probably encounter conflicts that need to be resolved, as described in 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/multiple">the previous section</a>. You may even reach a state in which no commits can be reverted.</p>
    </div>
</div>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="default">
<div hidden><h1>Programming Style Requirements</h1></div>
<h2 id="programming-style-requirements">Programming Style Requirements</h2>
<p>Software companies typically have programming style requirements to which their programmers must adhere. Many of these requirements have become industry standards. These requirements help to make the developed code more readable, portable, and maintainable. This appendix contains a short set (much shorter than what is typically found in industry) of programming style requirements for CIS 300. These requirements are consistent with 

<a href="http://msdn.microsoft.com/en-us/library/ms229002.aspx" target="_blank" rel="noopener">Microsoft&rsquo;s Naming Guidelines</a> and de facto industry accepted practices. Other requirements are simplifications introduced due to the fact that this programming is for course assignments, rather than for distribution. All assignments in CIS 300 use the package 

<a href="https://www.nuget.org/packages/KSU.CS.CodeAnalyzers/1.0.3.2?_src=template" target="_blank" rel="noopener">KSU.CS.CodeAnalyzers</a> to assist with meeting many of these requirements. This package will generate warnings when various style requirements are violated. All code submitted for grading is expected to follow these style requirements and to be free of warnings.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<div hidden><h1>General Formatting</h1></div>
<h2 id="general-formatting">General Formatting</h2>
<p>All programming will be done using Microsoft 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/">Visual StudioÂ® Community 2022</a>. This integrated development environment (IDE) does a certain amount of formatting automatically. All code formatting should be consistent with what the IDE does automatically, including how it formats code stubs that it inserts. Specifically, all braces should occur on lines by themselves, vertically aligned so that matching braces occupy the same column. (An exception to this rule can be made when the braces enclose a single statement or a part of a statement, and they occur on the same line; however, if it is possible to omit the braces, as in an <strong>if</strong> statement, this is preferable to placing them on the same line.) Furthermore, blocks of code enclosed by braces should be indented one tab stop inside the braces.</p>

  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>An easy way to format a file consistently (after removing any syntax errors) is to select from the &ldquo;Edit&rdquo; menu, &ldquo;Advanced -&gt; Format Document&rdquo;.</p>
    </div>
</div>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Don&rsquo;t change the formatting defaults in the IDE.</p>
    </div>
</div>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Access Modifiers</h1></div>
<h2 id="access-modifiers">Access Modifiers</h2>
<p>C# provides 4 access modifiers for classes, fields, etc.: <strong>public</strong>, <strong>internal</strong>, <strong>protected</strong>, and <strong>private</strong>. For simplicity, however, we will not allow the use of the <strong>internal</strong> or <strong>protected</strong> access modifiers unless they are required by the compiler (for example, when overriding a <strong>protected</strong> method).</p>
<p>When classes, fields, etc., are declared, C# does not require that an access modifier be used. If the access modifier is omitted, a default accessibility level will be used. However, the default depends on where it is being declared. For example, the default accessibility level of a top-level type is <strong>internal</strong>, whereas the default accessibility level of a class member is <strong>private</strong>. In order to avoid confusion, we will require that access modifiers (i.e., <strong>public</strong> or <strong>private</strong>) be used on all declarations except where C# does not allow them (C# does not allow access modifiers for namespaces, members of interfaces or enumerations, or local variables within methods). In particular, note that when Visual StudioÂ® automatically generates a <strong>class</strong> statement, it does not always supply an access modifier, or it may use <strong>internal</strong>. We require that the statement be changed to use <strong>public</strong> (C# does not allow <strong>private</strong> here).</p>
<p>In addition, fields within classes and structures should be declared <strong>private</strong>, unless they are also declared either 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/const"><strong>const</strong></a> or 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/const"><strong>readonly</strong></a>. If you want to make a variable accessible to outside code, you can instead do something like the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Force { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span></code></pre></div><p>Or if you want the outside code to be able to access it, but you don&rsquo;t
want it to change its value you can instead define it as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Force { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>; }
</span></span></code></pre></div><p>In these examples, <code>Force</code> is not a field, but a 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">property</a>. It can be used like a field, but defining it as a property makes it more maintainable (see 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">&ldquo;Properties&rdquo;</a> for more details).</p>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Don&rsquo;t define a <strong>private</strong> property when a <strong>private</strong> field will accomplish the same thing - using a <strong>private</strong> field with the appropriate 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/naming/">naming convention</a> makes the code more readable.</p>
    </div>
</div>
<p>For more information on access modifiers and accessibility levels, see the section on 

<a href="http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx" target="_blank" rel="noopener">Accessibility Levels</a> in the 

<a href="http://msdn.microsoft.com/en-us/library/618ayhy6.aspx" target="_blank" rel="noopener"><em>C# Reference</em></a>.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Naming Conventions</h1></div>
<h2 id="naming-conventions">Naming Conventions</h2>
<p>The naming conventions described below use the following terminology:</p>
<ul>
<li><strong>Pascal case:</strong> Multiple words are joined without spaces, using
capital letters at the beginning of each word. If acronyms of 3 or
more letters are included, only the first letter of the acronym is
capitalized. For example, <code>AverageAge</code>, <code>ContextBoundObject</code>, <code>RgbCode</code>.</li>
<li><strong>Camel case:</strong> The same as pascal case, except the first letter is
not capitalized. For example, <code>averageAge</code>, <code>contextBoundObject</code>,
<code>rgbCode</code>.</li>
</ul>
<h3 id="namespaces">Namespaces</h3>
<p>In CIS 300 programming assignments, namespace names will typically be provided. They will use the form <code>Ksu.Cis300.ProgramName</code>, where each of the 3 components is in pascal case. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Ksu.Cis300.Spreadsheet
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="classes-structures-and-enumerations">Classes, Structures, and Enumerations</h3>
<p>Use pascal case. If the name begins with &ldquo;I&rdquo;, the following letter must not be capitalized, as this would look like an interface - see below. For an exception class, append the word &ldquo;Exception&rdquo;. Make your names descriptive nouns or noun phrases without abbreviations (common abbreviations like &ldquo;Min&rdquo; are allowed). For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AccountManager</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="interfacestreestriesmultiple-impl">

<a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl">Interfaces</a></h3>
<p>Use the convention for a class name with a capital &ldquo;I&rdquo; preceding the first letter (which must also be capitalized). For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">IPriorityQueue</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="methods">Methods</h3>
<p>Use pascal case. Make your names descriptive without abbreviations (common abbreviations like &ldquo;Min&rdquo; are allowed). For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> InitializeComponent()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Automatically-generated event handlers don&rsquo;t follow this convention. For example, suppose you generate a Click event handler by double-clicking a <strong>Button</strong> named <code>uxUpdate</code>. The event handler generated will then be given a name of <strong>uxUpdate_Click</strong>. You will need to rename it to <strong>UpdateClick</strong>. Be sure to use 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/code-window/#renaming">Visual Studio&rsquo;s Rename feature</a>, as this name will also need to be changed in automatically-generated code that you normally won&rsquo;t edit.</p>
    </div>
</div>
<h3 id="propertiesappendixsyntaxproperties">

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">Properties</a></h3>
<p>Use pascal case. Make your names descriptive without abbreviations (common abbreviations are allowed). For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Count { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>; }
</span></span></code></pre></div><h3 id="controls-on-forms">Controls on Forms</h3>
<p>Use camel case, and begin names with &ldquo;ux&rdquo; followed by a capital letter
(this &ldquo;ux&rdquo; stands for &ldquo;user experience&rdquo;). Make your names descriptive
of the functionality, not the type of control. For example,
<code>uxAccept</code>, <code>uxCustomerName</code>.</p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>You will not typically declare these names in code, but will enter
them in the Visual StudioÂ® design window.</p>
    </div>
</div>
<h3 id="public-constantsappendixsyntaxconst-const-or-readonly"><strong>public</strong> 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/const">Constants</a> (const or readonly)</h3>
<p>Use pascal case. Make your names descriptive. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">double</span> GravitationalAcceleration = <span style="color:#ae81ff">9.80665</span>;
</span></span></code></pre></div><h3 id="private-fields"><strong>private</strong> Fields</h3>
<p>Use camel case with an underscore character preceding the first letter. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> _weight;
</span></span></code></pre></div><p>This applies to all <strong>private</strong> fields, including those defined as <strong>const</strong> or <strong>readonly</strong>.</p>
<h3 id="parameters-and-local-variables-within-methods">Parameters and Local Variables Within Methods</h3>
<p>Use camel case. For example, <code>inString</code> and <code>outString</code> in the
following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> ToMixedCase(<span style="color:#66d9ef">string</span> inString)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> outString;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// code here</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> outString;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Comments</h1></div>
<h2 id="comments">Comments</h2>
<p>Within each source code file that you edit, you will need to provide
certain comments as documentation. Visual StudioÂ® automatically
generates some source code files that you will not need to modify &mdash; you don&rsquo;t need to add comments to those files.</p>
<p>At the top of each file in which you provide code, add a comment of the following form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/* filename.cs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Author: Name 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p>where <code>filename.cs</code> is the name of the file, and <code>Name</code> is the name of
the primary author. The primary author will either be you or, for
files provided for you, the name of the original author of that
file. Whenever you use someone else&rsquo;s code, it is important that you
give them credit for it. (To fail to do this is plagiarism.) Thus, if
one of your source files was originally written by Rod Howell, leave
his name as the author. If you have modified a file originally written
by someone else, below the <code>Author</code> line, insert a line of the following form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Modified by: Your Name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p>Prior to each class, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/structs">structure</a>, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerations">enumeration</a>, field, 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">property</a>, and method, place a comment documenting its use. This comment should be delimited by <code>///</code> on each line. When you type <code>///</code> immediately above a class, structure, enumeration, field, property, or method, the IDE will automatically insert additional text to form a comment stub such as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span></code></pre></div><p><code>&lt;summary&gt;</code> and <code>&lt;/summary&gt;</code> are <em>XML tags</em>, which are understood by
the IDE. Between these tags, you should insert a summary of the
program component you are documenting, including any requirements that
must be satisfied by the calling code in order for the method to work
properly. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Indicates whether this structure is empty.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">bool</span> _isEmpty;
</span></span></code></pre></div><p>If the program component being documented is a method with at least one parameter and/or a non-<strong>void</strong> return type, additional XML tags will be generated by the IDE. For each parameter, <code>&lt;param&gt;</code> and <code>&lt;/param&gt;</code> tags will be generated. You should insert a description of the use of that parameter between these tags. If the method has a non-<strong>void</strong> return type, <code>&lt;returns&gt;</code> and <code>&lt;/returns&gt;</code> tags are generated. You should insert an explanation of the value being returned between these tags. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Computes the number of times a given string x</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// occurs within a given string y.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;x&#34;&gt;The string being searched for.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;y&#34;&gt;The string being searched.&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The number of occurrences of x in y.&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> Occurrences(<span style="color:#66d9ef">string</span> x, <span style="color:#66d9ef">string</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>You do not need to fill in <code>&lt;exception&gt;</code> tags - you may remove any that are generated automatically.</p>
    </div>
</div>
<p>Visual Studio often generates warnings when it cannot verify that the value being assigned to a non-nullable variable is not <strong>null</strong>. In cases where you can determine that the value will not be <strong>null</strong>, you are allowed to remove the warning by inserting <code>!</code> after the value. In such cases, prior to this line, insert a comment explaining why this value is not <strong>null</strong>. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> line;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (!input.EndOfStream)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Because input isn&#39;t at the end of the stream, ReadLine won&#39;t return null.</span>
</span></span><span style="display:flex;"><span>    line = input.ReadLine()!;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Comments should also be used within methods to explain anything that is not obvious from the code itself.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<div hidden><h1>Prohibited Features</h1></div>
<h2 id="prohibited-features">Prohibited Features</h2>
<p>The following features of C# should not be used on assignments or quizzes unless otherwise stated:</p>
<ul>
<li>
<p><strong>The goto statement:</strong> It has been over 50 years since Dijkstra published 

<a href="http://www.cs.utexas.edu/users/EWD/ewd02xx/EWD215.PDF" target="_blank" rel="noopener">&ldquo;Go To Statement Considered Harmful&rdquo;</a> (<em>Communications of the ACM</em>, vol. 11 (1968), pp. 147-148). I am
amazed that languages continue to include this statement.</p>
</li>
<li>
<p><strong>The unsafe keyword:</strong> The name pretty much says it all.</p>
</li>
<li>
<p><strong>The var keyword:</strong> There are very few contexts in which this is needed, and these contexts won&rsquo;t occur in this class. For all other contexts, it makes the code less readable.</p>
</li>
<li>
<p><strong>Virtual methods:</strong> These are useful in large-scale software development; however, they are overused. They will not be needed in the programming we will be doing. (However, virtual methods in the .NET class library may be 

<a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl/#overriding">overridden</a>.)</p>
</li>
<li>
<p><strong>Abbreviated constructor calls:</strong> Beginning with C# version 9.0, constructor calls are allowed to be abbreviated when the compiler can determine from the context the type of object that is being constructed. In such a case, the type name can be omitted from the <strong>new</strong> operator. For example, instead of writing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span>StringBuilder sb = <span style="color:#66d9ef">new</span> StringBuilder();
</span></span></code></pre></div><p>we can write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span>StringBuilder sb = <span style="color:#66d9ef">new</span>();
</span></span></code></pre></div><p>If the constructor takes parameters, they can be inserted between the parentheses. Such abbreviations are permitted - even encouraged - in cases like the above example, where the type being constructed is explicitly specified elsewhere in the same statement. However, if the type name is not explicitly specified elsewhere in the same statement, such abbreviations are prohibited, as they make the code harder to read.</p>
</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

          </section>
          </section>
              </section>
        </div>
      </main>
    
<div class="git-footer">
<p>Last modified by: 
            <i class='fas fa-user'></i> Rod Howell
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cis300/cis300-book/-/commit/6b0a80b31dfbd834225f35729a82927f487158ce">May 23, 2023</a>
</p>
</div>

    
    </div>
    <aside id="sidebar" class="default-animation">
      <div id="header-wrapper" class="default-animation">
        <div id="header" class="default-animation">
<a id="logo" href="https://ksu-cs-textbooks.github.io/cis300/">
  CIS 300 - Data Structures
</a>

        </div>
        <div class="searchbox default-animation">
          <label for="search-by"><i class="fas fa-search"></i></label>
          <input data-search-input id="search-by" type="search" placeholder="Search...">
          <span data-search-clear=""><i class="fas fa-times"></i></span>
        </div>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="https://ksu-cs-textbooks.github.io/cis300/js/auto-complete.js?1685734617" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/cis300/js/lunr.min.js?1685734617" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/cis300/js/lunr.stemmer.support.min.js?1685734617" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/cis300/js/lunr.multi.min.js?1685734617" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/cis300/js/lunr.en.min.js?1685734617" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/cis300/js/search.js?1685734617" defer></script>
      </div>
      <div id="content-wrapper" class="highlightable">
        <ul class="topics collapsible-menu">
          <li data-nav-id="/io/" title="Input/Output" class="dd-item"><input type="checkbox" id="section-cbd3b3207f24308a668546abfa69f213" class="toggle"/><label for="section-cbd3b3207f24308a668546abfa69f213" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/io/"><b>1. </b>Input/Output</a><ul>
          <li data-nav-id="/io/dialogs/" title="Dialogs" class="dd-item"><input type="checkbox" id="section-61b1770a0bd16f4917e33b67edd271d2" class="toggle"/><label for="section-61b1770a0bd16f4917e33b67edd271d2" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/"><b>1.1. </b>Dialogs</a><ul>
          <li data-nav-id="/io/dialogs/message-boxes/" title="MessageBoxes" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/message-boxes/"><b>1.1.1. </b>MessageBoxes</a></li>
          <li data-nav-id="/io/dialogs/file-dialogs/" title="File Dialogs" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/file-dialogs/"><b>1.1.2. </b>File Dialogs</a></li>
          <li data-nav-id="/io/dialogs/custom/" title="Custom Dialogs" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/custom/"><b>1.1.3. </b>Custom Dialogs</a></li></ul></li>
          <li data-nav-id="/io/simple-text-file/" title="Simple Text File I/O" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/io/simple-text-file/"><b>1.2. </b>Simple Text File I/O</a></li>
          <li data-nav-id="/io/exceptions/" title="Exception Handling" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/io/exceptions/"><b>1.3. </b>Exception Handling</a></li>
          <li data-nav-id="/io/advanced-text-file/" title="Advanced Text File I/O" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/io/advanced-text-file/"><b>1.4. </b>Advanced Text File I/O</a></li>
          <li data-nav-id="/io/other-file-io/" title="Other File I/O" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/io/other-file-io/"><b>1.5. </b>Other File I/O</a></li></ul></li>
          <li data-nav-id="/strings/" title="strings and StringBuilders" class="dd-item"><input type="checkbox" id="section-9355ad26afa67cd4239c81429ad6e8ca" class="toggle"/><label for="section-9355ad26afa67cd4239c81429ad6e8ca" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/strings/"><b>2. </b>strings and StringBuilders</a><ul>
          <li data-nav-id="/strings/strings/" title="strings" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/strings/strings/"><b>2.1. </b>strings</a></li>
          <li data-nav-id="/strings/stringbuilders/" title="StringBuilders" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilders/"><b>2.2. </b>StringBuilders</a></li>
          <li data-nav-id="/strings/stringbuilder-impl/" title="Implementation of StringBuilders" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/strings/stringbuilder-impl/"><b>2.3. </b>Implementation of StringBuilders</a></li></ul></li>
          <li data-nav-id="/stacks-queues/" title="Stacks and Queues" class="dd-item"><input type="checkbox" id="section-deefdc256b7889ce66393d7269597a4b" class="toggle"/><label for="section-deefdc256b7889ce66393d7269597a4b" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/"><b>3. </b>Stacks and Queues</a><ul>
          <li data-nav-id="/stacks-queues/stacks/" title="Introduction to Stacks" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stacks/"><b>3.1. </b>Introduction to Stacks</a></li>
          <li data-nav-id="/stacks-queues/undo/" title="Implementing Undo and Redo for a TextBox" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/undo/"><b>3.2. </b>Implementing Undo and Redo for a TextBox</a></li>
          <li data-nav-id="/stacks-queues/paren/" title="Parenthesis Matching" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/paren/"><b>3.3. </b>Parenthesis Matching</a></li>
          <li data-nav-id="/stacks-queues/stack-impl/" title="Implementing a Stack" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/stack-impl/"><b>3.4. </b>Implementing a Stack</a></li>
          <li data-nav-id="/stacks-queues/queues/" title="Introduction to Queues" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/queues/"><b>3.5. </b>Introduction to Queues</a></li>
          <li data-nav-id="/stacks-queues/queue-impl/" title="Implementing a Queue" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/stacks-queues/queue-impl/"><b>3.6. </b>Implementing a Queue</a></li></ul></li>
          <li data-nav-id="/linked-lists/" title="Linked Lists" class="dd-item"><input type="checkbox" id="section-a51df6d53eeee393764eb46edb53958a" class="toggle"/><label for="section-a51df6d53eeee393764eb46edb53958a" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/"><b>4. </b>Linked Lists</a><ul>
          <li data-nav-id="/linked-lists/intro/" title="Introduction to Linked Lists" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/intro/"><b>4.1. </b>Introduction to Linked Lists</a></li>
          <li data-nav-id="/linked-lists/stacks-queues/" title="Implementing Stacks and Queues with Linked Lists" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/stacks-queues/"><b>4.2. </b>Implementing Stacks and Queues with Linked Lists</a></li>
          <li data-nav-id="/linked-lists/sieve-eratosthenes/" title="Finding Prime Numbers" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/linked-lists/sieve-eratosthenes/"><b>4.3. </b>Finding Prime Numbers</a></li></ul></li>
          <li data-nav-id="/dictionaries/" title="Dictionaries" class="dd-item"><input type="checkbox" id="section-9011afb8a0159b09a13a971ca89bced8" class="toggle"/><label for="section-9011afb8a0159b09a13a971ca89bced8" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/"><b>5. </b>Dictionaries</a><ul>
          <li data-nav-id="/dictionaries/dictionary-tkey-tvalue/" title="The Dictionary&lt;TKey, TValue&gt; Class" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/dictionary-tkey-tvalue/"><b>5.1. </b>The Dictionary&lt;TKey, TValue&gt; Class</a></li>
          <li data-nav-id="/dictionaries/linked-list-impl/" title="Implementing a Dictionary with a Linked List" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/linked-list-impl/"><b>5.2. </b>Implementing a Dictionary with a Linked List</a></li>
          <li data-nav-id="/dictionaries/binary-search/" title="Implementing a Dictionary with an Array-Like Structure" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/dictionaries/binary-search/"><b>5.3. </b>Implementing a Dictionary with an Array-Like Structure</a></li></ul></li>
          <li data-nav-id="/trees/" title="Trees" class="dd-item"><input type="checkbox" id="section-5e8305205d74771c71a9ea85594a7914" class="toggle"/><label for="section-5e8305205d74771c71a9ea85594a7914" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/trees/"><b>6. </b>Trees</a><ul>
          <li data-nav-id="/trees/intro/" title="Introduction to Trees" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/intro/"><b>6.1. </b>Introduction to Trees</a></li>
          <li data-nav-id="/trees/bst/" title="Binary Search Trees" class="dd-item"><input type="checkbox" id="section-8d42cd93516505610f8b32c65bbeebda" class="toggle"/><label for="section-8d42cd93516505610f8b32c65bbeebda" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/"><b>6.2. </b>Binary Search Trees</a><ul>
          <li data-nav-id="/trees/bst/binary-trees/" title="Binary Trees" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/binary-trees/"><b>6.2.1. </b>Binary Trees</a></li>
          <li data-nav-id="/trees/bst/intro/" title="Introduction to Binary Search Trees" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/intro/"><b>6.2.2. </b>Introduction to Binary Search Trees</a></li>
          <li data-nav-id="/trees/bst/remove/" title="Removing from a Binary Search Tree" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/remove/"><b>6.2.3. </b>Removing from a Binary Search Tree</a></li>
          <li data-nav-id="/trees/bst/inorder/" title="Inorder Traversal" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/bst/inorder/"><b>6.2.4. </b>Inorder Traversal</a></li></ul></li>
          <li data-nav-id="/trees/avl/" title="AVL Trees" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/avl/"><b>6.3. </b>AVL Trees</a></li>
          <li data-nav-id="/trees/tries/" title="Tries" class="dd-item"><input type="checkbox" id="section-5f1f75af2aa97dd0bdbedb3b3e5adc65" class="toggle"/><label for="section-5f1f75af2aa97dd0bdbedb3b3e5adc65" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/"><b>6.4. </b>Tries</a><ul>
          <li data-nav-id="/trees/tries/intro/" title="Introduction to Tries" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/intro/"><b>6.4.1. </b>Introduction to Tries</a></li>
          <li data-nav-id="/trees/tries/multiple-impl/" title="Multiple Implementations of Children" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/multiple-impl/"><b>6.4.2. </b>Multiple Implementations of Children</a></li>
          <li data-nav-id="/trees/tries/traversing/" title="Traversing a Trie" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/traversing/"><b>6.4.3. </b>Traversing a Trie</a></li>
          <li data-nav-id="/trees/tries/word-games/" title="Tries in Word Games" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/tries/word-games/"><b>6.4.4. </b>Tries in Word Games</a></li></ul></li>
          <li data-nav-id="/trees/priority-queues/" title="Priority Queues" class="dd-item"><input type="checkbox" id="section-0e087c42aa39c815f492e3767eaf2ef7" class="toggle"/><label for="section-0e087c42aa39c815f492e3767eaf2ef7" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/"><b>6.5. </b>Priority Queues</a><ul>
          <li data-nav-id="/trees/priority-queues/heaps/" title="Heaps" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/heaps/"><b>6.5.1. </b>Heaps</a></li>
          <li data-nav-id="/trees/priority-queues/leftist-heaps/" title="Leftist Heaps" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/leftist-heaps/"><b>6.5.2. </b>Leftist Heaps</a></li>
          <li data-nav-id="/trees/priority-queues/huffman-trees/" title="Huffman Trees" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/trees/priority-queues/huffman-trees/"><b>6.5.3. </b>Huffman Trees</a></li></ul></li></ul></li>
          <li data-nav-id="/hashing/" title="Hash Tables" class="dd-item"><input type="checkbox" id="section-cd22fc50afca8a60e214c94b94daa169" class="toggle"/><label for="section-cd22fc50afca8a60e214c94b94daa169" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/hashing/"><b>7. </b>Hash Tables</a><ul>
          <li data-nav-id="/hashing/simple/" title="A Simple Hash Table Implementation" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/hashing/simple/"><b>7.1. </b>A Simple Hash Table Implementation</a></li>
          <li data-nav-id="/hashing/rehashing/" title="Rehashing" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/hashing/rehashing/"><b>7.2. </b>Rehashing</a></li>
          <li data-nav-id="/hashing/memoization/" title="Memoization" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/hashing/memoization/"><b>7.3. </b>Memoization</a></li>
          <li data-nav-id="/hashing/equality/" title="Equality in C#" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/hashing/equality/"><b>7.4. </b>Equality in C#</a></li>
          <li data-nav-id="/hashing/hash-functions/" title="Hash Codes" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/hashing/hash-functions/"><b>7.5. </b>Hash Codes</a></li></ul></li>
          <li data-nav-id="/graphs/" title="Graphs" class="dd-item"><input type="checkbox" id="section-fefd7704561bcadc124f3f3c72c54ab3" class="toggle"/><label for="section-fefd7704561bcadc124f3f3c72c54ab3" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/graphs/"><b>8. </b>Graphs</a><ul>
          <li data-nav-id="/graphs/intro/" title="Introduction to Graphs" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/graphs/intro/"><b>8.1. </b>Introduction to Graphs</a></li>
          <li data-nav-id="/graphs/dijkstra/" title="Shortest Paths" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/graphs/dijkstra/"><b>8.2. </b>Shortest Paths</a></li>
          <li data-nav-id="/graphs/breadth-first/" title="Unweighted Shortest Paths" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/graphs/breadth-first/"><b>8.3. </b>Unweighted Shortest Paths</a></li>
          <li data-nav-id="/graphs/impl/" title="Implementing a Graph" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/graphs/impl/"><b>8.4. </b>Implementing a Graph</a></li></ul></li>
          <li data-nav-id="/sorting/" title="Sorting" class="dd-item"><input type="checkbox" id="section-fd2166a393af1c48d2ffe636e6f952d8" class="toggle"/><label for="section-fd2166a393af1c48d2ffe636e6f952d8" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/sorting/"><b>9. </b>Sorting</a><ul>
          <li data-nav-id="/sorting/select/" title="Select Sorts" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/sorting/select/"><b>9.1. </b>Select Sorts</a></li>
          <li data-nav-id="/sorting/insert/" title="Insert Sorts" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/sorting/insert/"><b>9.2. </b>Insert Sorts</a></li>
          <li data-nav-id="/sorting/merge/" title="Merge Sorts" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/sorting/merge/"><b>9.3. </b>Merge Sorts</a></li>
          <li data-nav-id="/sorting/split/" title="Split Sorts" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/sorting/split/"><b>9.4. </b>Split Sorts</a></li>
          <li data-nav-id="/sorting/hybrid/" title="Hybrid Sorting Algorithms" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/sorting/hybrid/"><b>9.5. </b>Hybrid Sorting Algorithms</a></li>
          <li data-nav-id="/sorting/strings/" title="Sorting Strings" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/sorting/strings/"><b>9.6. </b>Sorting Strings</a></li></ul></li>
          <li data-nav-id="/appendix/" title="Appendices" class="dd-item"><input type="checkbox" id="section-8a7f152ea576b5a4047f92c2cc1cabad" class="toggle"/><label for="section-8a7f152ea576b5a4047f92c2cc1cabad" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/"><b>A. </b>Appendices</a><ul>
          <li data-nav-id="/appendix/syntax/" title="C# Syntax" class="dd-item"><input type="checkbox" id="section-6a5a5cc3bca4007f0866907612ee033f" class="toggle"/><label for="section-6a5a5cc3bca4007f0866907612ee033f" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/"><b>A1. </b>C# Syntax</a><ul>
          <li data-nav-id="/appendix/syntax/reference-value/" title="Reference Types and Value Types" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/reference-value/"><b>A1.1. </b>Reference Types and Value Types</a></li>
          <li data-nav-id="/appendix/syntax/enumerations/" title="Enumerations" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerations/"><b>A1.2. </b>Enumerations</a></li>
          <li data-nav-id="/appendix/syntax/structs/" title="Structures" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/structs/"><b>A1.3. </b>Structures</a></li>
          <li data-nav-id="/appendix/syntax/decimals/" title="The decimal Type" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/decimals/"><b>A1.4. </b>The decimal Type</a></li>
          <li data-nav-id="/appendix/syntax/const/" title="Read-Only and Constant Fields" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/const/"><b>A1.5. </b>Read-Only and Constant Fields</a></li>
          <li data-nav-id="/appendix/syntax/properties/" title="Properties" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties/"><b>A1.6. </b>Properties</a></li>
          <li data-nav-id="/appendix/syntax/indexers/" title="Indexers" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/indexers/"><b>A1.7. </b>Indexers</a></li>
          <li data-nav-id="/appendix/syntax/static-this/" title="The Keywords static and this" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/static-this/"><b>A1.8. </b>The Keywords static and this</a></li>
          <li data-nav-id="/appendix/syntax/out-ref/" title="out and ref Parameters" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/out-ref/"><b>A1.9. </b>out and ref Parameters</a></li>
          <li data-nav-id="/appendix/syntax/foreach/" title="The foreach Statement" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/foreach/"><b>A1.10. </b>The foreach Statement</a></li>
          <li data-nav-id="/appendix/syntax/enumerators/" title="Enumerators" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/enumerators/"><b>A1.11. </b>Enumerators</a></li>
          <li data-nav-id="/appendix/syntax/switch/" title="The switch Statement" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/switch/"><b>A1.12. </b>The switch Statement</a></li>
          <li data-nav-id="/appendix/syntax/remainder/" title="The Remainder Operator" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/remainder/"><b>A1.13. </b>The Remainder Operator</a></li></ul></li>
          <li data-nav-id="/appendix/vs/" title="Visual Studio" class="dd-item"><input type="checkbox" id="section-805451f3a5b538fc2959767d013f4e16" class="toggle"/><label for="section-805451f3a5b538fc2959767d013f4e16" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/"><b>A2.Â </b>Visual Studio</a><ul>
          <li data-nav-id="/appendix/vs/installing-vs/" title="Installing Visual Studio" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/installing-vs/"><b>A2.1 </b>Installing Visual Studio</a></li>
          <li data-nav-id="/appendix/vs/repos/" title="Git Repositories" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/repos/"><b>A2.2. </b>Git Repositories</a></li>
          <li data-nav-id="/appendix/vs/solutions/" title="Visual Studio Solutions" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/solutions/"><b>A2.3. </b>Visual Studio Solutions</a></li>
          <li data-nav-id="/appendix/vs/design-window/" title="The Design Window" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/design-window/"><b>A2.4. </b>The Design Window</a></li>
          <li data-nav-id="/appendix/vs/code-window/" title="The Code Window" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/code-window/"><b>A2.5. </b>The Code Window</a></li>
          <li data-nav-id="/appendix/vs/debugger/" title="The Debugger" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/debugger/"><b>A2.6. </b>The Debugger</a></li>
          <li data-nav-id="/appendix/vs/submitting/" title="Submitting Assignments" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/submitting/"><b>A2.7. </b>Submitting Assignments</a></li>
          <li data-nav-id="/appendix/vs/nunit/" title="Unit Testing" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/nunit/"><b>A2.8. </b>Unit Testing</a></li>
          <li data-nav-id="/appendix/vs/multiple/" title="Using Multiple Machines" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/multiple/"><b>A2.9. </b>Using Multiple Machines</a></li>
          <li data-nav-id="/appendix/vs/checkpointing/" title="Checkpointing" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/vs/checkpointing/"><b>A2.10. </b>Checkpointing</a></li></ul></li>
          <li data-nav-id="/appendix/style/" title="Programming Style Requirements" class="dd-item"><input type="checkbox" id="section-3c7d664b64b84c9f89fc48179979363e" class="toggle"/><label for="section-3c7d664b64b84c9f89fc48179979363e" ></label><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/"><b>A3. </b>Programming Style Requirements</a><ul>
          <li data-nav-id="/appendix/style/formatting/" title="General Formatting" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/formatting/"><b>A3.1. </b>General Formatting</a></li>
          <li data-nav-id="/appendix/style/access-modifiers/" title="Access Modifiers" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/access-modifiers/"><b>A3.2. </b>Access Modifiers</a></li>
          <li data-nav-id="/appendix/style/naming/" title="Naming Conventions" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/naming/"><b>A3.3. </b>Naming Conventions</a></li>
          <li data-nav-id="/appendix/style/comments/" title="Comments" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/comments/"><b>A3.4. </b>Comments</a></li>
          <li data-nav-id="/appendix/style/prohibited/" title="Prohibited Features" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/cis300/appendix/style/prohibited/"><b>A3.5 </b>Prohibited Features</a></li></ul></li></ul></li>
        </ul>
        <div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div>
        <hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"/>
        <div id="prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch">
          <ul>
            <li id="select-language-container" class="footerLangSwitch">
              <a class="padding select-container">
                <i class="fas fa-language fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-language" onchange="location = baseUri + this.value;">
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
            </li>
            <li id="select-variant-container" class="footerVariantSwitch showVariantSwitch">
              <a class="padding select-container">
                <i class="fas fa-paint-brush fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                    <option id="light-theme" value="light-theme" selected>Light Theme</option>
                    <option id="dark-theme" value="dark-theme">Dark Theme</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
              <script>window.variants && variants.markSelectedVariant();</script>
            </li>
            <li class="footerVisitedLinks"><a class="padding" onclick="clearHistory();"><i class="fas fa-history fa-fw"></i> Clear History</a></li>
          </ul>
        </div>
        <div id="footer" class="footerFooter showFooter"><style>
  #footer {
    font-size: 13px;
    margin-left: auto;
    margin-right: auto;
    padding: 2rem 1rem;
    min-width: 230px;
    max-width: 300px;
  }
  #footer p {
    margin: 0;
  }
  </style>

<p>Built using <a href="http://gohugo.io/">Hugo</a> and <a href="https://github.com/ksu-cs-textbooks/hugo-theme-relearn">Hugo Relearn Theme</a> with assistance from Josh Weese and Russ Feldhausen.</p>
<br/>
<p>Microsoft and Visual Studio are either registered trademarks or trademarks of Microsoft Corporation in the United States and/or other countries. </p>
<br/>
<p><strong><i>Â© Copyright 2014-2023, <a href="http://people.cs.ksu.edu/~rhowell/" target="_">Rod Howell</a>. All rights reserved.</i></strong></p>

        </div>
      </div>
    </aside>
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/clipboard.min.js?1685734617" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/perfect-scrollbar.min.js?1685734617" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/featherlight.min.js?1685734617" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://ksu-cs-textbooks.github.io/cis300/js/mathjax/tex-mml-chtml.js?1685734617"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/theme.js?1685734617" defer></script>
  </body>
</html>
