<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Introduction to Queues</title>
<link href="/~rhowell/style.css" rel="STYLESHEET"/>
</head>
<body>

<h1>Introduction to Queues</h1>

Stacks provide LIFO access to data, but sometimes we need FIFO
    access.  Consider, for example, the computation of capital gains
    from stock sales.  Typically an investor will buy shares of a
    stock commodity at various times and for different prices.  When
    shares are sold, the amount of money received doesn't depend on
    <i>which</i> shares of a given commodity are sold, as each share
    is worth the same amount at that time.  Likewise, the unsold
    shares of that commodity each have the same value.  However, for
    accounting purposes, it does matter.  Specifically, the <i>capital
    gain</i> for that sale is defined to be the amount received from
    the sale minus the amount originally paid for those shares,
    assuming the shares sold are the oldest shares of that commodity
    owned by the investor.
<p>
Suppose now that we want to compute the capital gains from sales of
      stock.  As shares are purchased, we need to record the purchase
      price of each share, along with the order in which the shares
      were purchased.  As shares are sold, we need to retrieve the
      original purchase price of the oldest shares of each commodity
      sold.  We therefore need first-in-first-out access to the
      purchase prices of the shares of each commodity owned.  To keep
      this relatively simple, in what follows we will assume that we
      only need to keep track of one stock commodity.
</p>
A <i>queue</i> provides FIFO access to data items.  Like a stack, a
    queue is a sequence of data items.  However, a queue behaves more
    like a line of people at a ticket counter.  Each person who enters
    the queue enters at the <i>back</i>, and the next person who is
    served is the person at the <i>front</i>.  Thus, the people in the
    queue are served in FIFO order.  Likewise, new data items are
    added to the back of a queue, and data items are retrieved from
    the front.
<p>
The .NET Framework provides both a non-generic queue of <b>object</b>s
      (<a href="http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx"><b>System.Collections.Queue</b></a>)
      and a generic queue (<a href="http://msdn.microsoft.com/en-us/library/7977ey2c(v=vs.110).aspx"><b>System.Collections.Generic.Queue&lt;T&gt;</b></a>).
      For simplicity, we will focus on the generic version.  The
      non-generic version is the same, except that wherever the type
      parameter <b>T</b> is used in the generic version, <b>object</b>
      is used in the non-generic version.
</p>
Like <b>Stack&lt;T&gt;</b>, <b>Queue&lt;T&gt;</b> has a <b>public</b>
<a href="http://msdn.microsoft.com/en-us/library/e99tfk1a(v=vs.110).aspx">constructor</a>
    that takes no parameters and constructs an empty queue, along with
    a <b>public</b>
<a href="http://msdn.microsoft.com/en-us/library/fy0wwyz4(v=vs.110).aspx"><b>Count</b></a>
    property that gets the number of elements in the queue (as an
    <b>int</b>).  It also has the following <b>public</b> methods:
<ul>
<li> An <a href="http://msdn.microsoft.com/en-us/library/t249c2y7(v=vs.110).aspx"><b>Enqueue</b></a>
	    method that takes a single parameter of type <b>T</b> and
	    places it at the back of the queue. </li>
<li> A <a href="http://msdn.microsoft.com/en-us/library/1cz28y5c(v=vs.110).aspx"><b>Peek</b></a>
	    method that takes no parameters and returns the element
	    (of type <b>T</b>) at the front of the queue without
	    changing the queue's contents.  If the queue is empty,
	    this method throws an
	    <b>InvalidOperationException</b>. </li>
<li> A <a href="http://msdn.microsoft.com/en-us/library/1c8bzx97(v=vs.110).aspx"><b>Dequeue</b></a>
	    method, which takes no parameters and removes and returns
	    the element at the front of the queue.  If the queue is
	    empty, this method throws an
	    <b>InvalidOperationException</b>. </li>
</ul>
To implement a capital gain calculator using a <b>Queue&lt;T&gt;</b>,
    we first need to determine what type to make the elements.  We
    will need to store the purchase price of each share we buy in the
    queue.  An appropriate type for storing monetary amounts is the <a href="/~rhowell/DataStructures/redirect/decimals"><b>decimal</b></a>
    type.  Therefore, we will use an initially empty
    <b>Queue&lt;decimal&gt;</b>.  Each time we buy shares, we enqueue
    the purchase price of each share onto the queue.  When we sell
    shares, we need to compute the sum of the capital gains for all of
    the shares we sold.  To get the capital gain for a single share,
    we dequeue its original purchase price from the queue, and
    subtract that purchase price from the selling price.  Using the
    queue in this way ensures that we sell the shares in FIFO order.


<p></p>

<p>

</p>
<small>
<i> Â© Copyright 2014, <a href="/~rhowell/">Rod Howell</a>. All
    rights reserved.</i>
</small>
<p></p>
<table border="0" cellpadding="2" summary="This table is used for layout
purposes only.">
<tr>
<td align="center">
<a href="http://validator.w3.org/check/referer"><img alt="Valid HTML 4.01!" border="0" height="31" src="/~rhowell/valid-html401.gif" width="88"/></a>
</td>
<tr>
<td>
<a href="http://jigsaw.w3.org/css-validator/check/referer">
<img alt="Valid CSS!" border="0" height="31" src="/~howell/vcss.gif" width="88"/>
</a>
</td>
</tr></tr></table>
</body>
</html>
