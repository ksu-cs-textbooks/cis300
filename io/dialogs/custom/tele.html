




	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0">
    <meta name="generator" content="Relearn 5.2.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="K-State CIS 300: Data Structures">
    <meta name="author" content="Rod Howell and Josh Weese">
    <title>Custom Dialogs :: Data Structures in C#</title>
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/fontawesome-all.min.css?1685386944" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/fontawesome-all.min.css?1685386944" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/featherlight.min.css?1685386944" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/featherlight.min.css?1685386944" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/auto-complete.css?1685386944" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/auto-complete.css?1685386944" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/perfect-scrollbar.min.css?1685386944" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/nucleus.css?1685386944" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/fonts.css?1685386944" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis300/css/fonts.css?1685386944" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/theme.css?1685386944" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/theme-light-theme.css?1685386944" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/ie.css?1685386944" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/variant.css?1685386944" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/print.css?1685386944" rel="stylesheet" media="print">
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/variant.js?1685386944"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="https://ksu-cs-textbooks.github.io/cis300/index.json";
      var root_url="https://ksu-cs-textbooks.github.io/cis300/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis300/';
      window.variants && variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis300/css/custom.css?1685386944" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/jquery.min.js?1685386944" defer></script>

  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/custom/">
    
    <div id="tele" class="tele mirror">
    
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="default">
<div hidden><h1>Custom Dialogs</h1></div>
<h2 id="custom-dialogs">Custom Dialogs</h2>
<p>While the dialogs provided by the .NET Framework are useful in a variety of applications, there are times when we need to be able to design our own special-purpose dialog to obtain specific information from the user. This section outlines how Visual Studio® can be used to build such a dialog.</p>
<p>Let&rsquo;s begin by considering a simple example. Suppose we are building an application that needs a dialog to obtain from the user the following pieces of information:</p>
<ul>
<li>a name;</li>
<li>a phone number; and</li>
<li>a number of siblings.</li>
</ul>
<p>In order to keep the example simple, the program will simply display this information in its main window. Thus, the main window looks like this:</p>
<p><img src="custom-dialog-main.jpg" alt="A window that uses a custom dialog"></p>
<p>Clicking the &ldquo;Get New Information&rdquo; button will open our custom dialog, which will look like this:</p>
<p><img src="custom-dialog.jpg" alt="A custom dialog"></p>
<p>After the user enters the information, clicking &ldquo;OK&rdquo; will cause the information entered to be displayed in the main window. If the user clicks &ldquo;Cancel&rdquo;, the main window will be unchanged.</p>
<p>After building the main form in Visual Studio&rsquo;s Design Window, we can build the dialog by creating another form. To do this, in the Solution Explorer, right-click on the project name and select &ldquo;Add-&gt;Windows Form&hellip;&rdquo;. This will open a dialog for adding a new item, where the type of item is pre-selected to be a Windows Form. You will need to supply a name for the form. This name will serve as both a file name for a source file and the name of a class defined within this file. For example, we could choose the name, &ldquo;InformationDialog.cs&rdquo;, and the class will be named <strong>InformationDialog</strong>. Clicking the &ldquo;Add&rdquo; button will then open a new Design Window containing a form.</p>
<p>We can then use the Design Window to build this form as we would build any other form. In addition, the <strong>Button</strong> class has a 

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.button.dialogresult?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>DialogResult</strong></a> property that governs certain behavior when buttons are used within a dialog. This property is of type 

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.dialogresult?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>DialogResult</strong></a>. Setting it to a value other than <strong>None</strong> will cause the button to do the following when clicked, provided the form is displayed as a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs">modal dialog</a>:</p>
<ul>
<li>Close the form.</li>
<li>Return the value of the <strong>DialogResult</strong> property.</li>
</ul>
<p>Thus, we should set the &ldquo;OK&rdquo; button&rsquo;s <strong>DialogResult</strong> property to <strong>OK</strong> and the &ldquo;Cancel&rdquo; button&rsquo;s <strong>DialogResult</strong> property to <strong>Cancel</strong>. Once we have done this, there is no need to define any event handlers for these buttons.</p>
<p>Furthermore, the 

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Form</strong></a> itself has two properties that can be set to provide shortcuts for these buttons. The 

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.acceptbutton?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>AcceptButton</strong></a> property, of type <strong>IButtonControl</strong> (a super-type of <strong>Button</strong>), can be used to cause the &ldquo;Enter&rdquo; key to activate a button on the form, as if that button had been clicked. Thus, we could set this property to the &ldquo;OK&rdquo; button. Similarly, the 

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.cancelbutton?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>CancelButton</strong></a> property (also of type <strong>IButtonControl</strong>) can be used to cause the &ldquo;Esc&rdquo; key to activate a button on the form. We could therefore set this property to the &ldquo;Cancel&rdquo; button.</p>
<p>While we don&rsquo;t need any event handlers for this dialog, we still need to provide code to allow the class for the main window to access the values provided by the user. This can be accomplished with three <strong>public</strong> 

<a href="https://ksu-cs-textbooks.github.io/cis300/appendix/syntax/properties">properties</a>, one for each of the three pieces of information the user can provide:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the name.  (There is already a Name property inherited from</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// the Form class, so we will use FullName.)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName =&gt; uxName.Text;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the phone number.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> PhoneNumber =&gt; uxPhoneNumber.Text;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Gets the number of siblings.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Siblings =&gt; (<span style="color:#66d9ef">int</span>)uxSiblings.Value;
</span></span></code></pre></div><p>In order for the main window to be able to display this dialog, it needs to construct an instance of it. We can add to its class definition a <strong>private</strong> field initialized to such an instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The dialog for obtaining information from the user.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> InformationDialog uxInformation = <span style="color:#66d9ef">new</span> InformationDialog();
</span></span></code></pre></div><p>Finally, we need an event handler for the &ldquo;Get New Information&rdquo; button. This event handler needs to display the <strong>InformationDialog</strong> as a modal dialog, and if the user closes it with the &ldquo;OK&rdquo; button, to copy the information provided by the user to the main window. A <strong>Form</strong> provides two methods for displaying it as a dialog:</p>
<ul>
<li>

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.show?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>Show</strong></a> displays the <strong>Form</strong> as a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs">non-modal dialog</a>. It takes no parameters and returns nothing.</li>
<li>

<a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.showdialog?view=netframework-4.7.2" target="_blank" rel="noopener"><strong>ShowDialog</strong></a> displays the <strong>Form</strong> as a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs">modal dialog</a>. It takes no parameters and returns a <strong>DialogResult</strong> indicating how the user closed the dialog.</li>
</ul>
<p>Thus, the event handler can display the dialog and retrieve its information much like it would do with a 

<a href="https://ksu-cs-textbooks.github.io/cis300/io/dialogs/file-dialogs">file dialog</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Handles a Get New Information event.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> uxNew_Click(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (uxInformation.ShowDialog() == DialogResult.OK)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        uxName.Text = uxInformation.FullName;
</span></span><span style="display:flex;"><span>        uxPhoneNumber.Text = uxInformation.PhoneNumber;
</span></span><span style="display:flex;"><span>        uxSiblings.Text = uxInformation.Siblings.ToString();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>

<a href="https://classroom.github.com/a/eX_samBg" target="_blank" rel="noopener">This git repository</a> contains the complete program described above.</p>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    
  </div>
    
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/clipboard.min.js?1685386944" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/perfect-scrollbar.min.js?1685386944" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/featherlight.min.js?1685386944" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/theme.js?1685386944" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis300/js/tele-scroll.js?1685386944 defer"></script>
    
  </body>
</html>
