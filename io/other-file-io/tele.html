<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="Other File I/O Not all files are plain text files — often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked."><meta name=author content="Rod Howell and Josh Weese"><meta name=twitter:card content="summary"><meta name=twitter:title content="Other File I/O :: Data Structures in C#"><meta name=twitter:description content="Other File I/O Not all files are plain text files — often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis300/io/other-file-io/"><meta property="og:site_name" content="Data Structures in C#"><meta property="og:title" content="Other File I/O :: Data Structures in C#"><meta property="og:description" content="Other File I/O Not all files are plain text files — often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Input/Output"><meta property="article:modified_time" content="2023-05-30T14:31:54-05:00"><meta itemprop=name content="Other File I/O :: Data Structures in C#"><meta itemprop=description content="Other File I/O Not all files are plain text files — often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked."><meta itemprop=dateModified content="2023-05-30T14:31:54-05:00"><meta itemprop=wordCount content="459"><title>Other File I/O :: Data Structures in C#</title>
<link href=/cis300/css/fontawesome-all.min.css?1723480305 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis300/css/fontawesome-all.min.css?1723480305 rel=stylesheet></noscript><link href=/cis300/css/nucleus.css?1723480305 rel=stylesheet><link href=/cis300/css/auto-complete.css?1723480305 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis300/css/auto-complete.css?1723480305 rel=stylesheet></noscript><link href=/cis300/css/perfect-scrollbar.min.css?1723480305 rel=stylesheet><link href=/cis300/css/fonts.css?1723480305 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis300/css/fonts.css?1723480305 rel=stylesheet></noscript><link href=/cis300/css/theme.css?1723480305 rel=stylesheet><link href=/cis300/css/theme-auto.css?1723480305 rel=stylesheet id=R-variant-style><link href=/cis300/css/chroma-auto.css?1723480305 rel=stylesheet id=R-variant-chroma-style><link href=/cis300/css/variant.css?1723480305 rel=stylesheet><link href=/cis300/css/print.css?1723480305 rel=stylesheet media=print><script src=/cis300/js/variant.js?1723480305></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis300",window.index_js_url="/cis300/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis300/css/custom.css?1723480305 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis300/io/other-file-io/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><div hidden><h1 id=other-file-io>Other File I/O</h1></div><h2 id=other-file-io>Other File I/O</h2><p>Not all files are plain text files &mdash; often we need to read and/or write
binary data. .NET provides the
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream?view=net-6.0" rel=external target=_blank><strong>FileStream</strong></a>
class for this purpose.</p><p>The <strong>FileStream</strong> class provides constructors for creating a
<strong>FileStream</strong> for reading, writing, or both. These constructors can be
used to specify how the file is to be opened or created, the type of
access to be allowed (i.e., reading/writing), and how the file is to be
locked. In most cases, however, a simpler way to construct an
appropriate <strong>FileStream</strong> is to use one of the following <strong>static</strong>
methods provided by the the
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file?view=net-6.0" rel=external target=_blank><strong>File</strong></a>
class:</p><ul><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.openread?view=net-6.0#system-io-file-openread(system-string)" rel=external target=_blank><strong>File.OpenRead(string
fn)</strong></a>:
returns a <strong>FileStream</strong> for reading the file with the given path
name. A <strong>FileNotFoundException</strong> is thrown if the file does not
exist.</li><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.openwrite?view=net-6.0#system-io-file-openwrite(system-string)" rel=external target=_blank><strong>File.OpenWrite(string
fn)</strong></a>:
returns a <strong>FileStream</strong> for writing to the file with the given path
name. If the file exists, it will be replaced; otherwise, it will be
created.</li></ul><p>Two of the most commonly-used methods of a <strong>FileStream</strong> are
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.writebyte?view=net-6.0#system-io-filestream-writebyte(system-byte)" rel=external target=_blank><strong>ReadByte</strong></a>
and
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.writebyte?view=net-6.0#system-io-filestream-writebyte(system-byte)" rel=external target=_blank><strong>WriteByte</strong></a>.
The <strong>ReadByte</strong> method takes no parameters and returns an <strong>int</strong>. If
there is at least one byte available to read, the next one is read and
its value (a nonnegative integer less than 256) is returned; otherwise,
the value returned is -1 (this is the only way to detect when the end of
the stream has been reached). The <strong>WriteByte</strong> method takes a <strong>byte</strong>
as its only parameter and writes it to the file. It returns nothing.</p><p>Because a <strong>FileStream</strong> has no <strong>EndOfStream</strong> property, we must code a
loop to read to the end of the stream somewhat differently from what we
have seen before. We can take advantage of the fact that in C#, an
assignment statement can be used within an expression. When this is
done, the value of the assignment statement is the value that it
assigns. Thus, if <code>input</code> is a <strong>FileStream</strong> opened for input, we can
set up a loop to read a byte at a time to the end of the stream as
follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=kt>int</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>((</span><span class=n>k</span> <span class=p>=</span> <span class=n>input</span><span class=p>.</span><span class=n>ReadByte</span><span class=p>())</span> <span class=p>!=</span> <span class=p>-</span><span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>byte</span> <span class=n>b</span> <span class=p>=</span> <span class=p>(</span><span class=kt>byte</span><span class=p>)</span><span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>In the above code, the <strong>ReadByte</strong> method reads a byte from the file as
long as there is one to read, and assigns it to the <strong>int</strong> variable
<code>k</code>. If there is no byte to read, it assigns -1 to <code>k</code>. In either case,
the value of the assignment statement is the value assigned to <code>k</code>.
Thus, if the <strong>ReadByte</strong> method is at the end of the stream, it returns
-1, which is assigned to <code>k</code>, and the loop terminates. Otherwise, the
loop iterates, assigning <code>k</code> to <code>b</code> as a <strong>byte</strong>. The remainder of the
iteration can then use the <strong>byte</strong> read, which is in <code>b</code>.</p><footer class=footline></footer></article></div></main></div></div><script src=/cis300/js/clipboard.min.js?1723480305 defer></script><script src=/cis300/js/perfect-scrollbar.min.js?1723480305 defer></script><script src=/cis300/js/theme.js?1723480305 defer></script><script src=/cis300/js/tele-scroll.js?1723480305 defer></script></body></html>