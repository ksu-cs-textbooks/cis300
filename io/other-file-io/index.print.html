<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="Other File I/O Not all files are plain text files â€” often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked. In most cases, however, a simpler way to construct an appropriate FileStream is to use one of the following static methods provided by the the File class:"><meta name=author content="Rod Howell and Josh Weese"><meta name=twitter:card content="summary"><meta name=twitter:title content="Other File I/O :: Data Structures in C#"><meta name=twitter:description content="Other File I/O Not all files are plain text files â€” often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked. In most cases, however, a simpler way to construct an appropriate FileStream is to use one of the following static methods provided by the the File class:"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis300/io/other-file-io/"><meta property="og:site_name" content="Data Structures in C#"><meta property="og:title" content="Other File I/O :: Data Structures in C#"><meta property="og:description" content="Other File I/O Not all files are plain text files â€” often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked. In most cases, however, a simpler way to construct an appropriate FileStream is to use one of the following static methods provided by the the File class:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Input/Output"><meta property="article:modified_time" content="2023-05-30T14:31:54-05:00"><meta itemprop=name content="Other File I/O :: Data Structures in C#"><meta itemprop=description content="Other File I/O Not all files are plain text files â€” often we need to read and/or write binary data. .NET provides the FileStream class for this purpose.
The FileStream class provides constructors for creating a FileStream for reading, writing, or both. These constructors can be used to specify how the file is to be opened or created, the type of access to be allowed (i.e., reading/writing), and how the file is to be locked. In most cases, however, a simpler way to construct an appropriate FileStream is to use one of the following static methods provided by the the File class:"><meta itemprop=dateModified content="2023-05-30T14:31:54-05:00"><meta itemprop=wordCount content="460"><title>Other File I/O :: Data Structures in C#</title><link href=https://textbooks.cs.ksu.edu/cis300/io/other-file-io/ rel=canonical type=text/html title="Other File I/O :: Data Structures in C#"><link href=/cis300/io/other-file-io/index.xml rel=alternate type=application/rss+xml title="Other File I/O :: Data Structures in C#"><link href=/cis300/io/other-file-io/tele.html rel=alternate type=text/html title="Other File I/O :: Data Structures in C#"><link href=/cis300/io/other-file-io/embed.html rel=alternate type=text/html title="Other File I/O :: Data Structures in C#"><link href=/cis300/css/auto-complete/auto-complete.min.css?1768891883 rel=stylesheet><script src=/cis300/js/auto-complete/auto-complete.min.js?1768891883 defer></script><script src=/cis300/js/search-lunr.min.js?1768891883 defer></script><script src=/cis300/js/search.min.js?1768891883 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis300/searchindex.en.js?1768891883"</script><script src=/cis300/js/lunr/lunr.min.js?1768891883 defer></script><script src=/cis300/js/lunr/lunr.stemmer.support.min.js?1768891883 defer></script><script src=/cis300/js/lunr/lunr.multi.min.js?1768891883 defer></script><script src=/cis300/js/lunr/lunr.en.min.js?1768891883 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis300/fonts/fontawesome/css/fontawesome-all.min.css?1768891883 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis300/fonts/fontawesome/css/fontawesome-all.min.css?1768891883 rel=stylesheet></noscript><link href=/cis300/css/perfect-scrollbar/perfect-scrollbar.min.css?1768891883 rel=stylesheet><link href=/cis300/css/theme.min.css?1768891883 rel=stylesheet><link href=/cis300/css/format-print.min.css?1768891883 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/io/other-file-io/",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis300",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis300/css/custom.css?1768891883 rel=stylesheet></head><body class="mobile-support print" data-url=/cis300/io/other-file-io/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#other-file-io>Other File I/O</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement class=a11y-only><a itemprop=item href=/cis300/><span itemprop=name>Data Structures in C#</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis300/io/><span itemprop=name>Input/Output</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Other File I/O</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-edit" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=https://github.com/ksu-cs-textbooks/cis300/edit/main/content/io/other-file-io.md rel=external target=_blank title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></div><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis300/io/other-file-io/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis300/io/advanced-text-file/ title="Advanced Text File I/O (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis300/strings/ title="strings and StringBuilders (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more><div class="topbar-button topbar-button-embed" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis300/io/other-file-io/embed.html title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a></div><div class="topbar-button topbar-button-tele" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis300/io/other-file-io/tele.html title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a></div></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable io" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><div hidden><h1 id=other-file-io>Other File I/O</h1></div><h2 id=other-file-io>Other File I/O</h2><p>Not all files are plain text files &mdash; often we need to read and/or write
binary data. .NET provides the
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream?view=net-6.0" rel=external target=_blank><strong>FileStream</strong></a>
class for this purpose.</p><p>The <strong>FileStream</strong> class provides constructors for creating a
<strong>FileStream</strong> for reading, writing, or both. These constructors can be
used to specify how the file is to be opened or created, the type of
access to be allowed (i.e., reading/writing), and how the file is to be
locked. In most cases, however, a simpler way to construct an
appropriate <strong>FileStream</strong> is to use one of the following <strong>static</strong>
methods provided by the the
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file?view=net-6.0" rel=external target=_blank><strong>File</strong></a>
class:</p><ul><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.openread?view=net-6.0#system-io-file-openread(system-string)" rel=external target=_blank><strong>File.OpenRead(string
fn)</strong></a>:
returns a <strong>FileStream</strong> for reading the file with the given path
name. A <strong>FileNotFoundException</strong> is thrown if the file does not
exist.</li><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.openwrite?view=net-6.0#system-io-file-openwrite(system-string)" rel=external target=_blank><strong>File.OpenWrite(string
fn)</strong></a>:
returns a <strong>FileStream</strong> for writing to the file with the given path
name. If the file exists, it will be replaced; otherwise, it will be
created.</li></ul><p>Two of the most commonly-used methods of a <strong>FileStream</strong> are
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.writebyte?view=net-6.0#system-io-filestream-writebyte(system-byte)" rel=external target=_blank><strong>ReadByte</strong></a>
and
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.writebyte?view=net-6.0#system-io-filestream-writebyte(system-byte)" rel=external target=_blank><strong>WriteByte</strong></a>.
The <strong>ReadByte</strong> method takes no parameters and returns an <strong>int</strong>. If
there is at least one byte available to read, the next one is read and
its value (a nonnegative integer less than 256) is returned; otherwise,
the value returned is -1 (this is the only way to detect when the end of
the stream has been reached). The <strong>WriteByte</strong> method takes a <strong>byte</strong>
as its only parameter and writes it to the file. It returns nothing.</p><p>Because a <strong>FileStream</strong> has no <strong>EndOfStream</strong> property, we must code a
loop to read to the end of the stream somewhat differently from what we
have seen before. We can take advantage of the fact that in C#, an
assignment statement can be used within an expression. When this is
done, the value of the assignment statement is the value that it
assigns. Thus, if <code>input</code> is a <strong>FileStream</strong> opened for input, we can
set up a loop to read a byte at a time to the end of the stream as
follows:</p><div class=highlight dir=auto><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=kt>int</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>((</span><span class=n>k</span> <span class=p>=</span> <span class=n>input</span><span class=p>.</span><span class=n>ReadByte</span><span class=p>())</span> <span class=p>!=</span> <span class=p>-</span><span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>byte</span> <span class=n>b</span> <span class=p>=</span> <span class=p>(</span><span class=kt>byte</span><span class=p>)</span><span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>In the above code, the <strong>ReadByte</strong> method reads a byte from the file as
long as there is one to read, and assigns it to the <strong>int</strong> variable
<code>k</code>. If there is no byte to read, it assigns -1 to <code>k</code>. In either case,
the value of the assignment statement is the value assigned to <code>k</code>.
Thus, if the <strong>ReadByte</strong> method is at the end of the stream, it returns
-1, which is assigned to <code>k</code>, and the loop terminates. Otherwise, the
loop iterates, assigning <code>k</code> to <code>b</code> as a <strong>byte</strong>. The remainder of the
iteration can then use the <strong>byte</strong> read, which is in <code>b</code>.</p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>8.0.0</p><p>Last modified by:
<i class='fa-fw fas fa-user'></i> <a href=mailto:rhowell@ksu.edu>Rod Howell</a>
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis300/commit/7e8495e442abacbbeb0fa0ccb726d22ed33a2f15>May 30, 2023</a></p></div></div><script>window.MathJax=Object.assign(window.MathJax||{},{tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]]},options:{enableMenu:!1}},JSON.parse("{}"))</script><script id=MathJax-script async src=/cis300/js/mathjax/tex-mml-chtml.js?1768891883></script><script src=/cis300/js/clipboard/clipboard.min.js?1768891883 defer></script><script src=/cis300/js/perfect-scrollbar/perfect-scrollbar.min.js?1768891883 defer></script><script src=/cis300/js/theme.min.js?1768891883 defer></script></body></html>